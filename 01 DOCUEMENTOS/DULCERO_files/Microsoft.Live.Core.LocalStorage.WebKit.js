Microsoft.Live.Core.Loader.onResourceAvailable('core_localstorage_webkit', function() { 
// Copyright (c) Microsoft Corporation. All rights reserved.
Type.registerNamespace('Microsoft.Live.Core');Microsoft.Live.Core.LocalStorageDeserializedEventArgs=function(name,scope,key,serialization){Microsoft.Live.Core.LocalStorageDeserializedEventArgs.initializeBase(this);this.$1_0=key;this.$1_1=name;this.$1_2=scope;this.$1_3=serialization;}
Microsoft.Live.Core.LocalStorageDeserializedEventArgs.prototype={$1_0:null,$1_1:null,$1_2:0,$1_3:null,$1_4:null,get_key:function(){return this.$1_0;},get_name:function(){return this.$1_1;},get_scope:function(){return this.$1_2;},get_serialization:function(){return this.$1_3;},set_serialization:function(value){this.$1_3=value;return value;},get_value:function(){return this.$1_4;},set_value:function(value){this.$1_4=value;return value;}}
Microsoft.Live.Core.LocalStorageSerializedEventArgs=function(name,scope,key,value){Microsoft.Live.Core.LocalStorageSerializedEventArgs.initializeBase(this);this.$1_0=key;this.$1_1=name;this.$1_2=scope;this.$1_4=value;}
Microsoft.Live.Core.LocalStorageSerializedEventArgs.prototype={$1_0:null,$1_1:null,$1_2:0,$1_3:null,$1_4:null,get_key:function(){return this.$1_0;},get_name:function(){return this.$1_1;},get_scope:function(){return this.$1_2;},get_value:function(){return this.$1_4;},get_serialization:function(){return this.$1_3;},set_serialization:function(value){this.$1_3=value;return value;}}
Type.registerNamespace('Microsoft.Live.Core.Internal');Microsoft.Live.Core.Internal.StorageScope=function(){};Microsoft.Live.Core.Internal.StorageScope.prototype={global:1,session:2,unspecified:3}
Microsoft.Live.Core.Internal.StorageScope.registerEnum('Microsoft.Live.Core.Internal.StorageScope',false);Microsoft.Live.Core.Internal.IClientLocalStorage=function(){};Microsoft.Live.Core.Internal.IClientLocalStorage.registerInterface('Microsoft.Live.Core.Internal.IClientLocalStorage');Microsoft.Live.Core.Internal.IStorageGroup=function(){};Microsoft.Live.Core.Internal.IStorageGroup.registerInterface('Microsoft.Live.Core.Internal.IStorageGroup');Microsoft.Live.Core.Internal.$create_MLCLSB$1=function(storageGroup,key,value){var $o={};$o.$0=storageGroup;$o.$1=key;$o.$2=value;return $o;}
Microsoft.Live.Core.Internal.MLCLSB$2=function(){}
Microsoft.Live.Core.Internal.MLCLSB$2.$5=function($p0){if(Microsoft.Live.Core.Internal.MLCLSB$2.$1==null){Microsoft.Live.Core.Internal.MLCLSB$2.$1=[];}Microsoft.Live.Core.Internal.MLCLSB$2.$E(Microsoft.Live.Core.Internal.MLCLSB$2.$1,$p0);Microsoft.Live.Core.Internal.MLCLSB$2.$D();}
Microsoft.Live.Core.Internal.MLCLSB$2.$6=function($p0){if(Microsoft.Live.Core.Internal.MLCLSB$2.$2==null){Microsoft.Live.Core.Internal.MLCLSB$2.$2=[];}Microsoft.Live.Core.Internal.MLCLSB$2.$E(Microsoft.Live.Core.Internal.MLCLSB$2.$2,$p0);Microsoft.Live.Core.Internal.MLCLSB$2.$D();}
Microsoft.Live.Core.Internal.MLCLSB$2.$7=function($p0){if(Microsoft.Live.Core.Internal.MLCLSB$2.$2==null){return;}var $0=0;var $1=Microsoft.Live.Core.Internal.MLCLSB$2.$2.length;while($0<$1){var $2=Microsoft.Live.Core.Internal.MLCLSB$2.$2[$0];if($2.$1===$p0.$1&&$2.$0.equals($p0.$0)){Microsoft.Live.Core.Internal.MLCLSB$2.$2.removeAt($0);$1--;}else{$0++;}}}
Microsoft.Live.Core.Internal.MLCLSB$2.$8=function($p0){if(Microsoft.Live.Core.Internal.MLCLSB$2.$1==null){return;}var $0=0;var $1=Microsoft.Live.Core.Internal.MLCLSB$2.$1.length;while($0<$1){var $2=Microsoft.Live.Core.Internal.MLCLSB$2.$1[$0];if($2.$0.equals($p0)){Microsoft.Live.Core.Internal.MLCLSB$2.$1.removeAt($0);$1--;}else{$0++;}}}
Microsoft.Live.Core.Internal.MLCLSB$2.$9=function(){Microsoft.Live.Core.Internal.MLCLSB$2.$10(Microsoft.Live.Core.Internal.MLCLSB$2.$1);}
Microsoft.Live.Core.Internal.MLCLSB$2.$A=function($p0){if(Microsoft.Live.Core.Internal.MLCLSB$2.$1==null){return;}var $0=0;while($0<Microsoft.Live.Core.Internal.MLCLSB$2.$1.length){var $1=Microsoft.Live.Core.Internal.MLCLSB$2.$1[$0];if($1.$0.equals($p0)){try{$1.$0.nonCachedWrite($1.$1,$1.$2);}catch($2){}Microsoft.Live.Core.Internal.MLCLSB$2.$1.removeAt($0);}else{$0++;}}}
Microsoft.Live.Core.Internal.MLCLSB$2.$B=function(){window.attachEvent('onunload',Microsoft.Live.Core.Internal.MLCLSB$2.$F);}
Microsoft.Live.Core.Internal.MLCLSB$2.$C=function(){Microsoft.Live.Core.Internal.MLCLSB$2.$4=new MSH.Timer(function($p1_0){var $1_0=Date.get_now();Microsoft.Live.Core.Internal.MLCLSB$2.$9();var $1_1=MSH.DateTimeHelper.subtract(Date.get_now(),$1_0);MSH.PerfCollector.get_instance().addPerfCounterValue('DelayedLocalStorageWriter-CommitTime',$1_1);},null,60000,60000);}
Microsoft.Live.Core.Internal.MLCLSB$2.$D=function(){if(!Microsoft.Live.Core.Internal.MLCLSB$2.$3){Microsoft.Live.Core.Internal.MLCLSB$2.$3=true;Microsoft.Live.Core.Internal.MLCLSB$2.$C();Microsoft.Live.Core.Internal.MLCLSB$2.$B();}}
Microsoft.Live.Core.Internal.MLCLSB$2.$E=function($p0,$p1){for(var $0=0,$1=$p0.length;$0<$1;$0++){var $2=$p0[$0];if($2.$1===$p1.$1&&$2.$0.equals($p1.$0)){$2.$2=$p1.$2;return;}}$p0.add($p1);}
Microsoft.Live.Core.Internal.MLCLSB$2.$F=function(){Microsoft.Live.Core.Internal.MLCLSB$2.$9();Microsoft.Live.Core.Internal.MLCLSB$2.$10(Microsoft.Live.Core.Internal.MLCLSB$2.$2);}
Microsoft.Live.Core.Internal.MLCLSB$2.$10=function($p0){if($p0==null){return;}MSH.PerfCollector.get_instance().addPerfCounterValue('DelayedLocalStorageWriter-CommitQueueSize',$p0.length);for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];try{$1.$0.nonCachedWrite($1.$1,$1.$2);}catch($2){}}$p0.clear();}
Microsoft.Live.Core.Internal.ContextHelper=function(){}
Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame=function(){return MSH.DomainHelper.isDomainInDomainsList(document.domain,Microsoft.Live.Core.Internal.ContextHelper.$0)&&window.location.pathname.toLowerCase().indexOf('localstorage.html')>0;}
Microsoft.Live.Core.Internal.ExceptionHelper=function(){}
Microsoft.Live.Core.Internal.ExceptionHelper.$0=function(){return Error.invalidOperation('LocalStorage cannot be used when document.domain is not defined.');}
Microsoft.Live.Core.Internal.ExceptionHelper.createStorageNotReadyException=function(){return Error.invalidOperation('Operation is not valid due to the current state of the object. LocalStorage is not initialized.');}
Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException=function(paramName,actualValue){return Error.argumentOutOfRange(paramName,actualValue);}
Microsoft.Live.Core.Internal.ClientLocalStorage=function(domainRequired){if(domainRequired&&String.isNullOrEmpty(document.domain)){throw Microsoft.Live.Core.Internal.ExceptionHelper.$0();}}
Microsoft.Live.Core.Internal.ClientLocalStorage.get_defaultStorageNamespace=function(){return'Default';}
Microsoft.Live.Core.Internal.ClientLocalStorage.get_storageNamespaces=function(){return Microsoft.Live.Core.Internal.ClientLocalStorage.$1||['Default'];}
Microsoft.Live.Core.Internal.ClientLocalStorage.set_storageNamespaces=function(value){Microsoft.Live.Core.Internal.ClientLocalStorage.$1=value;return value;}
Microsoft.Live.Core.Internal.ClientLocalStorage.prototype={$2:function($p0,$p1,$p2){if($p2==null){this.onRemoveItem($p0,$p1);return true;}if(String.isNullOrEmpty($p1)){return true;}var $0;if(Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame()){$0=$p2;}else{$0=MLC.JSON.serialize($p2);var $2=this.$6($p0.get_name(),$p0.get_scope(),$p1,$p2,$0);if($2!=null){$0=$2.get_serialization();}}var $1=this.onSetItem($p0,$p1,$0);return $1;},$3:function($p0,$p1){var $0=this.onGetItem($p0,$p1);if(String.isNullOrEmpty($p1)&&$0!=null){this.onRemoveItem($p0,$p1);return null;}if(Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame()){return $0;}var $1=this.$7($p0.get_name(),$p0.get_scope(),$p1,$0);if($1==null){return MLC.JSON.deserialize($0);}return($1.get_value()!=null)?$1.get_value():MLC.JSON.deserialize($1.get_serialization());},getAllKeys:function(group){var $0=this.onGetAllKeys(group);if($0.contains(String.Empty)){$0.remove(String.Empty);this.onRemoveItem(group,String.Empty);}return $0;},add_deserialized:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_deserialized:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,add_serialized:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_serialized:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,$6:function($p0,$p1,$p2,$p3,$p4){if(this.$5==null){return null;}var $0=new Microsoft.Live.Core.LocalStorageSerializedEventArgs($p0,$p1,$p2,$p3);$0.set_serialization($p4);this.$5.invoke(this,$0);return $0;},$7:function($p0,$p1,$p2,$p3){if(this.$4==null){return null;}var $0=new Microsoft.Live.Core.LocalStorageDeserializedEventArgs($p0,$p1,$p2,$p3);this.$4.invoke(this,$0);return $0;},get_item:function(group,key){return this.$3(group,key);},set_item:function(group,key,value){if(!this.$2(group,key,value)){throw new Error('Write operation to local-storage has failed.');}return value;}}
Microsoft.Live.Core.Internal.StorageGroup=function(name,storage){this.$0=name;this.$1=storage;this.$2={};}
Microsoft.Live.Core.Internal.StorageGroup.prototype={$0:null,$1:null,$2:null,$3:0,get_name:function(){return this.$0;},get_scope:function(){return this.$1.get_scope();},get_version:function(){return this.$3;},equals:function(currentGroup){if(currentGroup==null){return false;}return this.get_name()===currentGroup.get_name()&&this.get_scope()===currentGroup.get_scope();},equalsByName:function(groupName){return groupName===this.$0;},addOnUnloadWrite:function(key,value){Microsoft.Live.Core.Internal.MLCLSB$2.$6(Microsoft.Live.Core.Internal.$create_MLCLSB$1(this,key,value));},removeOnUnloadWrite:function(key){Microsoft.Live.Core.Internal.MLCLSB$2.$7(Microsoft.Live.Core.Internal.$create_MLCLSB$1(this,key,null));},nonCachedWrite:function(key,value){this.$3++;this.$4(key,value);this.$1.set_item(this,key,value);},clear:function(){this.$3++;Microsoft.Live.Core.Internal.MLCLSB$2.$8(this);Object.clearKeys(this.$2);var $0=[];var $enum1=ss.IEnumerator.getEnumerator(this);while($enum1.moveNext()){var $1=$enum1.get_current();$0.enqueue($1);}while($0.length>0){this.set_item($0.dequeue().toString(),null);}Microsoft.Live.Core.Internal.MLCLSB$2.$A(this);},refresh:function(){this.flush();Object.clearKeys(this.$2);},flush:function(){this.$3++;Microsoft.Live.Core.Internal.MLCLSB$2.$A(this);},getEnumerator:function(){Microsoft.Live.Core.Internal.MLCLSB$2.$A(this);return new Microsoft.Live.Core.Internal.MLCLSB$0(this);},getAllKeys:function(){return this.$1.getAllKeys(this);},get_keyCount:function(){Microsoft.Live.Core.Internal.MLCLSB$2.$A(this);return this.$1.getKeyCount(this);},$4:function($p0,$p1){if($p1==null){if(Object.keyExists(this.$2,$p0)){delete this.$2[$p0];}}else{this.$2[$p0]=$p1;}},get_item:function(key){var $0=this.$2[key];if(ss.isNullOrUndefined($0)){$0=this.$1.get_item(this,key);if($0!=null){this.$2[key]=$0;}}return $0;},set_item:function(key,value){this.$3++;this.$4(key,value);Microsoft.Live.Core.Internal.MLCLSB$2.$5(Microsoft.Live.Core.Internal.$create_MLCLSB$1(this,key,value));if(value==null){this.$1.set_item(this,key,value);}return value;}}
Microsoft.Live.Core.Internal.MLCLSB$0=function(group){this.$0=group;this.$1=this.$0.get_version();this.$2=this.$0.getAllKeys();this.reset();}
Microsoft.Live.Core.Internal.MLCLSB$0.prototype={$0:null,$1:0,$2:null,$3:0,get_current:function(){if(this.$3<0){throw Error.invalidOperation('Enumeration has not started. Call MoveNext.');}if(this.$3>=this.$2.length){throw Error.invalidOperation('Enumeration already finished.');}return this.$2[this.$3];},moveNext:function(){if(this.$1!==this.$0.get_version()){throw Error.invalidOperation('Storage was modified.');}return++this.$3<this.$2.length;},reset:function(){if(this.$1!==this.$0.get_version()){throw Error.invalidOperation('Storage was modified.');}this.$3=-1;}}
Microsoft.Live.Core.LocalStorageDeserializedEventArgs.registerClass('Microsoft.Live.Core.LocalStorageDeserializedEventArgs',ss.EventArgs);Microsoft.Live.Core.LocalStorageSerializedEventArgs.registerClass('Microsoft.Live.Core.LocalStorageSerializedEventArgs',ss.EventArgs);Microsoft.Live.Core.Internal.MLCLSB$2.registerClass('Microsoft.Live.Core.Internal.MLCLSB$2');Microsoft.Live.Core.Internal.ContextHelper.registerClass('Microsoft.Live.Core.Internal.ContextHelper');Microsoft.Live.Core.Internal.ExceptionHelper.registerClass('Microsoft.Live.Core.Internal.ExceptionHelper');Microsoft.Live.Core.Internal.ClientLocalStorage.registerClass('Microsoft.Live.Core.Internal.ClientLocalStorage',null,Microsoft.Live.Core.Internal.IClientLocalStorage);Microsoft.Live.Core.Internal.StorageGroup.registerClass('Microsoft.Live.Core.Internal.StorageGroup',null,Microsoft.Live.Core.Internal.IStorageGroup,ss.IEnumerable);Microsoft.Live.Core.Internal.MLCLSB$0.registerClass('Microsoft.Live.Core.Internal.MLCLSB$0',null,ss.IEnumerator);Microsoft.Live.Core.Internal.MLCLSB$2.$1=null;Microsoft.Live.Core.Internal.MLCLSB$2.$2=null;Microsoft.Live.Core.Internal.MLCLSB$2.$3=false;Microsoft.Live.Core.Internal.MLCLSB$2.$4=null;Microsoft.Live.Core.Internal.ContextHelper.$0=['live.com','live-int.com','wlxrs.com','wlxrs-int.com'];Microsoft.Live.Core.Internal.ClientLocalStorage.$1=null;Type.registerNamespace('Microsoft.Live.Core.Internal');Microsoft.Live.Core.Internal.Html5CommonImpl=function(){}
Microsoft.Live.Core.Internal.Html5CommonImpl.$0=function($p0,$p1){return String.format('{0}@{1}',$p1,$p0.get_name());}
Microsoft.Live.Core.Internal.Html5CommonImpl.$1=function($p0){var $0=$p0.indexOf('@');return $p0.substr(0,$0);}
Microsoft.Live.Core.Internal.Html5CommonImpl.$2=function($p0){var $0=$p0.indexOf('@');return $p0.substr($0+1);}
Microsoft.Live.Core.Internal.Html5CommonImpl.$3=function($p0,$p1,$p2){var $0=0;var $1=$p0.length;var $2=null;for(var $3=0;$3<$1;$3++){var $4=$p0.key($3);var $5=Microsoft.Live.Core.Internal.Html5CommonImpl.$2($4);if($p1.equalsByName($5)){if($0===$p2){$2=Microsoft.Live.Core.Internal.Html5CommonImpl.$1($4);break;}$0++;}}return $2;}
Microsoft.Live.Core.Internal.Html5CommonImpl.$4=function($p0,$p1){return new Microsoft.Live.Core.Internal.StorageGroup($p0,$p1);}
Microsoft.Live.Core.Internal.WebKitClientLocalStorage=function(scope){Microsoft.Live.Core.Internal.WebKitClientLocalStorage.initializeBase(this,[true]);this.$1_0=scope;this.$1_1=Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_2(this.$1_0);}
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.isSupported=function(scope){switch(scope){case 2:return!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_4());case 1:return!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_3());default:return false;}}
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_2=function($p0){var $0=($p0===2)?Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_4():Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_3();return $0;}
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_3=function(){return window.self.localStorage;}
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.$1_4=function(){return window.self.sessionStorage;}
Microsoft.Live.Core.Internal.WebKitClientLocalStorage.prototype={$1_0:0,$1_1:null,get_scope:function(){return this.$1_0;},get_storageCapacity:function(){return 5000*1024;},createGroup:function(group){return Microsoft.Live.Core.Internal.Html5CommonImpl.$4(group,this);},onGetItem:function(group,key){var $0=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(group,key);var $1=this.$1_5(group,key);if($1==null){return null;}return $1;},getKeyCount:function(group){var $0=0;for(var $1=0,$2=this.$1_1.length;$1<$2;$1++){var $3=this.$1_1.key($1);var $4=Microsoft.Live.Core.Internal.Html5CommonImpl.$2($3);if(group.equalsByName($4)){$0++;}}return $0;},get_isReady:function(){return true;},getKey:function(group,index){return Microsoft.Live.Core.Internal.Html5CommonImpl.$3(this.$1_1,group,index);},onRemoveItem:function(group,key){var $0=Microsoft.Live.Core.Internal.Html5CommonImpl.$0(group,key);try{this.$1_1.removeItem($0);}catch($1){}},onSetItem:function(group,key,value){try{this.$1_1.setItem(Microsoft.Live.Core.Internal.Html5CommonImpl.$0(group,key),value);return true;}catch($0){return false;}},onGetAllKeys:function(group){var $0=[];var $1='@'+group.get_name();for(var $2=0,$3=this.$1_1.length;$2<$3;$2++){var $4=this.$1_1.key($2);if($4.endsWith($1)){$0.add(Microsoft.Live.Core.Internal.Html5CommonImpl.$1($4));}}return $0;},$1_5:function($p0,$p1){return this.$1_1.getItem(Microsoft.Live.Core.Internal.Html5CommonImpl.$0($p0,$p1));},$1_6:function($p0,$p1){var $0=this.$1_5($p0,$p1);return(String.isNullOrEmpty($0))?0:$0.length;}}
Microsoft.Live.Core.Internal.Html5CommonImpl.registerClass('Microsoft.Live.Core.Internal.Html5CommonImpl');Microsoft.Live.Core.Internal.WebKitClientLocalStorage.registerClass('Microsoft.Live.Core.Internal.WebKitClientLocalStorage',Microsoft.Live.Core.Internal.ClientLocalStorage);Type.registerNamespace('Microsoft.Live.Core');Microsoft.Live.Core.MLCLS$0=function(){};Microsoft.Live.Core.MLCLS$0.prototype={$0:0,$1:1,IE:2,$2:3,$3:4,$4:5,$5:6,$6:7,$7:8}
Microsoft.Live.Core.MLCLS$0.registerEnum('Microsoft.Live.Core.MLCLS$0',false);Microsoft.Live.Core.ILocalStorage=function(){};Microsoft.Live.Core.ILocalStorage.registerInterface('Microsoft.Live.Core.ILocalStorage');Microsoft.Live.Core.LocalStorageScope=function(){};Microsoft.Live.Core.LocalStorageScope.prototype={global:1,session:2}
Microsoft.Live.Core.LocalStorageScope.registerEnum('Microsoft.Live.Core.LocalStorageScope',false);Microsoft.Live.Core.LocalStorageStatus=function(){};Microsoft.Live.Core.LocalStorageStatus.prototype={uninitialized:0,initialized:1,failed:2}
Microsoft.Live.Core.LocalStorageStatus.registerEnum('Microsoft.Live.Core.LocalStorageStatus',false);Microsoft.Live.Core.MLCLS$8=function(){}
Microsoft.Live.Core.MLCLS$8.$6=function($p0){var $0=null;switch($p0){case 1:$0=Microsoft.Live.Core.MLCLS$8.$9();break;case 2:$0=Microsoft.Live.Core.MLCLS$8.$8();break;default:break;}return $0;}
Microsoft.Live.Core.MLCLS$8.$7=function(){return Microsoft.Live.Core.MLCLS$8.$2;}
Microsoft.Live.Core.MLCLS$8.$8=function(){if(Microsoft.Live.Core.MLCLS$8.$0==null&&Microsoft.Live.Core.MLCLS$8.$12(2)){Microsoft.Live.Core.MLCLS$8.$0=Microsoft.Live.Core.MLCLS$8.$A(2);}return Microsoft.Live.Core.MLCLS$8.$0;}
Microsoft.Live.Core.MLCLS$8.$9=function(){if(Microsoft.Live.Core.MLCLS$8.$1==null&&Microsoft.Live.Core.MLCLS$8.$12(1)){Microsoft.Live.Core.MLCLS$8.$1=Microsoft.Live.Core.MLCLS$8.$A(1);}return Microsoft.Live.Core.MLCLS$8.$1;}
Microsoft.Live.Core.MLCLS$8.$A=function($p0){if(Microsoft.Live.Core.MLCLS$8.$3===0){Microsoft.Live.Core.MLCLS$8.$13();}var $0=Microsoft.Live.Core.MLCLS$8.$C($p0);if(Microsoft.Live.Core.MLCLS$8.$B()){return $0;}if($0==null){$0=Microsoft.Live.Core.MLCLS$8.$11($p0,false);}if($0==null&&!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.FlashClientLocalStorage)){$0=Microsoft.Live.Core.MLCLS$8.$10($p0);}if($0==null&&!ss.isNullOrUndefined(Microsoft.Live.Core.Internal.GoogleGearsClientLocalStorage)){$0=Microsoft.Live.Core.MLCLS$8.$E($p0);}return $0;}
Microsoft.Live.Core.MLCLS$8.$B=function(){var $0=window['__messengerOnlyPreferredLocalStorageType'];return!ss.isNullOrUndefined($0);}
Microsoft.Live.Core.MLCLS$8.$C=function($p0){var $0=window['__messengerPreferredLocalStorageType'];if(ss.isNullOrUndefined($0)){return null;}if(String.isNullOrEmpty($0.toString())){return null;}switch($0.toString()){case'1':return Microsoft.Live.Core.MLCLS$8.$11($p0,true);case'2':return Microsoft.Live.Core.MLCLS$8.$D($p0);case'3':return Microsoft.Live.Core.MLCLS$8.$10($p0);case'4':return Microsoft.Live.Core.MLCLS$8.$E($p0);default:return null;}}
Microsoft.Live.Core.MLCLS$8.$D=function($p0){try{return new Microsoft.Live.Core.Internal.IEUserDataClientLocalStorage($p0);}catch($0){if(!ss.isNullOrUndefined($0)&&!String.isNullOrEmpty($0.message)){Microsoft.Live.Core.MLCLS$8.$2=$0.message;}return null;}}
Microsoft.Live.Core.MLCLS$8.$E=function($p0){if(Microsoft.Live.Core.MLCLS$8.$F()){try{return new Microsoft.Live.Core.Internal.GoogleGearsClientLocalStorage($p0);}catch($0){if(!ss.isNullOrUndefined($0)&&!String.isNullOrEmpty($0.message)){Microsoft.Live.Core.MLCLS$8.$2=$0.message;}return null;}}return null;}
Microsoft.Live.Core.MLCLS$8.$F=function(){return Microsoft.Live.Core.Internal.GoogleGearsUtils.isSupported();}
Microsoft.Live.Core.MLCLS$8.$10=function($p0){if(Microsoft.Live.Core.Loader.isFlashInstalled(8)){try{return new Microsoft.Live.Core.Internal.FlashClientLocalStorage($p0);}catch($0){if(!ss.isNullOrUndefined($0)&&!String.isNullOrEmpty($0.message)){Microsoft.Live.Core.MLCLS$8.$2=$0.message;}return null;}}return null;}
Microsoft.Live.Core.MLCLS$8.$11=function($p0,$p1){var $0=!Microsoft.Live.Core.Loader.get_settings().httpsApplication||(MLC.Channel.getChannelType()===3)||!Microsoft.Live.Core.Loader.isFlashInstalled(8);var $1=null;try{switch(Microsoft.Live.Core.MLCLS$8.$3){case 2:$1=new Microsoft.Live.Core.Internal.IEClientLocalStorage($p0);break;case 3:if($0){$1=new Microsoft.Live.Core.Internal.FirefoxClientLocalStorage($p0);}break;case 4:case 8:if($0&&Microsoft.Live.Core.Internal.WebKitClientLocalStorage.isSupported($p0)){$1=new Microsoft.Live.Core.Internal.WebKitClientLocalStorage($p0);}break;case 5:$1=(!$p1&&$0)?new Microsoft.Live.Core.Internal.IEUserDataClientLocalStorage($p0):null;break;default:$1=null;break;}}catch($2){if(!ss.isNullOrUndefined($2)&&!String.isNullOrEmpty($2.message)){Microsoft.Live.Core.MLCLS$8.$2=$2.message;}return null;}return $1;}
Microsoft.Live.Core.MLCLS$8.$12=function($p0){if(Microsoft.Live.Core.MLCLS$8.$3===0){Microsoft.Live.Core.MLCLS$8.$13();}switch($p0){case 2:switch(Microsoft.Live.Core.MLCLS$8.$3){case 2:case 3:case 8:return true;case 4:return Microsoft.Live.Core.Internal.WebKitClientLocalStorage.isSupported($p0);default:return false;}case 1:return(Microsoft.Live.Core.MLCLS$8.$3!==1);default:return false;}}
Microsoft.Live.Core.MLCLS$8.$13=function(){if(MSH.BrowserHelper.get_isIE()){if(window.localStorage){Microsoft.Live.Core.MLCLS$8.$3=2;}else{Microsoft.Live.Core.MLCLS$8.$3=5;}}else if(MSH.BrowserHelper.get_isFirefox()){if(Sys.Browser.version>=2){Microsoft.Live.Core.MLCLS$8.$3=3;}else{Microsoft.Live.Core.MLCLS$8.$3=6;}}else if(MSH.BrowserHelper.get_isWebKit()){if(window.localStorage){Microsoft.Live.Core.MLCLS$8.$3=4;}else{Microsoft.Live.Core.MLCLS$8.$3=7;}}else if(Sys.Browser.agent===Sys.Browser.Opera){Microsoft.Live.Core.MLCLS$8.$3=8;}else{Microsoft.Live.Core.MLCLS$8.$3=1;}}
Microsoft.Live.Core.MLCLS$7=function(cache){cache=cache||{};this.$0=new Array(Object.getKeyCount(cache));var $0=0;var $dict1=cache;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};this.$0[$0++]=$1.key;}this.reset();}
Microsoft.Live.Core.MLCLS$7.prototype={$0:null,$1:0,get_current:function(){if(this.$1<0){throw Error.invalidOperation('Enumeration has not started. Call MoveNext.');}if(this.$1>=this.$0.length){throw Error.invalidOperation('Enumeration already finished.');}return this.$0[this.$1];},moveNext:function(){return++this.$1<this.$0.length;},reset:function(){this.$1=-1;}}
Microsoft.Live.Core.MLCLS$6=function(creator){this.$0=[];this.$1=[];this.$2=creator;}
Microsoft.Live.Core.MLCLS$6.prototype={$0:null,$1:null,$2:null,add_$3:function($p0){this.$0.add($p0);},remove_$3:function($p0){this.$0.remove($p0);},add_$4:function($p0){this.$1.add($p0);},remove_$4:function($p0){this.$1.remove($p0);},$5:function($p0,$p1){if(this.$0.length>0&&this.$2===$p0){(this.$0[0]).invoke($p0,$p1);}},$6:function($p0,$p1){if(this.$1.length>0&&this.$2===$p0){(this.$1[0]).invoke($p0,$p1);}}}
Microsoft.Live.Core.LocalStorage=function(name,scope){var $0=true;if(arguments.length===1){scope=2;$0=false;}var $1=Microsoft.Live.Core.LocalStorage.$17(name);this.$4=$1[0];this.$5=$1[1];if(Microsoft.Live.Core.LocalStorage.$0==null){Microsoft.Live.Core.LocalStorage.$0={};Microsoft.Live.Core.LocalStorage.$1={};}this.$20(Microsoft.Live.Core.LocalStorage.$16(scope),!$0);if(this.$2!=null){this.$6=String.format('{0}@{1}',Microsoft.Live.Core.Internal.StorageScope.toString(this.$2.get_scope()),this.$5);if(!Object.keyExists(Microsoft.Live.Core.LocalStorage.$1,this.$6)){Microsoft.Live.Core.LocalStorage.$1[this.$6]=new Microsoft.Live.Core.MLCLS$6(this);}}else if($0){throw new Error('Storage could not be created');}this.$1B();}
Microsoft.Live.Core.LocalStorage.$12=function($p0){if($p0==null){throw Error.argumentNull('key');}if(!MSH.RegexHelper.isMatch('^[A-Z_a-z][0-9a-z_A-Z]{0,63}$',$p0,String.Empty)){throw Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException('key',$p0);}}
Microsoft.Live.Core.LocalStorage.$13=function($p0){Microsoft.Live.Core.LocalStorage.$15($p0,32);}
Microsoft.Live.Core.LocalStorage.$14=function($p0){Microsoft.Live.Core.LocalStorage.$15($p0,64);}
Microsoft.Live.Core.LocalStorage.$15=function($p0,$p1){if(ss.isNullOrUndefined($p0)){throw Error.argumentNull('name');}var $0='^[A-Z_a-z][0-9a-z_A-Z]{0,';$0+=($p1-1);$0+='}$';if(!MSH.RegexHelper.isMatch($0,$p0,String.Empty)){throw Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException('name',$p0);}}
Microsoft.Live.Core.LocalStorage.$16=function($p0){switch($p0){case 1:return 1;case 2:return 2;default:throw Microsoft.Live.Core.Internal.ExceptionHelper.createArgumentOutOfRangeException('scope',Microsoft.Live.Core.LocalStorageScope.toString($p0));}}
Microsoft.Live.Core.LocalStorage.$17=function($p0){if($p0==null){throw Error.argumentNull('name');}var $0=Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_defaultStorageNamespace();var $1=$p0;if($p0.indexOf('.')>0){var $2=$p0.lastIndexOf('.');$0=$p0.substr(0,$2);$1=$p0.substr($2+1);$0=$0.replaceAll('.','_');}if(!Microsoft.Live.Core.Internal.ContextHelper.get_inServiceFrame()){Microsoft.Live.Core.LocalStorage.$14($1);if($0!==Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_defaultStorageNamespace()){Microsoft.Live.Core.LocalStorage.$13($0);}}return[$0,$1];}
Microsoft.Live.Core.LocalStorage.prototype={$2:null,$3:null,$4:null,$5:null,$6:null,$7:0,$8:0,$9:0,get_name:function(){return this.$5;},get_scope:function(){this.$1A();switch(this.$2.get_scope()){case 1:return 1;case 2:return 2;default:break;}return 2;},get_availableStorage:function(){return(this.$2!=null)?this.$2.get_storageCapacity():-1;},get_count:function(){return(this.$3!=null)?this.$3.get_keyCount():0;},get_status:function(){return this.$9;},get_$E:function(){return this.$4+'.'+this.$5;},addOnUnloadWrite:function(key,value){this.$1A();Microsoft.Live.Core.LocalStorage.$12(key);this.$3.addOnUnloadWrite(key,value);},removeOnUnloadWrite:function(key){this.$1A();Microsoft.Live.Core.LocalStorage.$12(key);this.$3.removeOnUnloadWrite(key);},clear:function(){if(!this.$19()){return;}this.$3.clear();},refresh:function(){this.$1A();this.$3.refresh();if(this.$11!=null){this.$11.invoke(this,ss.EventArgs.Empty);}},flush:function(){this.$1A();this.$3.flush();},add_initialized:function(value){this.add_$F(value);if(this.$9!==0){value.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.$9));}},remove_initialized:function(value){this.remove_$F(value);},add_$F:function($p0){this.$10=ss.Delegate.combine(this.$10,$p0);},remove_$F:function($p0){this.$10=ss.Delegate.remove(this.$10,$p0);},$10:null,add_serialized:function(value){var $0=Microsoft.Live.Core.LocalStorage.$1[this.$6];$0.add_$3(value);},remove_serialized:function(value){var $0=Microsoft.Live.Core.LocalStorage.$1[this.$6];$0.remove_$3(value);},add_deserialized:function(value){var $0=Microsoft.Live.Core.LocalStorage.$1[this.$6];$0.add_$4(value);},remove_deserialized:function(value){var $0=Microsoft.Live.Core.LocalStorage.$1[this.$6];$0.remove_$4(value);},add_refreshed:function(value){this.$11=ss.Delegate.combine(this.$11,value);},remove_refreshed:function(value){this.$11=ss.Delegate.remove(this.$11,value);},$11:null,$18:function(){if(this.$10!=null){this.$10.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.$9));}},getEnumerator:function(){if(!this.$19()){return new Microsoft.Live.Core.Internal.MLCLS$1();}return this.$3.getEnumerator();},$19:function(){return(this.$2!=null&&this.$3!=null&&this.$9===1);},$1A:function(){if(!this.$19()){throw Microsoft.Live.Core.Internal.ExceptionHelper.createStorageNotReadyException();}},$1B:function(){if(this.$2==null){this.$1E(false);}else if(this.$2.get_isReady()){this.$1F();this.$1E(true);}else{this.$1C();}},$1C:function(){this.$7=window.setInterval(ss.Delegate.create(this,this.$1D),100);},$1D:function(){this.$8++;var $0=this.$2.get_isReady();if($0){this.$1F();}if($0||this.$8>(5000/100)){window.clearInterval(this.$7);this.$1E($0);}},$1E:function($p0){this.$9=($p0)?1:2;this.$18();},$1F:function(){this.$3=Microsoft.Live.Core.LocalStorage.$0[this.$6];if(ss.isNullOrUndefined(this.$3)){this.$3=this.$2.createGroup(this.get_$E());Microsoft.Live.Core.LocalStorage.$0[this.$6]=this.$3;}},$20:function($p0,$p1){this.$2=Microsoft.Live.Core.MLCLS$8.$6($p0);if(this.$2==null&&$p1){$p0=($p0===2)?1:2;this.$2=Microsoft.Live.Core.MLCLS$8.$6($p0);}if(this.$2!=null){this.$2.add_serialized(ss.Delegate.create(this,this.$21));this.$2.add_deserialized(ss.Delegate.create(this,this.$22));}},$21:function($p0,$p1){if($p1.get_name()===this.get_$E()&&$p1.get_scope()===this.$2.get_scope()){var $0=Microsoft.Live.Core.LocalStorage.$1[this.$6];$0.$5(this,$p1);}},$22:function($p0,$p1){if($p1.get_name()===this.get_$E()&&$p1.get_scope()===this.$2.get_scope()){var $0=Microsoft.Live.Core.LocalStorage.$1[this.$6];$0.$6(this,$p1);}},get_item:function(key){this.$1A();Microsoft.Live.Core.LocalStorage.$12(key);return this.$3.get_item(key);},set_item:function(key,value){this.$1A();Microsoft.Live.Core.LocalStorage.$12(key);this.$3.set_item(key,value);return value;}}
Microsoft.Live.Core.LocalStorageInitializedEventArgs=function(status){Microsoft.Live.Core.LocalStorageInitializedEventArgs.initializeBase(this);this.$1_0=status;}
Microsoft.Live.Core.LocalStorageInitializedEventArgs.prototype={$1_0:0,get_status:function(){return this.$1_0;}}
Microsoft.Live.Core.LocalStorageProxy=function(name,channelUrl,scope){var $0=Microsoft.Live.Core.LocalStorage.$17(name);this.storageNamespace=$0[0];this.$0=$0[1];this.$1=new MC.LogContext(name);Microsoft.Live.Core.LocalStorageProxy.$21();if(ss.isNullOrUndefined(scope)){this.scope=3;}else{this.scope=Microsoft.Live.Core.LocalStorage.$16(scope);}if(ss.isUndefined(channelUrl)){channelUrl=null;}this.id=(Microsoft.Live.Core.LocalStorageProxy.$6++).toString();this.channelUrl=channelUrl;this.$4={};if(!this.get_isLocalStorageCreator()){this.get_$9().$E(this);this.$11();}}
Microsoft.Live.Core.LocalStorageProxy.setChannel=function(isListener,channelName,channel){Microsoft.Live.Core.Internal.MLCLS$2.$9(isListener,channelName,channel);}
Microsoft.Live.Core.LocalStorageProxy.$21=function(){if(!MSH.DomainHelper.isDomainInDomainsList(document.domain,Microsoft.Live.Core.LocalStorageProxy.$7)){throw new Error('Access denied for the domain.');}}
Microsoft.Live.Core.LocalStorageProxy.prototype={$0:null,channelUrl:null,id:null,$1:null,status:0,scope:0,$2:0,$3:0,$4:null,storageNamespace:null,$5:null,get_name:function(){return this.$0;},get_scope:function(){this.$A();switch(this.scope){case 1:return 1;case 2:return 2;default:break;}return 2;},get_count:function(){this.$A();return Object.getKeyCount(this.$4);},get_status:function(){return this.status;},get_availableStorage:function(){this.$A();return this.$2;},get_$8:function(){return this.storageNamespace+'.'+this.$0;},get_$9:function(){if(this.$5==null){this.$5=Microsoft.Live.Core.Internal.MLCLS$2.$8(this.get_isLocalStorageCreator(),this.get_channelName(),this.channelUrl);}return this.$5;},get_id:function(){return this.id;},addOnUnloadWrite:function(key,value){Microsoft.Live.Core.LocalStorage.$12(key);this.$A();this.$18(key,value);},removeOnUnloadWrite:function(key){Microsoft.Live.Core.LocalStorage.$12(key);this.$A();this.$19(key);},$A:function(){if(this.status!==1){throw Microsoft.Live.Core.Internal.ExceptionHelper.createStorageNotReadyException();}},clear:function(){this.$A();var $0=this.get_$9().$11(this.get_$8(),this.scope);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.get_current();Object.clearKeys($1.$4);}this.$1A();},refresh:function(){this.$A();this.$1B();},flush:function(){this.$A();this.$1C();},add_initialized:function(value){this.add_$B(value);if(this.status!==0){value.invoke(this,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status));}},remove_initialized:function(value){this.remove_$B(value);},add_$B:function($p0){this.$C=ss.Delegate.combine(this.$C,$p0);},remove_$B:function($p0){this.$C=ss.Delegate.remove(this.$C,$p0);},$C:null,add_serialized:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_serialized:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,add_deserialized:function(value){this.$E=ss.Delegate.combine(this.$E,value);},remove_deserialized:function(value){this.$E=ss.Delegate.remove(this.$E,value);},$E:null,add_refreshed:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_refreshed:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,getEnumerator:function(){return new Microsoft.Live.Core.MLCLS$7(this.$4);},get_isLocalStorageCreator:function(){return false;},get_channelName:function(){return Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_proxyChannelName();},$10:function($p0){if(this.$C!=null){this.$C.invoke(this,$p0);}},$11:function(){if(this.status!==0){return;}if(!this.get_$9().get_$B()){this.status=2;this.$10(new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status));return;}if(!this.get_isLocalStorageCreator()){this.$12();this.get_$9().$D('LocalStorageProxyInitialize',[this.$3,this.get_$8(),this.scope,this.id]);}},$12:function(){return this.$3++;},$13:function($p0,$p1,$p2,$p3){switch($p3.get_command()){case'LocalStorageProxyInitializationCompleted':this.$14($p0,$p3);return false;case'LocalStorageProxyRefreshed':this.$15($p3);break;}return true;},$14:function($p0,$p1){if(this.status!==0){return;}var $0=$p1.get_parameters()[4];this.status=$0.$2;this.scope=$0.$3;this.$2=$0.$1;if(this.status===1){this.$16($0.$0);this.get_$9().$F(this.get_$8(),this.scope,this);}MSH.Scheduler.defer(ss.Delegate.create(this,function(){this.$10(new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status));}));},$15:function($p0){var $0=$p0.get_parameters()[3];this.$16($0);if(this.$F!=null){this.$F.invoke(this,ss.EventArgs.Empty);}},$16:function($p0){Object.clearKeys(this.$4);for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0].$0;var $2=$p0[$0].$1;this.$4[$1]=this.$1F($1,$2);}},$17:function($p0,$p1){var $0=this.$12();var $1=Microsoft.Live.Core.Internal.$create_MLCLS$3(Microsoft.Live.Core.Internal.$create_MLCLS$4($p0,this.$1D($p0,$p1)));this.get_$9().$D('LocalStorageProxyWrite',[$0,this.get_$8(),this.scope,$1]);},$18:function($p0,$p1){var $0=this.$12();var $1=Microsoft.Live.Core.Internal.$create_MLCLS$3(Microsoft.Live.Core.Internal.$create_MLCLS$4($p0,this.$1D($p0,$p1)));this.get_$9().$D('LocalStorageProxyAddOnUnloadWrite',[$0,this.get_$8(),this.scope,$1]);},$19:function($p0){var $0=this.$12();this.get_$9().$D('LocalStorageProxyRemoveOnUnloadWrite',[$0,this.get_$8(),this.scope,$p0]);},$1A:function(){var $0=this.$12();this.get_$9().$D('LocalStorageProxyClear',[$0,this.get_$8(),this.scope]);},$1B:function(){var $0=this.$12();this.get_$9().$D('LocalStorageProxyRefresh',[$0,this.get_$8(),this.scope]);},$1C:function(){var $0=this.$12();this.get_$9().$D('LocalStorageProxyFlush',[$0,this.get_$8(),this.scope]);},$1D:function($p0,$p1){var $0=MLC.JSON.serialize($p1);var $1=this.$1E($p0,$p1,$0);if($1!=null){$0=$1.get_serialization();}return $0;},$1E:function($p0,$p1,$p2){if(this.$D==null){return null;}var $0=new Microsoft.Live.Core.LocalStorageSerializedEventArgs(this.get_$8(),this.scope,$p0,$p1);$0.set_serialization($p2);this.$D.invoke(this,$0);return $0;},$1F:function($p0,$p1){var $0=this.$20($p0,$p1);if($0==null){return MLC.JSON.deserialize($p1);}return($0.get_value()!=null)?$0.get_value():MLC.JSON.deserialize($0.get_serialization());},$20:function($p0,$p1){if(this.$E==null){return null;}var $0=new Microsoft.Live.Core.LocalStorageDeserializedEventArgs(this.get_$8(),this.scope,$p0,$p1);this.$E.invoke(this,$0);return $0;},get_item:function(key){this.$A();Microsoft.Live.Core.LocalStorage.$12(key);var $0=this.$4[key];return($0==null)?null:$0;},set_item:function(key,value){Microsoft.Live.Core.LocalStorage.$12(key);this.$A();var $0=this.get_$9().$11(this.get_$8(),this.scope);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.get_current();if(value==null){if(Object.keyExists($1.$4,key)){delete $1.$4[key];}}else{$1.$4[key]=value;}}this.$17(key,value);return value;}}
Type.registerNamespace('Microsoft.Live.Core.Internal');Microsoft.Live.Core.Internal.$create_MLCLS$5=function(status,availableStorage,scope){var $o={};$o.$2=status;$o.$1=availableStorage;$o.$3=scope;return $o;}
Microsoft.Live.Core.Internal.$create_MLCLS$4=function(key,value){var $o={};$o.$0=key;$o.$1=value;return $o;}
Microsoft.Live.Core.Internal.$create_MLCLS$3=function(info){var $o={};$o.$0=info;return $o;}
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer=function(){}
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.initialize=function(id,domain,channelNames){Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$3(domain);Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$0=id;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$1=domain;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$2=channelNames;var $0=new Microsoft.Live.Core.LocalStorage(Microsoft.Live.Core.Internal.ClientLocalStorage.get_defaultStorageNamespace()+'.'+'StorageInitializer');$0.add_initialized(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$4);}
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$3=function($p0){if(String.isNullOrEmpty($p0)){throw new Error('Invalid domain.');}}
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$4=function($p0,$p1){switch($p1.get_status()){case 1:Microsoft.Live.Core.Loader.onDocumentReady(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$5);break;case 2:break;}}
Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$5=function(){var $0=Microsoft.Live.Core.Loader.get_settings().messenger.getResourceUrl('Channel.html');var $enum1=ss.IEnumerator.getEnumerator(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$2);while($enum1.moveNext()){var $1=$enum1.get_current();var $2=Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$1;if($1==='MessengerStorageChannel'){$2=window.location.hostname.toLowerCase();}var $3=MLC.Channel.fromChild(Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$0,$2,$0,$1);var $4=true;Microsoft.Live.Core.LocalStorageProxy.setChannel($4,$1,$3);}}
Microsoft.Live.Core.Internal.LocalStorageConfiguration=function(){}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_defaultStorageNamespace=function(){return Microsoft.Live.Core.Internal.ClientLocalStorage.get_defaultStorageNamespace();}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_storageNamespaces=function(){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1=false;return Microsoft.Live.Core.Internal.ClientLocalStorage.get_storageNamespaces();}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.set_storageNamespaces=function(value){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$3();Microsoft.Live.Core.Internal.ClientLocalStorage.set_storageNamespaces(value);return value;}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_proxyChannelName=function(){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1=false;return Microsoft.Live.Core.Internal.LocalStorageConfiguration.$0;}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.set_proxyChannelName=function(value){Microsoft.Live.Core.Internal.LocalStorageConfiguration.$3();Microsoft.Live.Core.Internal.LocalStorageConfiguration.$0=value;return value;}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_isHtml5LocalStorageSupported=function(){return window.self.localStorage!=null||window.self.globalStorage!=null||window.self.sessionStorage!=null;}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_$2=function(){return Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1;}
Microsoft.Live.Core.Internal.LocalStorageConfiguration.$3=function(){if(!Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_$2()){throw Error.invalidOperation('Configuration data can not be changed or will not be used.');}}
Microsoft.Live.Core.Internal.MLCLS$2=function(isListenerChannel,channelName,channelUrl){this.$1=isListenerChannel;this.$2=channelName;this.$5={};this.$6={};this.$7=channelUrl;this.$3=new MC.LogContext(this.$2);}
Microsoft.Live.Core.Internal.MLCLS$2.$8=function($p0,$p1,$p2){if(!Object.keyExists(Microsoft.Live.Core.Internal.MLCLS$2.$0,$p1)){Microsoft.Live.Core.Internal.MLCLS$2.$0[$p1]=new Microsoft.Live.Core.Internal.MLCLS$2($p0,$p1,$p2);}return Microsoft.Live.Core.Internal.MLCLS$2.$0[$p1];}
Microsoft.Live.Core.Internal.MLCLS$2.$9=function($p0,$p1,$p2){if(String.isNullOrEmpty($p1)){throw Error.argumentNull('channelName');}if(ss.isNullOrUndefined($p2)){throw Error.argumentNull('channel');}var $0=Microsoft.Live.Core.Internal.MLCLS$2.$8($p0,$p1,null);$0.set_$C($p2);}
Microsoft.Live.Core.Internal.MLCLS$2.$A=function($p0){if(MSH.ChannelHelper.canCreateChannel($p0)){var $0=MSH.ChannelHelper.getPreloadedIframe('storage_iframe');return MSH.ChannelHelper.createParentChannel('LocalStorage.html',$0,$p0,Microsoft.Live.Core.Internal.LocalStorageConfiguration.get_proxyChannelName());}return null;}
Microsoft.Live.Core.Internal.MLCLS$2.prototype={$1:false,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,get_$B:function(){return this.get_$C()!=null;},get_$C:function(){if(this.$4==null&&!this.$1){var $0=Microsoft.Live.Core.Internal.MLCLS$2.$A(this.$7);if($0!=null){this.set_$C($0);MSH.LogCollector.get_instance().registerLocalStorageChannel($0);MSH.PerfCollector.get_instance().registerRemoteServiceChannel($0);}}return this.$4;},set_$C:function($p0){this.$4=$p0;this.$4.add_messageReceived(ss.Delegate.create(this,this.$12));this.$10();return $p0;},$D:function($p0,$p1){this.get_$C().sendMessage($p0,$p1);},$E:function($p0){this.$6[$p0.get_id()]=$p0;},$F:function($p0,$p1,$p2){var $0=this.$14($p0,$p1);var $1=this.$5[$0];if(ss.isNullOrUndefined($1)){$1=[];this.$5[$0]=$1;}$1.add($p2);},$10:function(){var $dict1=this.$6;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $enum3=ss.IEnumerator.getEnumerator($1);while($enum3.moveNext()){var $2=$enum3.get_current();$2.$11();}}},$11:function($p0,$p1){var $0=null;if($p1===2||$p1===1){$0=this.$5[this.$14($p0,$p1)];}if($0==null||$0.length===0){$0=[];if(this.$1){switch($p1){case 1:$0.add(new Microsoft.Live.Core.Internal.LocalStorageProxyListener($p0,1,this.$2));break;case 2:$0.add(new Microsoft.Live.Core.Internal.LocalStorageProxyListener($p0,2,this.$2));break;case 3:var $1=null;$0.add(new Microsoft.Live.Core.Internal.LocalStorageProxyListener($p0,$1,this.$2));break;default:break;}}}return $0;},$12:function($p0,$p1){MSH.PerfCollector.get_instance().increaseEventCounter('LocalStorageProxyChannel-MessageReceivedCount',1);var $0=Date.get_now();try{switch($p1.get_command()){case'CollectLogs':var $1=MSH.LogCollector.get_instance().getLocalLogEntries();this.get_$C().sendMessage('CollectLogsResponse',[$1]);return;case'CollectLogsResponse':return;case'PerfCollectorOutputToConsole':MSH.PerfCollector.get_instance().reportToConsole();return;case'PerfCollectorEnable':MSH.PerfCollector.get_instance().set_enabled(true);return;case'PerfCollectorDisable':MSH.PerfCollector.get_instance().set_enabled(false);return;}var $2=$p1.get_parameters()[0];var $3=$p1.get_parameters()[1].toString();var $4=$p1.get_parameters()[2];if($p1.get_command()==='LocalStorageProxyInitializationCompleted'){var $6=$p1.get_parameters()[3].toString();var $7=this.$13($6);$7.$13($2,$3,$4,$p1);return;}var $5=this.$11($3,$4);var $enum1=ss.IEnumerator.getEnumerator($5);while($enum1.moveNext()){var $8=$enum1.get_current();var $9=$8.$13($2,$3,$4,$p1);if(!$9){return;}}}finally{var $A=MSH.DateTimeHelper.subtract(Date.get_now(),$0);MSH.PerfCollector.get_instance().addPerfCounterValue('LocalStorageProxyChannel-MessageHandlingTime',$A);}},$13:function($p0){return this.$6[$p0];},$14:function($p0,$p1){return String.format('{0}@{1}',Microsoft.Live.Core.Internal.StorageScope.toString($p1),$p0);}}
Microsoft.Live.Core.Internal.MLCLS$1=function(){}
Microsoft.Live.Core.Internal.MLCLS$1.prototype={get_current:function(){return null;},moveNext:function(){return false;},reset:function(){}}
Microsoft.Live.Core.Internal.LocalStorageProxyListener=function(name,scope,channelName){Microsoft.Live.Core.Internal.LocalStorageProxyListener.initializeBase(this,[name,'channel.html',scope]);this.$23=new MC.LogContext(name);this.storageNamespace=this.storageNamespace;this.$22=channelName;this.get_$9().$E(this);this.$11();}
Microsoft.Live.Core.Internal.LocalStorageProxyListener.prototype={$22:null,$23:null,$24:null,$25:0,$26:null,get_channelName:function(){return this.$22;},get_isLocalStorageCreator:function(){return true;},$13:function($p0,$p1,$p2,$p3){switch($p3.get_command()){case'LocalStorageProxyInitialize':var $0=$p3.get_parameters()[3].toString();this.$27($p0,$p1,$0,$p2);return false;case'LocalStorageProxyWrite':this.$29($p3);break;case'LocalStorageProxyAddOnUnloadWrite':this.$2A($p3);break;case'LocalStorageProxyRemoveOnUnloadWrite':this.$2B($p3);break;case'LocalStorageProxyClear':this.$2C();break;case'LocalStorageProxyRefresh':this.$2D();break;case'LocalStorageProxyFlush':this.$2E();break;}return true;},$27:function($p0,$p1,$p2,$p3){if(this.status!==0){this.$30(this,$p2,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(this.status));}if(this.$24!=null){return;}this.$25=$p0;this.$26=$p2;if($p3===3){this.$24=new Microsoft.Live.Core.LocalStorage($p1);this.scope=Microsoft.Live.Core.LocalStorage.$16(this.$24.get_scope());}else{this.scope=$p3;try{switch(this.scope){case 1:this.$24=new Microsoft.Live.Core.LocalStorage($p1,1);break;case 2:this.$24=new Microsoft.Live.Core.LocalStorage($p1,2);break;}}catch($0){this.status=2;this.$30(this,$p2,new Microsoft.Live.Core.LocalStorageInitializedEventArgs(2));return;}}this.$24.add_initialized(ss.Delegate.create(this,this.$28));this.$24.add_refreshed(ss.Delegate.create(this,this.$2F));},$28:function($p0,$p1){this.status=$p1.get_status();if(this.status===1){this.get_$9().$F(this.get_$8(),this.scope,this);}this.$30($p0,this.$26,$p1);},$29:function($p0){var $0=$p0.get_parameters()[3];var $1=$0.$0.$0;var $2=$0.$0.$1;try{this.$24.set_item($1,$2);}catch($3){}},$2A:function($p0){var $0=$p0.get_parameters()[3];var $1=$0.$0.$0;var $2=$0.$0.$1;try{this.$24.addOnUnloadWrite($1,$2);}catch($3){}},$2B:function($p0){var $0=$p0.get_parameters()[3].toString();try{this.$24.removeOnUnloadWrite($0);}catch($1){}},$2C:function(){try{this.$24.clear();}catch($0){}},$2D:function(){try{this.$24.refresh();}catch($0){}},$2E:function(){try{this.$24.flush();}catch($0){}},$2F:function($p0,$p1){var $0=this.$31();this.get_$9().$D('LocalStorageProxyRefreshed',[this.$25,this.get_$8(),this.scope,$0]);},$30:function($p0,$p1,$p2){var $0=this.get_$8();var $1;if(this.status!==2){var $2=Type.safeCast($p0,Microsoft.Live.Core.LocalStorage);if($2==null){$2=this.$24;}$1=Microsoft.Live.Core.Internal.$create_MLCLS$5($p2.get_status(),$2.get_availableStorage(),this.scope);$1.$0=this.$31();}else{$1=Microsoft.Live.Core.Internal.$create_MLCLS$5(2,0,this.scope);}this.get_$9().$D('LocalStorageProxyInitializationCompleted',[this.$25,$0,this.scope,$p1,$1]);},$31:function(){var $0=new Array(this.$24.get_count());var $1=0;var $enum1=ss.IEnumerator.getEnumerator(this.$24);while($enum1.moveNext()){var $2=$enum1.get_current();var $3=Microsoft.Live.Core.Internal.$create_MLCLS$4($2,this.$24.get_item($2));$0[$1++]=$3;}return $0;}}
Microsoft.Live.Core.MLCLS$8.registerClass('Microsoft.Live.Core.MLCLS$8');Microsoft.Live.Core.MLCLS$7.registerClass('Microsoft.Live.Core.MLCLS$7',null,ss.IEnumerator);Microsoft.Live.Core.MLCLS$6.registerClass('Microsoft.Live.Core.MLCLS$6');Microsoft.Live.Core.LocalStorage.registerClass('Microsoft.Live.Core.LocalStorage',null,Microsoft.Live.Core.ILocalStorage,ss.IEnumerable);Microsoft.Live.Core.LocalStorageInitializedEventArgs.registerClass('Microsoft.Live.Core.LocalStorageInitializedEventArgs',ss.EventArgs);Microsoft.Live.Core.LocalStorageProxy.registerClass('Microsoft.Live.Core.LocalStorageProxy',null,Microsoft.Live.Core.ILocalStorage,ss.IEnumerable);Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.registerClass('Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer');Microsoft.Live.Core.Internal.LocalStorageConfiguration.registerClass('Microsoft.Live.Core.Internal.LocalStorageConfiguration');Microsoft.Live.Core.Internal.MLCLS$2.registerClass('Microsoft.Live.Core.Internal.MLCLS$2');Microsoft.Live.Core.Internal.MLCLS$1.registerClass('Microsoft.Live.Core.Internal.MLCLS$1',null,ss.IEnumerator);Microsoft.Live.Core.Internal.LocalStorageProxyListener.registerClass('Microsoft.Live.Core.Internal.LocalStorageProxyListener',Microsoft.Live.Core.LocalStorageProxy);Microsoft.Live.Core.MLCLS$8.$0=null;Microsoft.Live.Core.MLCLS$8.$1=null;Microsoft.Live.Core.MLCLS$8.$2=null;Microsoft.Live.Core.MLCLS$8.$3=0;Microsoft.Live.Core.MLCLS$8.$4='__messengerPreferredLocalStorageType';Microsoft.Live.Core.MLCLS$8.$5='__messengerOnlyPreferredLocalStorageType';Microsoft.Live.Core.LocalStorage.$0=null;Microsoft.Live.Core.LocalStorage.$1=null;Microsoft.Live.Core.LocalStorageProxy.$6=0;Microsoft.Live.Core.LocalStorageProxy.$7=['live.com','live-int.com','microsoft.com'];Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$0=null;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$1=null;Microsoft.Live.Core.Internal.LocalStorageProxyListenerInitializer.$2=null;Microsoft.Live.Core.Internal.LocalStorageConfiguration.$0='DefaultLocalStorageChannel';Microsoft.Live.Core.Internal.LocalStorageConfiguration.$1=true;Microsoft.Live.Core.Internal.MLCLS$2.$0={};

 });
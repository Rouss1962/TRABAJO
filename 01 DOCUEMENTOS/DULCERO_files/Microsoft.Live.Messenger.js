// Copyright (c) Microsoft Corporation. All rights reserved.
Microsoft.Live.Core.Loader.onResourceAvailable('messenger_core',function(){
Type.registerNamespace('Microsoft.Live.Messenger.Services');Microsoft.Live.Messenger.Services.ApplicationServiceProxy=function(channel,events){this.$2=new Microsoft.Live.Messenger.M$1B();this.$0=channel;this.$1=events;this.$0.add_messageReceived(ss.Delegate.create(this,this.$3));}
Microsoft.Live.Messenger.Services.ApplicationServiceProxy.prototype={$0:null,$1:null,authenticate:function($p0,$p1){this.$0.sendMessage('Authenticate',[$p0,$p1]);},getApplicationContactsInfo:function($p0,$p1){this.$0.sendMessage('GetApplicationContactsInfo',[$p0,$p1]);},$3:function($p0,$p1){var $0=$p1.get_command();var $1=$p1.get_parameters();switch($0){case 'OnAuthenticationCompleted':this.$1.onAuthenticationCompleted($1[0],$1[1]);break;case 'OnGetApplicationContactsInfoCompleted':this.$1.onGetApplicationContactsInfoCompleted($1[0],$1[1]);break;}}}
Microsoft.Live.Messenger.Services.M$1F=function(){this.$0=[];}
Microsoft.Live.Messenger.Services.M$1F.prototype={$0:null,$1:function($p0){if(!this.$2($p0)){this.$0.add($p0);}},$2:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $0=$enum1.get_current();if($0===$p0){return true;}}return false;}}
Microsoft.Live.Messenger.Services.UserServiceProxy=function(channel,events){this.$2=new Microsoft.Live.Messenger.M$1B();this.$3=ss.Delegate.create(this,this.$5);this.$0=channel;this.$0.add_messageReceived(this.$3);this.$1=events;}
Microsoft.Live.Messenger.Services.UserServiceProxy.prototype={$0:null,$1:null,$3:null,$4:false,dispose:function(){this.$0.remove_messageReceived(this.$3);},$5:function($p0,$p1){MSH.PerfCollector.get_instance().increaseEventCounter('UserServiceProxy-MessageReceivedCount',1);var $0=Date.get_now();var $1=$p1.get_parameters();switch($p1.get_command()){case 'OnAlertNotificationReceived':this.$1.onAlertNotificationReceived($1[0]);break;case 'OnUpdateNetworkCompleted':this.$1.onUpdateNetworkCompleted($1[0],$1[1],$1[2]);break;case 'OnNetworksChanged':this.$1.onNetworksChanged($1[0]);break;case 'OnNetworkStatusChanged':this.$1.onNetworkStatusChanged($1[0],$1[1]);break;case 'OnGetConsentStatusCompleted':this.$1.onGetConsentStatusCompleted($1[0],$1[1]);break;case 'OnGetApplicationContactsInfoCompleted':this.$1.onGetApplicationContactsInfoCompleted($1[0],$1[1]);break;case 'OnInitializeSignInStatusCompleted':this.$6($1[0],$1[1]);this.$1.onInitializeSignInStatusCompleted($1[0],$1[1]);break;case 'OnTicketExpired':this.$1.onTicketExpired();break;case 'OnAppContactsRoleListsUpdated':this.$1.onAppContactsRoleListsUpdated($1[0],this.$2.$3($1[1]));break;case 'OnContactUpdated':this.$1.onContactUpdated($1[0],$1[1],this.$2.$3($1[2]));break;case 'OnIMAvailabilityUpdated':this.$1.onIMAvailabilityUpdated($1[0],this.$2.$3($1[1]));break;case 'OnAddressAdded':this.$1.onAddressAdded($1[0],$1[1],this.$2.$3($1[2]));break;case 'OnConfigurationChanged':this.$1.onConfigurationChanged($1[0]);break;case 'OnContactAddedToGroup':this.$1.onContactAddedToGroup($1[0],$1[1],$1[2],this.$2.$3($1[3]));break;case 'OnContactRemovedFromGroup':this.$1.onContactRemovedFromGroup($1[0],$1[1],$1[2],this.$2.$3($1[3]));break;case 'OnConversationAddressJoined':this.$1.onConversationAddressJoined($1[0],$1[1]);break;case 'OnConversationAddressLeft':this.$1.onConversationAddressLeft($1[0],$1[1]);break;case 'OnConversationCreated':this.$1.onConversationCreated($1[0],$1[1]);break;case 'OnConversationInviteAddressCompleted':this.$1.onConversationInviteAddressCompleted($1[0],$1[1],$1[2],this.$2.$3($1[3]));break;case 'OnConversationMessageReceived':this.$1.onConversationMessageReceived($1[0],$1[1]);break;case 'OnConversationHasUnreadMessagesUpdated':this.$1.onConversationHasUnreadMessagesUpdated($1[0],$1[1]);break;case 'OnConversationClosed':this.$1.onConversationClosed($1[0]);break;case 'OnConversationSendMessageFailed':this.$1.onConversationSendMessageFailed($1[0],$1[1],$1[2],this.$2.$3($1[3]));break;case 'OnConversationUpdatedId':this.$1.onConversationUpdatedId($1[0],$1[1]);break;case 'OnGroupAdded':this.$1.onGroupAdded($1[0],$1[1],this.$2.$3($1[2]));break;case 'OnGroupRemoved':this.$1.onGroupRemoved($1[0],$1[1],this.$2.$3($1[2]));break;case 'OnGroupRenamed':this.$1.onGroupRenamed($1[0],$1[1],this.$2.$3($1[2]));break;case 'OnInstancesChanged':this.$1.onInstancesChanged($1[0]);break;case 'OnMailNotification':this.$1.onMailNotification($1[0]);break;case 'OnPendingContacts':this.$1.onPendingContacts($1[0]);break;case 'OnServiceDataChanged':this.$1.onServiceDataChanged($1[0],$1[1]);break;case 'OnServiceDataDeleted':this.$1.onServiceDataDeleted($1[0],$1[1]);break;case 'OnSettingsChanged':this.$1.onSettingsChanged($1[0]);break;case 'OnSignedIn':this.$1.onSignedIn($1[0],$1[1],$1[2],$1[3],$1[4],$1[5],this.$2.$3($1[6]));break;case 'OnPersistedConversationsLoaded':this.$1.onPersistedConversationsLoaded($1[0],$1[1],$1[2]);break;case 'OnNotifyWebSignInPendingEventsCompleted':this.$1.onNotifyWebSignInPendingEventsCompleted();break;case 'OnSignedOut':this.$1.onSignedOut($1[0],$1[1],this.$2.$3($1[2]));break;case 'OnSignedOutRemotely':this.$1.onSignedOutRemotely($1[0],$1[1]);break;case 'OnUpdateApplicationContactsCompleted':this.$1.onUpdateApplicationContactsCompleted($1[0],$1[1],$1[2]);break;case 'OnUserServiceDataUpdated':this.$1.onUserServiceDataUpdated($1[0],this.$2.$3($1[1]));break;case 'OnUserSettingsUpdated':this.$1.onUserSettingsUpdated($1[0],this.$2.$3($1[1]));break;case 'OnUserUXSettingsUpdated':this.$1.onUserUXSettingsUpdated($1[0]);break;case 'OnUserServicesUpdated':this.$1.onUserServicesUpdated($1[0]);break;case 'OnServicesChanged':this.$1.onServicesChanged($1[0]);break;}var $2=MSH.DateTimeHelper.subtract(Date.get_now(),$0);MSH.PerfCollector.get_instance().addPerfCounterValue('UserServiceProxy-MessageHandlingTime',$2);},$6:function($p0,$p1){this.$4=$p0===0&&$p1.signInStatus!=null&&$p1.signInStatus.isTrustedSignIn;},getConsentStatus:function($p0){this.$0.sendMessage('GetConsentStatus',[$p0]);},initializeSignInStatus:function($p0,$p1,$p2){this.$0.sendMessage('InitializeSignInStatus',[$p0,$p1,$p2]);},updateApplicationContacts:function($p0,$p1){this.$0.sendMessage('UpdateApplicationContacts',[$p0,$p1]);},updateIMAvailability:function($p0,$p1,$p2,$p3){this.$0.sendMessage('UpdateIMAvailability',[$p0,$p1,$p2,this.$2.$2($p3)]);},getApplicationContactsInfo:function($p0,$p1){this.$0.sendMessage('GetApplicationContactsInfo',[$p0,$p1]);},addAddress:function($p0,$p1,$p2){this.$0.sendMessage('AddAddress',[$p0,$p1,this.$2.$2($p2)]);},addAddressToContact:function($p0,$p1,$p2){this.$0.sendMessage('AddAddressToContact',[$p0,$p1,this.$2.$2($p2)]);},addContactToGroup:function($p0,$p1,$p2){this.$0.sendMessage('AddContactToGroup',[$p0,$p1,this.$2.$2($p2)]);},addGroup:function($p0,$p1){this.$0.sendMessage('AddGroup',[$p0,this.$2.$2($p1)]);},updateNetwork:function($p0,$p1){this.$0.sendMessage('UpdateNetwork',[$p0,$p1]);},removeAddressFromContact:function($p0,$p1,$p2){this.$0.sendMessage('RemoveAddressFromContact',[$p0,$p1,this.$2.$2($p2)]);},removeContactFromGroup:function($p0,$p1,$p2){this.$0.sendMessage('RemoveContactFromGroup',[$p0,$p1,this.$2.$2($p2)]);},removeGroup:function($p0,$p1){this.$0.sendMessage('RemoveGroup',[$p0,this.$2.$2($p1)]);},renameGroup:function($p0,$p1){this.$0.sendMessage('RenameGroup',[$p0,this.$2.$2($p1)]);},signIn:function($p0,$p1,$p2){this.$0.sendMessage('SignIn',[$p0,$p1,this.$2.$2($p2)]);},reconnect:function($p0,$p1,$p2){this.$0.sendMessage('Reconnect',[$p0,$p1,this.$2.$2($p2)]);},signOut:function($p0,$p1,$p2,$p3){this.$0.sendMessage('SignOut',[$p0,$p1,$p2,this.$2.$2($p3)]);},updateAppContactsRoleLists:function($p0,$p1,$p2){this.$0.sendMessage('UpdateAppContactsRoleLists',[$p0,$p1,this.$2.$2($p2)]);},updateContact:function($p0,$p1,$p2,$p3){this.$0.sendMessage('UpdateContact',[$p0,$p1,$p2,this.$2.$2($p3)]);},updateContactNickname:function($p0,$p1){this.$0.sendMessage('UpdateContactNickname',[$p0,this.$2.$2($p1)]);},updateServices:function($p0,$p1){this.$0.sendMessage('UpdateServices',[$p0,$p1]);},updateSettings:function($p0,$p1){this.$0.sendMessage('UpdateSettings',[$p0,this.$2.$2($p1)]);},updateUXSettings:function($p0){this.$0.sendMessage('UpdateUXSettings',[$p0]);},updateServiceData:function($p0,$p1){this.$0.sendMessage('UpdateServiceData',[$p0,this.$2.$2($p1)]);},sendDatagram:function($p0,$p1,$p2){},conversationCreate:function($p0,$p1){this.$0.sendMessage('ConversationCreate',[$p0,$p1]);},conversationSendMessage:function($p0,$p1,$p2){this.$0.sendMessage('ConversationSendMessage',[$p0,$p1,this.$2.$2($p2)]);},conversationInviteAddress:function($p0,$p1,$p2){this.$0.sendMessage('ConversationInviteAddress',[$p0,$p1,this.$2.$2($p2)]);},conversationClose:function($p0){this.$0.sendMessage('ConversationClose',[$p0]);},conversationExpose:function($p0,$p1){},conversationUpdateId:function($p0,$p1){},conversationUpdateHasUnreadMessages:function($p0,$p1){this.$0.sendMessage('ConversationUpdateHasUnreadMessages',[$p0,$p1]);},resumeSignedInSession:function($p0,$p1,$p2,$p3){},onSignInPopulateCompleted:function(){this.$0.sendMessage('OnSignInPopulateCompleted',[]);},updateTicket:function($p0){},onTicketUpdated:function(){},onPersistedConversationsLoaded:function($p0){}}
Microsoft.Live.Messenger.Services.M$20=function(){}
Microsoft.Live.Messenger.Services.M$20.get_$1=function(){return Microsoft.Live.Messenger.Services.M$20.$0;}
Microsoft.Live.Messenger.Services.M$20.set_$1=function($p0){Microsoft.Live.Messenger.Services.M$20.$0=$p0;return $p0;}
Microsoft.Live.Messenger.Services.M$20.$2=function($p0,$p1){if(Microsoft.Live.Messenger.Services.M$20.$0!=null){return Microsoft.Live.Messenger.Services.M$20.$0;}else{return new Microsoft.Live.Messenger.Services.UserServiceProxy($p0.get_$F().get_$4(),$p1);}}
Type.registerNamespace('Microsoft.Live.Messenger');Microsoft.Live.Messenger.AuthenticationStatus=function(){};Microsoft.Live.Messenger.AuthenticationStatus.prototype = {none:0,alreadySignedIn:1,unsupportedBrowser:2,multipleEndpointsNotSupported:4,blockedApplication:8,blockedUser:16,authenticationFailure:32,serviceUnavailable:64}
Microsoft.Live.Messenger.AuthenticationStatus.registerEnum('Microsoft.Live.Messenger.AuthenticationStatus',true);Microsoft.Live.Messenger.INotifyCollectionChanged=function(){};Microsoft.Live.Messenger.INotifyCollectionChanged.registerInterface('Microsoft.Live.Messenger.INotifyCollectionChanged');Microsoft.Live.Messenger.INotifyPropertyChanged=function(){};Microsoft.Live.Messenger.INotifyPropertyChanged.registerInterface('Microsoft.Live.Messenger.INotifyPropertyChanged');Microsoft.Live.Messenger.NotifyCollectionChangedAction=function(){};Microsoft.Live.Messenger.NotifyCollectionChangedAction.prototype = {add:0,remove:1,replaced:2,reset:3}
Microsoft.Live.Messenger.NotifyCollectionChangedAction.registerEnum('Microsoft.Live.Messenger.NotifyCollectionChangedAction',false);Microsoft.Live.Messenger.M$3=function(){};Microsoft.Live.Messenger.M$3.registerInterface('Microsoft.Live.Messenger.M$3');Microsoft.Live.Messenger.$create_M$22=function(contactInfo){var $o={};$o.$0=contactInfo;$o.$1=[];return $o;}
Microsoft.Live.Messenger.M$6=function(){};Microsoft.Live.Messenger.M$6.prototype = {$0:0,$1:1,$2:2,$3:3,$4:4,$5:5,$6:6,$7:7}
Microsoft.Live.Messenger.M$6.registerEnum('Microsoft.Live.Messenger.M$6',false);Microsoft.Live.Messenger.M$7=function(){};Microsoft.Live.Messenger.M$7.registerInterface('Microsoft.Live.Messenger.M$7');Microsoft.Live.Messenger.IMAddressType=function(){};Microsoft.Live.Messenger.IMAddressType.prototype = {none:0,windowsLive:1,officeCommunicator:2,telephone:4,mobileNetwork:8,connect:13,smtp:16,yahoo:32}
Microsoft.Live.Messenger.IMAddressType.registerEnum('Microsoft.Live.Messenger.IMAddressType',false);Microsoft.Live.Messenger.PresenceStatus=function(){};Microsoft.Live.Messenger.PresenceStatus.prototype = {offline:0,online:1,appearOffline:2,busy:3,idle:4,beRightBack:5,away:6,inACall:7,outToLunch:8}
Microsoft.Live.Messenger.PresenceStatus.registerEnum('Microsoft.Live.Messenger.PresenceStatus',false);Microsoft.Live.Messenger.PrivacyMode=function(){};Microsoft.Live.Messenger.PrivacyMode.prototype = {allowByDefault:0,blockByDefault:1}
Microsoft.Live.Messenger.PrivacyMode.registerEnum('Microsoft.Live.Messenger.PrivacyMode',false);Microsoft.Live.Messenger.SessionServices=function(){};Microsoft.Live.Messenger.SessionServices.prototype = {normal:0,notifications:1,contactPresence:2,full:3}
Microsoft.Live.Messenger.SessionServices.registerEnum('Microsoft.Live.Messenger.SessionServices',false);Microsoft.Live.Messenger.SignedOutReason=function(){};Microsoft.Live.Messenger.SignedOutReason.prototype = {signedOutByLocalEndpoint:0,signedOutByRemoteEndpoint:1,connectionLost:2,serverError:3,endpointLimitExceeded:4,signedOutByServer:5}
Microsoft.Live.Messenger.SignedOutReason.registerEnum('Microsoft.Live.Messenger.SignedOutReason',false);Microsoft.Live.Messenger.SignOutLocations=function(){};Microsoft.Live.Messenger.SignOutLocations.prototype = {local:1,remote:2,all:3}
Microsoft.Live.Messenger.SignOutLocations.registerEnum('Microsoft.Live.Messenger.SignOutLocations',true);Microsoft.Live.Messenger.M$1=function(){};Microsoft.Live.Messenger.M$1.prototype = {$0:0,$1:1,$2:2,$3:3,$4:4,$5:5,$6:6}
Microsoft.Live.Messenger.M$1.registerEnum('Microsoft.Live.Messenger.M$1',false);Microsoft.Live.Messenger.UserStatus=function(){};Microsoft.Live.Messenger.UserStatus.prototype = {signedOut:0,signingIn:1,signedIn:2,signingOut:3,autoReconnectWaiting:4}
Microsoft.Live.Messenger.UserStatus.registerEnum('Microsoft.Live.Messenger.UserStatus',false);Microsoft.Live.Messenger.DisplayNameMode=function(){};Microsoft.Live.Messenger.DisplayNameMode.prototype = {displayName:0,fullName:1}
Microsoft.Live.Messenger.DisplayNameMode.registerEnum('Microsoft.Live.Messenger.DisplayNameMode',false);Microsoft.Live.Messenger.MailFolder=function(){};Microsoft.Live.Messenger.MailFolder.prototype = {inbox:0,deleted:1,junk:2,sent:3,drafts:4,other:5}
Microsoft.Live.Messenger.MailFolder.registerEnum('Microsoft.Live.Messenger.MailFolder',false);Microsoft.Live.Messenger.MessageType=function(){};Microsoft.Live.Messenger.MessageType.prototype = {textMessage:1,nudgeMessage:2,applicationMessage:3}
Microsoft.Live.Messenger.MessageType.registerEnum('Microsoft.Live.Messenger.MessageType',false);Microsoft.Live.Messenger.TextMessageDirection=function(){};Microsoft.Live.Messenger.TextMessageDirection.prototype = {leftToRight:0,rightToLeft:1}
Microsoft.Live.Messenger.TextMessageDirection.registerEnum('Microsoft.Live.Messenger.TextMessageDirection',false);Microsoft.Live.Messenger.TextMessageStyle=function(){};Microsoft.Live.Messenger.TextMessageStyle.prototype = {regular:0,bold:1,italic:2,strikeout:4,underline:8}
Microsoft.Live.Messenger.TextMessageStyle.registerEnum('Microsoft.Live.Messenger.TextMessageStyle',true);Microsoft.Live.Messenger.AddContactResultCode=function(){};Microsoft.Live.Messenger.AddContactResultCode.prototype = {success:0,failure:1,notFound:2}
Microsoft.Live.Messenger.AddContactResultCode.registerEnum('Microsoft.Live.Messenger.AddContactResultCode',false);Microsoft.Live.Messenger.AuthenticationResultCode=function(){};Microsoft.Live.Messenger.AuthenticationResultCode.prototype = {success:0,failure:1}
Microsoft.Live.Messenger.AuthenticationResultCode.registerEnum('Microsoft.Live.Messenger.AuthenticationResultCode',false);Microsoft.Live.Messenger.InviteAddressResultCode=function(){};Microsoft.Live.Messenger.InviteAddressResultCode.prototype = {success:0,failure:1}
Microsoft.Live.Messenger.InviteAddressResultCode.registerEnum('Microsoft.Live.Messenger.InviteAddressResultCode',false);Microsoft.Live.Messenger.InviteContactResultCode=function(){};Microsoft.Live.Messenger.InviteContactResultCode.prototype = {success:0,failure:1}
Microsoft.Live.Messenger.InviteContactResultCode.registerEnum('Microsoft.Live.Messenger.InviteContactResultCode',false);Microsoft.Live.Messenger.SendMessageResultCode=function(){};Microsoft.Live.Messenger.SendMessageResultCode.prototype = {success:0,failure:1,messageTooLong:2,recipientInvalid:3,recipientDisabled:4}
Microsoft.Live.Messenger.SendMessageResultCode.registerEnum('Microsoft.Live.Messenger.SendMessageResultCode',false);Microsoft.Live.Messenger.SignInResultCode=function(){};Microsoft.Live.Messenger.SignInResultCode.prototype = {success:0,failure:1,authenticationFailure:2}
Microsoft.Live.Messenger.SignInResultCode.registerEnum('Microsoft.Live.Messenger.SignInResultCode',false);Microsoft.Live.Messenger.SignOutResultCode=function(){};Microsoft.Live.Messenger.SignOutResultCode.prototype = {success:0,failure:1}
Microsoft.Live.Messenger.SignOutResultCode.registerEnum('Microsoft.Live.Messenger.SignOutResultCode',false);Microsoft.Live.Messenger.$create_M$C=function(position,length,safeLink){var $o={};$o.$0=position;$o.$1=length;$o.$2=safeLink;return $o;}
Microsoft.Live.Messenger.SignInPreference=function(){};Microsoft.Live.Messenger.SignInPreference.prototype = {none:0,autoSignIn:1,manualSignIn:2}
Microsoft.Live.Messenger.SignInPreference.registerEnum('Microsoft.Live.Messenger.SignInPreference',false);Microsoft.Live.Messenger.M$D={$0:'The provided application message ID has already been registered.',
$1:'An ApplicationMessageFactory must be assigned to the User.MessageFactory property.',
$2:'ApplicationMessageFactory.Serialize must return a string with a length between 1 and 2000 characters.',
$3:'The provided application message ID has not been registered.',
$4:'An application message cannot be sent if message ID is not registered. Use ApplicationMessageFactory.Register to register the ID.',
$5:'The provided application message ID is a reserved ID, and cannot be used by applications.',
$6:'The serialized content of the SimpleApplicationMessage is too large. Use a smaller object.',
$7:'Value cannot be empty.',
$8:'Value is invalid: {1}\\r\\n{0}',
$9:'Value cannot be null: {0}.',
$A:'Specified argument was out of range.',
$B:'Argument must be positive.',
$C:'Cannot create a conversation with self.',
$D:'Collection already contains object.',
$E:'Collection does not contain object.',
$F:'Collection is read-only.',
$10:'Cannot perform an IMAddress operation on a Contact that is not on WindowsLive network.',
$11:'Internal Error. Messenger Web Toolkit configuration is not loaded.',
$12:'The contact must be a member of User.Contacts to perform this operation.',
$13:'Display name is invalid. Use IMAddressPresence.IsDisplayNameValid() to validate user input.',
$14:'Display name is read-only. Use User.Settings.CanUpdateDisplayName to determine whether the display name can be updated.',
$15:'Endpoint name is invalid. Use Endpoint.IsNameValid() to validate user input.',
$16:'Cannot update a contact\'s endpoint. Use User.LocalEndpoint to get the user\'s endpoint.',
$17:'A group with the name \'{0}\' already exists.',
$18:'Group name is invalid. Use User.Groups.IsNameValid() to validate user input.',
$19:'The application message ID length must be between 1 and 64 characters.',
$1A:'Operation is not valid due to the current state of the object. {0}',
$1B:'The invited contact is already in the conversation.',
$1C:'Multiparty is not supported for this conversation. Use Conversation.SupportsMultiparty to check for this conversation.',
$1D:'Cannot update Network.IMEnabled for networks that do not support instant messaging. Use Network.SupportsRemoteSignIn to determine whether it is possible.',
$1E:'Cannot access a disposed object named \'{0}\'.',
$1F:'Object does not belong to user.',
$20:'Object returned by User.OnCreateMailbox is invalid.',
$21:'Object returned by User.OnCreateConversation is invalid.',
$22:'Personal message is invalid. Use IMAddressPresence.IsPersonalMessageValid() to validate user input.',
$23:'Presence extension name should contain only alphanumeric characters.',
$24:'Presence extension name length must be between 1 and 6 characters.',
$25:'A PresenceExtensionFactory must be assigned to the User.PresenceFactory property.',
$26:'PresenceExtensionFactory.Serialize must return a non-null value.',
$27:'PresenceExtensionFactory.Serialize must return a string with a length less than 500 characters.',
$28:'Unexpected presence extension. Presence extensions must be of type SimplePresenceExtension.',
$29:'The serialized content of the SimplePresenceExtension is too large. Use a smaller object.',
$2A:'Cannot update a contact\'s presence.',
$2B:'Cannot update presence when User.Services is in Notifications or ContactPresence mode.',
$2C:'An address of the same type already exists in the contact.',
$2D:'Text message is invalid. Use Conversation.IsTextMessageValid() to validate a message.',
$2E:'User is already signed in.',
$2F:'An Identity object must be authenticated prior to creating a User instance.',
$30:'User must be signed in in order to perform this operation.',
$31:'An Identity object cannot be associated with more than one User instance.',
$32:'Nickname is invalid. Use Contact.IsNicknameValid() to validate user input.',
$33:'A DOM element must exist with the ID of controlId.',
$34:'The domain of the channel file does not match the current page.',
$35:'The Messenger Library must be hosted in a page that uses HTTP over port 80.',
$36:'Invalid operation for the current authentication mode.',
$37:'There is a SetApplicationContacts operation already in progress.',
$38:'Cannot add or remove contact from the collection. To add or remove an application contact, use SetApplicationContacts(). To add email-only contacts, use User.AddContact().',
$39:'The contact must be an application contact for this operation.',
$3A:'',
$3B:'The Application Logo URL length must be less than 300 characters.',
$3C:'The Application Name length must be less than 129 characters.',
$3D:'The Application Display Picture URL must be less than 256 characters.',
$3E:'The application verifier is invalid.',
$3F:'The application is unauthorized.',
$40:'The application ticket is invalid.',
$41:'User instance must be present for the operation.',
$42:'Cannot create a conversation with an email-only contact.',
$43:'Cannot send an offline message to this conversation. Use Conversation.SupportsOfflineMessages to check for this conversation.',
$44:'Cannot perform operation in the current User.Services state.',
$45:'The combined length of all values for this media type must not exceed {0}.',
$46:'Cannot update group\'s AppearOfflineTo/AppearOnlineTo properties when User.Services is in Notifications or ContactPresence mode.',
$47:'Cannot send a message to a contact that the user is appearing offline to. Use Contact.AppearOnlineTo() to appear online to the contact first.'
};Microsoft.Live.Messenger.MediaType=function(){};Microsoft.Live.Messenger.MediaType.prototype = {music:0,video:1,game:2}
Microsoft.Live.Messenger.MediaType.registerEnum('Microsoft.Live.Messenger.MediaType',false);Microsoft.Live.Messenger.NetworkStatus=function(){};Microsoft.Live.Messenger.NetworkStatus.prototype = {signedOut:0,signingIn:1,signedIn:2,signingOut:3,autoReconnectWaiting:4}
Microsoft.Live.Messenger.NetworkStatus.registerEnum('Microsoft.Live.Messenger.NetworkStatus',false);Microsoft.Live.Messenger.M$B={$0:'Segoe UI',
$1:'{0} {1}',
$2:'{0} ({1})',
$3:'Desconectado',
$4:'Ausente',
$5:'Ocupado',
$6:'Desconectado',
$7:'Disponible',
$8:'Windows Live',
$9:'Microsoft Lync\u2122',
$A:'SMS',
$B:'Yahoo'
};Microsoft.Live.Messenger.Alert=function(actionUrl,subscriptionUrl,iconUrl,timestamp,text){this.$0=new Microsoft.Live.Messenger.Uri(actionUrl);this.$1=new Microsoft.Live.Messenger.Uri(subscriptionUrl);this.$2=new Microsoft.Live.Messenger.Uri(iconUrl);this.$3=timestamp;this.$4=text;this.$5=false;}
Microsoft.Live.Messenger.Alert.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:false,get_actionUrl:function(){return this.$0;},get_subscriptionUrl:function(){return this.$1;},get_iconUrl:function(){return this.$2;},get_timestamp:function(){return this.$3;},get_text:function(){return this.$4;},get_reloaded:function(){return this.$5;},$6:function($p0){this.$5=$p0;}}
Microsoft.Live.Messenger.AlertCollection=function(){Microsoft.Live.Messenger.AlertCollection.initializeBase(this);}
Microsoft.Live.Messenger.AlertCollection.prototype={$13:function($p0){this.$C($p0);},get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.AuthenticationCompletedEventArgs=function(identity){Microsoft.Live.Messenger.AuthenticationCompletedEventArgs.initializeBase(this);this.$1_0=identity;this.$1_1=0;}
Microsoft.Live.Messenger.AuthenticationCompletedEventArgs.prototype={$1_0:null,$1_1:0,$1_2:0,$1_3:null,get_status:function(){return this.$1_1;},set_status:function(value){this.$1_1=value;return value;},get_identity:function(){return this.$1_0;},get_isAlreadySignedIn:function(){return (this.$1_1&1)!==0;},get_isUnsupportedBrowser:function(){return (this.$1_1&2)!==0;},get_multipleEndpointsNotSupported:function(){return (this.$1_1&4)!==0;},get_isBlockedApplication:function(){return (this.$1_1&8)!==0;},get_isBlockedUser:function(){return (this.$1_1&16)!==0;},get_authenticationFailure:function(){return ((this.$1_1&32)!==0||(this.$1_1&64)!==0);},get_serviceUnavailable:function(){return (this.$1_1&64)!==0;},get_resultCode:function(){return this.$1_2;},set_resultCode:function(value){this.$1_2=value;return value;},get_user:function(){return this.get_identity().get_$21();},get_serverName:function(){return this.$1_3;},set_serverName:function(value){this.$1_3=value;return value;}}
Microsoft.Live.Messenger.Guid=function(g){if(String.isNullOrEmpty(g)){throw Microsoft.Live.Messenger.M$A.$1('g',g);}if(MSH.StringHelper.charAt(g,0)!=='{'){g='{'+g+'}';}if(!MSH.RegexHelper.isMatch('^\\{[a-f\\d]{8}\\-([a-f\\d]{4}\\-){3}[a-f\\d]{12}\\}$',g,'i')){throw Microsoft.Live.Messenger.M$A.$5('g');}this.g=MSH.StringHelper.toLowerCase(g);}
Microsoft.Live.Messenger.Guid.newGuid=function(){var $0=new Array(4);for(var $1=0;$1<4;$1++){$0[$1]=Math.round(Math.random()*16777215).toString(16).padLeft(8,'0');}return new Microsoft.Live.Messenger.Guid('{'+$0[0]+'-'+$0[1].substr(0,4)+'-'+$0[1].substr(4,4)+'-'+$0[2].substr(0,4)+'-'+$0[2].substr(4,4)+$0[3]+'}');}
Microsoft.Live.Messenger.Guid.prototype={g:null,equals:function(guid){if(guid==null){return false;}return (this.g===guid.g);},toString:function(){return this.g;}}
Microsoft.Live.Messenger.Identity=function(){this.$0=MC.$create_IdentityInfo(null,null);this.$0.authenticationInfo=MC.$create_AuthenticationInfo(1,String.Empty);this.$7=true;this.$E=Microsoft.Live.Messenger.M$14.get_$12();this.$5=MC.$create_LocalSettingsInfo(false,true);}
Microsoft.Live.Messenger.Identity.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:false,$8:false,$9:false,$A:false,$B:null,add_propertyChanged:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_propertyChanged:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,add_authenticationCompleted:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_authenticationCompleted:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,$E:0,get_$F:function(){return null;},get_liveId:function(){return this.$0.liveId;},get_cid:function(){return this.$0.cid;},get_token:function(){return this.get_$1C().ticket;},set_token:function(value){if(String.isNullOrEmpty(value)){throw Microsoft.Live.Messenger.M$A.$1('value',value);}this.get_$1C().ticket=value;var $0=(value!=null);this.get_$1E().initializeSignInStatus(this.$1D(),null,MC.$create_InitializationOptionsInfo(false,false,$0));return value;},$10:function($p0){if(this.$0.liveId!==$p0){this.$0.liveId=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('LiveId'));}},$11:function($p0){if(this.$0.appId!==$p0){this.$0.appId=$p0;}},$12:function($p0){if(this.$0.cid!==$p0){this.$0.cid=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('Cid'));}},get_$13:function(){return this.$B;},set_$13:function($p0){this.$B=$p0;return $p0;},get_isAuthenticated:function(){return this.$7;},get_reloaded:function(){return this.$9;},set_reloaded:function(value){if(this.$9!==value){this.$9=value;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('Reloaded'));}this.$A=true;return value;},get_simulatePrivateSessionStorageEnabled:function(){return this.$5.simulatePrivateSessionStorageEnabled;},set_simulatePrivateSessionStorageEnabled:function(value){this.$5.simulatePrivateSessionStorageEnabled=value;return value;},get_crossPageSupportEnabled:function(){return this.$5.crossPageSupportEnabled;},set_crossPageSupportEnabled:function(value){this.$5.crossPageSupportEnabled=value;return value;},$14:function($p0){if(this.$7!==$p0){this.$7=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('IsAuthenticated'));}},get_$15:function(){if(String.isNullOrEmpty(this.$0.endpointId)){this.set_$15(Microsoft.Live.Messenger.Guid.newGuid().toString());}return this.$0.endpointId;},set_$15:function($p0){$p0=MSH.StringHelper.toLowerCase($p0);if(this.$0.endpointId!==$p0){this.$0.endpointId=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('EndpointId'));}return $p0;},get_$16:function(){return this.$E;},get_$17:function(){if(this.$2==null){this.$2=new Microsoft.Live.Messenger.M$1E(this);}return this.$2;},$18:function(){var $0=new Microsoft.Live.Messenger.AuthenticationCompletedEventArgs(this);$0.set_status(64|2);$0.set_resultCode(1);this.$1A($0);},$19:function($p0,$p1){var $0=0;var $1=false;var $2=false;var $3=0;if($p0===0){this.set_$13($p1.duration||'failure');var $5=$p1.signInStatus;if($5.isUnsupportedBrowser){$0|=2;}if($5.isApplicationBlocked){$0|=8;$3=1;}else if($5.isUserBlocked){$0|=16;$3=1;}else if($5.isAuthenticated){$1=true;if($5.isUserSignedInViaSpopClient){$0|=1;$0|=4;}if($5.isUserSignedInViaMpopEndpoints){$0|=1;}if($5.isUserSettingsKnown){if(ss.isNullOrUndefined($5.lastStatus)){$5.lastStatus=2;}this.$4=MC.$create_UXSettingsInfo($5.isAutoSignInEnabled,$5.isAudioEnabled,$5.isFirstRunExperienceViewed,$5.lastStatus);}else{this.$4=MC.$create_UXSettingsInfo(2,true,true,2);}if($5.isAppSettingsKnown){this.$6=MC.$create_AppSettingsInfo(($5.isContactsSignatureRequired)?1:2);}else{this.$6=MC.$create_AppSettingsInfo(0);}if($5.isServicesKnown){this.$E=$5.services;}}else{if($5.isTicketExpired){$2=true;}$0|=32;$3=1;}}else{$0|=64;$3=1;}if($1){var $6=$p1.identity;this.$10($6.liveId);this.$12($6.cid);this.$11($6.appId);this.set_$15($6.endpointId);}if(!this.$A){this.set_reloaded(($p1==null)?false:$p1.reloaded);}this.$14($1);var $4=new Microsoft.Live.Messenger.AuthenticationCompletedEventArgs(this);$4.set_status($0);$4.set_resultCode($3);$4.set_serverName($p1.serverName);if($2){this.$20();}this.$1A($4);},$1A:function($p0){if(this.$D!=null){this.$D.invoke(this,$p0);}},$1B:function($p0,$p1){},get_$1C:function(){return this.$0.authenticationInfo;},set_$1C:function($p0){this.$0.authenticationInfo=$p0;return $p0;},$1D:function(){var $0=MC.$create_IdentityInfo(this.get_liveId(),this.get_$15());$0.cid=this.get_cid();$0.appId=this.$0.appId;$0.authenticationInfo=this.get_$1C();return $0;},get_$1E:function(){if(this.$1==null){this.$1=Microsoft.Live.Messenger.Services.M$20.$2(this,this.get_$17());}return this.$1;},$1F:function($p0){this.$1=$p0;},onPropertyChanged:function(args){if(this.$C!=null){this.$C.invoke(this,args);}},$20:function(){},get_$21:function(){return this.$3;},set_$21:function($p0){if(this.$3!=null&&this.$3!==$p0){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$31);}this.$3=$p0;if(this.$4!=null){this.$3.$5D(this.$4);this.$4=null;}if(this.$6!=null){this.$3.$5E(this.$6);}return $p0;},add_$22:function($p0){this.$23=ss.Delegate.combine(this.$23,$p0);},remove_$22:function($p0){this.$23=ss.Delegate.remove(this.$23,$p0);},$23:null,get_$24:function(){return this.$8;},dispose:function(){if(!this.$8){this.$8=true;if(Type.canCast(this.get_$1E(),ss.IDisposable)){(this.get_$1E()).dispose();}if(this.$23!=null){this.$23.invoke(this,ss.EventArgs.Empty);}}}}
Microsoft.Live.Messenger.Uri=function(uri){if(String.isNullOrEmpty(uri)){throw Microsoft.Live.Messenger.M$A.$1('uri',uri);}this.$0=uri;}
Microsoft.Live.Messenger.Uri.get_uriSchemeHttp=function(){return 'http';}
Microsoft.Live.Messenger.Uri.prototype={$0:null,toString:function(){return this.$0;}}
Microsoft.Live.Messenger.Version=function(major,minor,build,revision){if((major<0)||(minor<0)||(build<0)||(revision<0)){throw Microsoft.Live.Messenger.M$A.$5(Microsoft.Live.Messenger.M$D.$B);}this.$0=major;this.$1=minor;this.$2=build;this.$3=revision;}
Microsoft.Live.Messenger.Version.prototype={$0:0,$1:0,$2:0,$3:0,get_major:function(){return this.$0;},get_minor:function(){return this.$1;},get_build:function(){return this.$2;},get_revision:function(){return this.$3;},toString:function(){return String.format('{0}.{1}.{2}.{3}',this.$0,this.$1,this.$2,this.$3);}}
Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs=function(action,newItem,oldItem,index){this.$1_2=-1;this.$1_4=-1;Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.initializeBase(this);this.$1_0=action;if(this.$1_0!==3){this.$1_1=[];this.$1_3=[];}if(this.$1_0===0){this.$1_1.add(newItem);this.$1_2=index;}else if(this.$1_0===1){this.$1_3.add(oldItem);this.$1_4=index;}else if(this.$1_0===2){this.$1_1.add(newItem);this.$1_3.add(oldItem);this.$1_2=index;this.$1_4=index;}}
Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.$1_6=function($p0,$p1,$p2,$p3,$p4){var $0=new Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs($p0,$p1,$p2,$p3);if($p1!=null&&$p1.length>1){$0.$1_1.clear();$0.$1_1.addRange($p1);}if($p2!=null&&$p2.length>1){$0.$1_3.clear();$0.$1_3.addRange($p2);}return $0;}
Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.prototype={$1_0:0,$1_1:null,$1_3:null,$1_5:null,get_action:function(){return this.$1_0;},get_newItems:function(){return this.$1_1;},get_newStartingIndex:function(){return this.$1_2;},get_oldItems:function(){return this.$1_3;},get_oldStartingIndex:function(){return this.$1_4;},get_changes:function(){if(this.$1_5==null){this.$1_7();}return this.$1_5;},$1_7:function(){switch(this.$1_0){case 0:case 1:case 3:this.$1_5=[new Sys.CollectionChange(this.$1_8(),this.$1_1,this.$1_2,this.$1_3,this.$1_4)];break;case 2:this.$1_5=[new Sys.CollectionChange(1,null,-1,this.$1_3,this.$1_4),new Sys.CollectionChange(0,this.$1_1,this.$1_2,null,-1)];break;}},$1_8:function(){switch(this.$1_0){case 0:return 0;case 1:return 1;case 3:return 2;}return 0;}}
Microsoft.Live.Messenger.PropertyChangedEventArgs=function(propertyName){Microsoft.Live.Messenger.PropertyChangedEventArgs.initializeBase(this);this.$1_0=propertyName;}
Microsoft.Live.Messenger.PropertyChangedEventArgs.prototype={$1_0:null,get_propertyNamePascal:function(){return this.$1_0;},get_propertyName:function(){if(MC.Compatibility.get_microsoftAjaxPropertyNamesEnabled()){return MSH.StringHelper.toCamelCase(this.$1_0);}return this.$1_0;}}
Microsoft.Live.Messenger.Capabilities=function(address){this.$0=address;}
Microsoft.Live.Messenger.Capabilities.prototype={$0:null,$1:null,add_propertyChanged:function(value){this.$2=ss.Delegate.combine(this.$2,value);},remove_propertyChanged:function(value){this.$2=ss.Delegate.remove(this.$2,value);},$2:null,get_version:function(){if(this.$1==null){this.$1=this.$8();}return this.$1;},get_supportsMultipartyConversations:function(){if(this.$0.get_$1D().type===11){return false;}return this.get_$6();},get_supportsOfflineMessages:function(){switch(this.$0.get_$12().type){case 1:case 32:case 4:case 16:return true;default:return false;}},get_$3:function(){switch(this.$0.get_$12().type){case 4:case 16:case 8:return false;default:return true;}},supportsMessageType:function(messageType){var $0=this.$0.get_type();switch($0){case 1:switch(messageType){case 1:return true;case 2:return this.get_$5();case 3:return this.get_$4();}break;case 32:switch(messageType){case 3:return this.get_$4();default:return true;}case 2:case 8:case 4:case 16:case 13:switch(messageType){case 1:return true;case 3:return this.get_$4();}break;}return false;},$7:function($p0){if($p0.service!==2){return false;}var $0=false;var $1=$p0.updatedProperties;var $2=$1.length;for(var $3=0;$3<$2;$3++){var $4=$1[$3];switch($4){case 'IsOnlineViaMobileDevice':case 'IsOnlineViaWeb':case 'SupportsMultipartyConversations':$0=true;this.$B($4);break;case 'Version':case 'ClientVersion':$0=true;this.$1=null;this.$B($4);break;}}return $0;},$9:function($p0){if(String.isNullOrEmpty($p0)){return null;}var $0=$p0.split('.');if(($0.length<2)||($0.length>4)){return null;}var $1=new Array($0.length);for(var $2=0;$2<$1.length;$2++){var $3=MSH.ConvertHelper.tryParseInt($0[$2]);if($3<0){return null;}$1[$2]=$3;}switch($1.length){case 2:return new Microsoft.Live.Messenger.Version($1[0],$1[1],0,0);case 3:return new Microsoft.Live.Messenger.Version($1[0],$1[1],$1[2],0);default:return new Microsoft.Live.Messenger.Version($1[0],$1[1],$1[2],$1[3]);}},$A:function($p0){var $0=0;var $1=0;if($p0!==0){var $2=28;switch($p0>>>$2){case (268435456>>>$2):$0=6;break;case (536870912>>>$2):$0=6;$1=1;break;case (805306368>>>$2):$0=6;$1=2;break;case (1073741824>>>$2):$0=7;break;case (1342177280>>>$2):$0=7;$1=5;break;case (1610612736>>>$2):$0=8;break;case (1879048192>>>$2):$0=8;$1=1;break;case (-2147483648>>>$2):$0=8;$1=5;break;case (-1879048192>>>$2):$0=9;break;case (-1610612736>>>$2):$0=14;break;}}return new Microsoft.Live.Messenger.Version($0,$1,0,0);},$B:function($p0){if(this.$2!=null){this.$2.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}}}
Microsoft.Live.Messenger.Collection=function(){this.$0=[];this.$1=false;}
Microsoft.Live.Messenger.Collection.prototype={$1:false,add_collectionChanged:function(value){this.$2=ss.Delegate.combine(this.$2,value);},remove_collectionChanged:function(value){this.$2=ss.Delegate.remove(this.$2,value);},$2:null,add_propertyChanged:function(value){this.$3=ss.Delegate.combine(this.$3,value);},remove_propertyChanged:function(value){this.$3=ss.Delegate.remove(this.$3,value);},$3:null,onCollectionChanged:function(e){if(this.$2!=null){this.$2.invoke(this,e);}},onPropertyChanged:function(e){if(this.$3!=null){this.$3.invoke(this,e);}},get_$4:function(){return this.$1;},get_count:function(){return this.$0.length;},get_$5:function(){return this.$0;},$6:function($p0){if(!this.$1&&(this.$3!=null)){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$7:function($p0,$p1,$p2,$p3){if(!this.$1&&(this.$2!=null)){this.onCollectionChanged(new Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs($p0,$p1,$p2,$p3));}},$8:function($p0,$p1){if(!this.$1&&(this.$2!=null)){this.onCollectionChanged(Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.$1_6(0,$p0,null,$p1,-1));}},$9:function(){this.$1=true;},$A:function(){this.$1=false;this.$6('Count');this.$7(3,null,null,0);},$B:function($p0){return this.$0.contains($p0);},$C:function($p0){this.$0.add($p0);if(!this.$1){this.$6('Count');this.$7(0,$p0,null,this.$0.length-1);}},$D:function($p0){var $0=this.$0.indexOf($p0);if($0>=0){this.$0.removeAt($0);this.$6('Count');this.$7(1,null,$p0,$0);}},$E:function($p0,$p1){var $0=this.$0[$p0];if($0!==$p1){this.$0[$p0]=$p1;this.$7(2,$p1,$0,$p0);}},$F:function($p0,$p1){this.$0.insert($p0,$p1);this.$6('Count');this.$7(0,$p1,null,$p0);},$10:function($p0){var $0=this.$0[$p0];this.$0.removeAt($p0);this.$6('Count');this.$7(1,null,$0,$p0);},$11:function($p0,$p1){for(var $0=$p0;$0<$p0+$p1.length;$0++){if($p1[$0]!=null){this.$0.insert($0,$p1[$0]);}}this.$6('Count');this.$8($p1,$p0);},$12:function($p0,$p1){if($p1===$p0){return;}if($p0>=0&&$p0<=this.get_count()){var $0=this.$0[$p1];this.$10($p1);this.$F($p0,$0);}},getItem:function(index){var $0=this.$0;if((index<0)||(index>=$0.length)){throw Microsoft.Live.Messenger.M$A.$5('index');}return $0[index];},getEnumerator:function(){return this.$0.getEnumerator();}}
Microsoft.Live.Messenger.Contact=function(contactMap,application,user,contactInfos,populating){this.$8=String.Empty;this.$9=String.Empty;this.$11=populating;this.$1=contactMap;this.$2=application;this.$0=user;this.$4=new Microsoft.Live.Messenger.LinkedContactCollection();this.$5=new Microsoft.Live.Messenger.IMAddressCollection(this);this.$F=[];this.$B=true;this.$12=true;for(var $1=0;$1<contactInfos.length;$1++){var $2=new Microsoft.Live.Messenger.LinkedContact(this.$1,this,contactInfos[$1],populating);$2.add_propertyChanged(ss.Delegate.create(this,this.$16));this.$4.$C($2);if(!$2.get_network().get_$1A()){this.$12=false;}}for(var $3=0;$3<this.$4.get_count();$3++){var $4=this.$4.get_item($3).get_$B();for(var $5=0;$5<$4.get_count();$5++){var $6=$4.get_item($5);this.$10|=$6.get_$12().roleLists;this.$5.$C($6);}}this.$5.$15();var $0=this.$18();this.$13=$0.get_firstName();this.$14=$0.get_lastName();this.$5.add_collectionChanged(ss.Delegate.create(this,this.$4E));this.$D=this.$4D();this.$28();this.$1B(false);this.$6=String.Empty;this.$7=0;this.$15=true;this.$42(String.Empty,7,true);this.$41();this.$1C(this.$10);this.$11=false;if(MC.Compatibility.get_provideLegacyContactInfo()){this.$3=MC.$create_ContactInfo(null,null,new Array(0));this.$3.emailAddress=MC.$create_EmailInfo(this.get_emailAddress()||String.Empty);}}
Microsoft.Live.Messenger.Contact.$37=function($p0){return (($p0&64)===64||($p0&5)===5);}
Microsoft.Live.Messenger.Contact.$38=function($p0,$p1){if(!String.isNullOrEmpty($p0)&&!String.isNullOrEmpty($p1)){return String.format(Microsoft.Live.Messenger.M$B.$1,$p0,$p1);}else if(!String.isNullOrEmpty($p0)){return $p0;}else if(!String.isNullOrEmpty($p1)){return $p1;}else{return String.Empty;}}
Microsoft.Live.Messenger.Contact.$39=function($p0,$p1){var $0=-1;var $1=-1;if(!String.isNullOrEmpty($p0.get_linkedContacts().get_item(0).get_$9().favoritesOrder)){$0=MSH.ConvertHelper.tryParseInt($p0.get_linkedContacts().get_item(0).get_$9().favoritesOrder);}if(!String.isNullOrEmpty($p1.get_linkedContacts().get_item(0).get_$9().favoritesOrder)){$1=MSH.ConvertHelper.tryParseInt($p1.get_linkedContacts().get_item(0).get_$9().favoritesOrder);}if(($0>=0)&&($1>=0)){var $2=$0-$1;if($2!==0){return $2;}return String.compare($p0.get_displayName(),$p1.get_displayName());}else if($0>=0){return -1;}else if($1>=0){return 1;}else{return String.compare($p0.get_displayName(),$p1.get_displayName());}}
Microsoft.Live.Messenger.Contact.isNicknameValid=function(name){if(name==null){return false;}var $0=40;if(name.length>$0){return false;}return true;}
Microsoft.Live.Messenger.Contact.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:0,$A:null,$B:false,$C:false,$D:null,$E:null,$F:null,$10:0,$11:false,$12:false,$13:null,$14:null,$15:false,$16:function($p0,$p1){switch($p1.get_propertyNamePascal()){case 'FirstName':case 'LastName':case 'FullName':this.$17();break;}},$17:function(){var $0=false;var $1=false;var $2=this.$18();if(this.$13!==$2.get_firstName()){this.$13=$2.get_firstName();$0=true;}if(this.$14!==$2.get_lastName()){this.$14=$2.get_lastName();$0=true;}if($0){this.$4F('FirstName');}if($1){this.$4F('LastName');}if($0||$1){this.$4F('FullName');}},$18:function(){var $0=null;var $1=null;for(var $2=0;$2<this.$4.get_count();$2++){var $3=false;var $4=false;var $5=this.$4.get_item($2);if(!String.isNullOrEmpty($5.get_firstName())){$3=true;}if(!String.isNullOrEmpty($5.get_lastName())){$4=true;}if($3&&$4){return $5;}if($0==null&&$3){$0=$5;}if($1==null&&$4){$1=$5;}}if($0!=null){return $0;}if($1!=null){return $1;}return this.$4.get_item(0);},$19:function(){var $0=null;for(var $1=0;$1<this.$4.get_count();$1++){var $2=this.$4.get_item($1);if(!$2.get_network().get_$1A()){if(!String.isNullOrEmpty($2.get_$9().nickname)){$0=$2;break;}else if($0==null){$0=$2;}}}return $0;},$1A:function(){for(var $0=0;$0<this.$5.get_count();$0++){var $1=this.$5.get_item($0);if(!$1.get_network().get_$1A()){if(!String.isNullOrEmpty($1.get_presence().get_displayName())){return $1;}}}return null;},$1B:function($p0){var $0=this.$10;var $1=0;var $2=2|4;var $3=1|16;if(($0&$2)===$2){$0&=~2;$1|=2;}if(($0&$3)===$3){$0&=~16;$1|=16;}if(this.$10!==$0){this.$10=$0;for(var $4=0;$4<this.$5.get_count();$4++){this.$5.get_item($4).get_$12().roleLists=$0;}}if($p0){this.$1C($1);}},$1C:function($p0){this.$1E($p0);this.$24($p0);this.$1D();},$1D:function(){if(this.$0!=null){var $0=this.$0.get_emailOnlyContacts();if((this.$5.get_count()===0)){if(this.$11||!$0.$B(this)){$0.$14(this);}}else{if(!this.$11&&$0.$B(this)){$0.$15(this);}}}},$1E:function($p0){if(this.$0==null){return;}this.$1F(this.$0.get_contacts(),1,$p0,'IsContact');this.$1F(this.$0.get_allowedContacts(),2,$p0,'IsAllowed');this.$1F(this.$0.get_blockedContacts(),4,$p0,'IsBlocked');this.$20($p0);this.$22($p0);this.$21($p0);if(($p0&1)!==0||($p0&32)!==0){this.$23();}},$1F:function($p0,$p1,$p2,$p3){if(($p2&$p1)!==0){if((this.$10&$p1)!==0){$p0.$C(this);}else{$p0.$D(this);if($p1===1){this.$3C();this.get_$49().set_id(null);}}this.$4F($p3);}},$20:function($p0){var $0=((this.$0!=null)&&(this.$0.get_address()!=null)&&(this.$0.get_presence().get_status()===2));var $1=Microsoft.Live.Messenger.Contact.$37(this.$10^$p0);var $2=Microsoft.Live.Messenger.Contact.$37(this.$10);var $3=false;if(!$0&&!$1&&$2){this.$0.get_appearOfflineToContacts().$C(this);$3=true;}else if(!$0&&$1&&!$2){this.$0.get_appearOfflineToContacts().$D(this);$3=true;}if($3){this.$4F('IsAppearOfflineTo');}},$21:function($p0){if(($p0&16)!==0){if((this.$10&16)!==0){this.$0.get_pendingContacts().$15(this);}else{this.$0.get_pendingContacts().$16(this);}}},$22:function($p0){if(($p0&32)!==0){if((this.$10&32)!==0){this.$0.get_applicationContacts().$17(this);}else{this.$0.get_applicationContacts().$18(this);}this.$4F('IsApplicationContact');}},$23:function(){if(this.$0==null){return;}if(this.get_isContact()||(this.get_isApplicationContact()&&this.$B)){if(this.$11){this.$0.get_$2F().get_$3().$17(this);}else if(!this.$0.get_$2F().$6(this)){this.$0.get_$2F().$4(this);}}else{if(this.$0.get_$2F().$6(this)){this.$0.get_$2F().$5(this);}}},$24:function($p0){if(this.$2==null){return;}if(($p0&32)!==0){if((this.$10&32)!==0){if(!this.$2.get_contacts().$B(this)){this.$2.get_contacts().$17(this);}}else{this.$2.get_contacts().$18(this);}this.$4F('IsApplicationContact');}},$25:function($p0){if(this.$8!==$p0&&$p0!=null){this.$8=$p0;this.$4F('ApplicationDisplayName');this.$42($p0,4,false);}},$26:function($p0){if(this.$9!==$p0&&$p0!=null){this.$9=$p0;this.$4F('ApplicationPersonalMessage');}},$27:function($p0){if(this.$A!==$p0&&$p0!=null){this.$A=$p0;this.$4F('ApplicationDisplayPictureUrl');}},$28:function(){var $0=this.$29();if($0!==this.$C){this.$C=$0;this.$4F('IsInApplication');}},$29:function(){if(this.get_isApplicationContact()){return true;}var $0=null;if(this.$0!=null){if(this.$0.get_identity().get_$1C().authType!==2){return false;}$0=this.$0.get_applicationId();}else{$0=this.$2.get_$F();}var $enum1=ss.IEnumerator.getEnumerator(this.$5);while($enum1.moveNext()){var $1=$enum1.get_current();var $enum2=ss.IEnumerator.getEnumerator($1.get_endpoints());while($enum2.moveNext()){var $2=$enum2.get_current();if($2.get_applicationId()===$0){return true;}}}return false;},get_$2A:function(){return this.$0;},set_$2A:function($p0){if(this.$0!==$p0){if(this.$0!=null){this.$F.clear();var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();$0.get_$9().id=null;}this.$10&=~32;}this.$0=$p0;var $enum2=ss.IEnumerator.getEnumerator(this.$5);while($enum2.moveNext()){var $1=$enum2.get_current();$1.set_$C($p0);}if(this.$0!=null){this.$1E(this.$10);this.$42(String.Empty,7,false);}}return $p0;},get_id:function(){return this.$4.get_item(0).get_id();},get_nickname:function(){var $0=String.Empty;var $1=this.$19();if($1!=null){$0=$1.get_$9().nickname||String.Empty;}return $0;},set_nickname:function(value){var $0=this.$19();if($0==null){return;}if(!$0.get_$8()||this.get_$2C()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$12);}if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(!Microsoft.Live.Messenger.Contact.isNicknameValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$32,'value');}if($0.get_$9().nickname!==value){this.$0.$66($0,value);}return value;},get_cid:function(){if(this.$5.get_count()>0){var $0=this.$5.get_item(0);if($0.get_network().get_$1B()){return $0.get_cid();}}if(this.$4.get_item(0).get_network().get_$1B()){return this.$4.get_item(0).get_$9().cid;}return null;},get_applicationDisplayName:function(){return this.$8;},set_applicationDisplayName:function(value){if(this.$0!=null){this.$0.$6F([3,0]);}if(!this.get_isApplicationContact()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$39);}if(!Microsoft.Live.Messenger.IMAddressPresence.isDisplayNameValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$13,'value');}this.$25(value);return value;},get_applicationPersonalMessage:function(){return this.$9;},set_applicationPersonalMessage:function(value){if(this.$0!=null){this.$0.$6F([3,0]);}if(!this.get_isApplicationContact()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$39);}if(!Microsoft.Live.Messenger.IMAddressPresence.isPersonalMessageValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$22,'value');}this.$26(value);return value;},get_applicationDisplayPictureUrl:function(){return this.$A;},set_applicationDisplayPictureUrl:function(value){if(this.$0!=null){this.$0.$6F([3,0]);}if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(value.toString().length>Microsoft.Live.Messenger.M$14.get_$F()){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3D,'value');}this.$27(value);return value;},get_profileUrl:function(){if(this.$4.get_item(0).get_network().get_$1B()){return this.$4.get_item(0).get_profileUrl();}return null;},get_isApplicationContact:function(){return ((this.$10&32)!==0);},set_isApplicationContact:function(value){if(this.get_isApplicationContact()!==value){var $0=this.get_$4A();if($0!=null){if(value){$0.$D(32,0);}else{$0.$D(0,32);}}}return value;},get_isInApplication:function(){return this.$C;},get_isEmailOnlyContact:function(){return (this.$5.get_count()===0);},get_isIdentityVerified:function(){return this.$15;},get_applicationContactListEnabled:function(){return this.$B;},set_applicationContactListEnabled:function(value){if(value&&!this.get_isApplicationContact()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$39);}this.$2B(value);return value;},appearOfflineTo:function(){if(!this.get_$47()){this.$0.$67([this],1,String.Empty,null);}},appearOnlineTo:function(){if(this.get_$2A().get_presence().get_status()===2){this.get_$2A().appearOnlineToContacts([this]);}else if(this.get_$47()){this.$0.$67([this],2,String.Empty,null);}if(this.get_isContact()&&this.get_isBlocked()){this.$0.get_blockedContacts().remove(this);}},$2B:function($p0){if(this.$B!==$p0){this.$B=$p0;this.$23();this.$4F('ApplicationContactListEnabled');}},get_isOnline:function(){return (this.get_currentAddress()==null)?false:this.get_currentAddress().get_isOnline();},get_$2C:function(){return (this.get_currentAddress()!=null)&&(this.get_currentAddress().get_$12().type===11);},get_$2D:function(){return this.$12;},get_$2E:function(){for(var $0=0;$0<this.get_addresses().get_count();$0++){if(!String.isNullOrEmpty(this.get_addresses().get_item($0).get_cid())){return this.get_addresses().get_item($0);}}return null;},$2F:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_applicationId()===this.$0.get_applicationId()){this.$25($0.get_applicationDisplayName());this.$26($0.get_applicationPersonalMessage());this.$27($0.get_applicationDisplayPictureUrl());}}this.$28();},$30:function($p0,$p1){if($p0.get_applicationId()===this.$0.get_applicationId()){switch($p1){case 'ApplicationDisplayName':this.$25($p0.get_applicationDisplayName());break;case 'ApplicationDisplayPicture':this.$27($p0.get_applicationDisplayPictureUrl());break;case 'ApplicationPersonalMessage':this.$26($p0.get_applicationPersonalMessage());break;}}this.$28();},$31:function(){if(this.$0.get_$2F().$9(this)){this.$4F('IsOnline');}},$32:function(){this.set_currentAddress(this.$4D());},$33:function(){this.$41();},$34:function(){this.$4F('IsAppearOfflineTo');for(var $0=0;$0<this.get_addresses().get_count();$0++){this.get_addresses().get_item($0).$18();}},get_$35:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$5);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_type()===1){return true;}}return false;},block:function(){if(!this.get_isBlocked()){this.$0.get_blockedContacts().add(this);}},allow:function(){if(!this.get_isAllowed()){this.$0.get_allowedContacts().add(this);}},get_emailAddress:function(){if(this.$0==null){return null;}if(this.$0.get_identity().get_$1C().authType!==1){return null;}for(var $0=0;$0<this.$4.get_count();$0++){var $1=this.$4.get_item($0);if($1.get_$9().emailAddress!=null){return $1.get_$9().emailAddress.address;}}return null;},get_displayName:function(){return this.$6;},get_firstName:function(){return this.$13;},get_lastName:function(){return this.$14;},get_fullName:function(){return Microsoft.Live.Messenger.Contact.$38(this.$13,this.$14);},get_$36:function(){return ((this.$0!=null)&&this.$0.get_$2C())||this.get_$49()==null||this.get_isEmailOnlyContact();},get_linkedContacts:function(){return this.$4;},get_addresses:function(){return this.$5;},get_presence:function(){if(this.$E==null){this.$E=new Microsoft.Live.Messenger.ContactPresence(this);}return this.$E;},get_currentAddress:function(){return this.$D;},set_currentAddress:function(value){if(value!==this.$D){this.$51(this.$D,value);this.$D=value;this.$4F('CurrentAddress');if(this.$D!=null){this.get_presence().$7();}else{}this.$42(String.Empty,7,false);this.$41();}return value;},get_groups:function(){return MSH.CollectionHelper.toArray(this.$F);},$3A:function($p0){var $0=this.get_isFavorite();this.$F.add($p0);$p0.get_contacts().$C(this);this.$52($0);},$3B:function($p0){var $0=this.get_isFavorite();this.$F.remove($p0);$p0.get_contacts().$D(this);this.$52($0);},$3C:function(){var $0=this.get_isFavorite();var $enum1=ss.IEnumerator.getEnumerator(this.$F);while($enum1.moveNext()){var $1=$enum1.get_current();$1.get_contacts().$D(this);}this.$F.clear();this.$52($0);},$3D:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this.$5);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_type()===$p0){return true;}}return false;},$3E:function($p0){return this.$F.contains($p0);},get_isContact:function(){return ((this.$10&1)!==0);},$3F:function($p0){if($p0!=null){var $0=this.get_$49();if($0!=null){if($0.get_$9().nickname!==$p0){$0.get_$9().nickname=$p0;this.$4F('Nickname');this.$42($p0,6,false);}}}},$40:function($p0){this.get_presence().$7();if(!$p0.get_network().get_$1A()){this.$42(String.Empty,7,false);}},$41:function(){var $0=true;if(this.$D!=null){$0=this.$D.get_isIdentityVerified();}if($0!==this.$15){this.$15=$0;this.$4F('IsIdentityVerified');}},$42:function($p0,$p1,$p2){var $0=this.$6;var $1=this.$7;if(this.$7<=$p1){if(!String.isNullOrEmpty($p0)){$0=$p0;$1=$p1;}else{var $2=null;if(this.get_$36()){$2=this.get_fullName();}if(!String.isNullOrEmpty(this.get_nickname())){$0=this.get_nickname();$1=6;}else if(!String.isNullOrEmpty($2)){$0=$2;$1=5;}else if(!String.isNullOrEmpty(this.get_applicationDisplayName())){$0=this.get_applicationDisplayName();$1=4;}else{$2=this.get_fullName();if(this.get_isEmailOnlyContact()){if(!String.isNullOrEmpty($2)){$0=$2;$1=5;}else{var $3=this.get_emailAddress();if(!String.isNullOrEmpty($3)){$0=$3;$1=1;}else{$0=String.Empty;$1=0;}}}else{var $4=null;if(!$p2){$4=this.$1A();}if($4!=null){$0=$4.get_presence().get_displayName();$1=3;}else if(!String.isNullOrEmpty($2)){$0=$2;$1=5;}else if(!String.isNullOrEmpty(this.$5.get_item(0).get_address())){$0=this.$5.get_item(0).get_address();$1=2;}else{$0=String.Empty;$1=0;}}}}}if((this.$7!==$1)||(this.$6!==$0)){this.$6=$0;this.$7=$1;if(!$p2){if(this.$0!=null){this.$0.get_$2F().$A(this);}if(this.get_isApplicationContact()){if(this.$0!=null){this.$0.get_applicationContacts().$1E(this);}if(this.$2!=null){this.$2.get_contacts().$1E(this);}}this.$4F('DisplayName');}return true;}return false;},$43:function($p0,$p1){var $0=this.$10;var $1=(($0^$p0)&$p0);$0|=$p0;$1|=($0&$p1);$0&=~$p1;if($1!==0){this.$10=$0;this.$1C($1);return true;}return false;},$44:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.get_current();var $1=this.$45($0);if($1!=null){$1.$C($0);}}},$45:function($p0){for(var $0=0;$0<$p0.addresses.length;$0++){var $1=$p0.addresses[$0];var $2=this.$46($1);if($2!=null){return $2;}}return null;},$46:function($p0){for(var $0=0;$0<this.$5.get_count();$0++){var $1=this.$5.get_item($0);if(MSH.ContactHelper.areIMAddressesEqual($1.get_$12(),$p0)){return $1.get_linkedContact();}}return null;},get_isFavorite:function(){if(this.$0==null){return false;}var $0=this.$0.get_groups().get_favorites();if($0==null){return false;}return $0.get_contacts().$B(this);},get_isAllowed:function(){return ((this.$10&2)!==0);},get_isBlocked:function(){return ((this.$10&4)!==0);},get_isAppearOfflineTo:function(){if(this.get_$2A()==null){return false;}if(this.get_$2A().get_presence().get_status()===2){return true;}return this.get_$47();},get_$47:function(){return Microsoft.Live.Messenger.Contact.$37(this.$10);},get_$48:function(){return ((this.$10&16)!==0);},get_$49:function(){for(var $0=0;$0<this.$4.get_count();$0++){var $1=this.$4.get_item($0);if(!$1.get_network().get_$1A()){return $1;}}return null;},get_$4A:function(){var $0=this.$4.get_item(0);if($0.get_network().get_$1B()){return $0;}return null;},get_$4B:function(){if(this.$5.get_count()>0){var $0=this.$5.get_item(0);if($0.get_network().get_$1B()){return $0;}}return null;},add_propertyChanged:function(value){this.$4C=ss.Delegate.combine(this.$4C,value);},remove_propertyChanged:function(value){this.$4C=ss.Delegate.remove(this.$4C,value);},$4C:null,addAddress:function($p0,$p1){if(this.$3D($p1.get_type())){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$2C,'address');}var $0=this.get_$49();if($0==null||$p1.get_$12().type===13){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$10);}$0.get_$B().add($p1);$p0.$C($p1);$p0.$15();},removeAddress:function($p0,$p1){var $0=this.get_$49();if($0==null||$p1.get_$12().type===13){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$10);}$0.get_$B().remove($p1);$p0.$D($p1);},$4D:function(){if(this.$5.get_count()===0){return null;}var $0=null;var $1=null;var $2=null;var $3=null;var $4=null;for(var $5=0;$5<this.$5.get_count();$5++){var $6=this.$5.get_item($5);if($6.get_isOnline()){if($1==null){$1=$6;}if($6.get_$F()&&$0==null){$0=$6;break;}}if($6.get_network().get_$1C()&&$2==null){$2=$6;}if($6.get_network().get_$1B()&&$3==null){$3=$6;}if($6.get_network().get_$1D()&&$4==null){$4=$6;}}if($0!=null){return $0;}else if($1!=null){return $1;}else if($2!=null){return $2;}else if($3!=null){return $3;}else if($4!=null){return $4;}else{return this.$5.get_item(0);}},$4E:function($p0,$p1){this.set_currentAddress(this.$4D());},$4F:function($p0){if(this.$4C!=null){this.$4C.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},add_currentAddressChanging:function(value){this.$50=ss.Delegate.combine(this.$50,value);},remove_currentAddressChanging:function(value){this.$50=ss.Delegate.remove(this.$50,value);},$50:null,$51:function($p0,$p1){if(this.$50!=null){this.$50.invoke(this,new Microsoft.Live.Messenger.AddressChangingEventArgs($p0,$p1));}},$52:function($p0){this.$4F('Groups');if($p0!==this.get_isFavorite()){this.$4F('IsFavorite');}}}
Microsoft.Live.Messenger.ContactPresence=function(contact){this.$0=contact;var $0=contact.get_currentAddress();if($0!=null){var $1=contact.get_currentAddress().get_presence();this.$1=$1.get_status();this.$2=$1.get_personalMessage();this.$3=$1.get_displayPictureUrl();this.$4=$1.get_media();}else{this.$1=0;this.$2=String.Empty;this.$3=null;this.$4=null;}}
Microsoft.Live.Messenger.ContactPresence.prototype={$0:null,$1:0,$2:null,$3:null,$4:null,get_contact:function(){return this.$0;},get_status:function(){return this.$1;},get_statusText:function(){return Microsoft.Live.Messenger.IMAddressPresence.$7(this.$1);},get_personalMessage:function(){return this.$2;},get_displayPictureUrl:function(){return this.$3;},get_media:function(){return this.$4;},createPersonalMessageElement:function(){var $0=this.get_contact().get_currentAddress();if($0!=null){return $0.get_presence().createPersonalMessageElement();}else{var $1=this.$2||String.Empty;$1=MSH.RegexHelper.replace('(\\r?\\n)+',$1,' ','g');return Microsoft.Live.Messenger.MessengerUtility.emoticonEncode($1);}},createMediaElement:function(){if(this.$4==null){return document.createElement('span');}return this.$4.createTextElement();},add_propertyChanged:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_propertyChanged:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,$6:function($p0){if(this.$5!=null){this.$5.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$7:function(){var $0=this.$0.get_currentAddress().get_presence();if(this.get_status()!==$0.get_status()){this.$1=$0.get_status();this.$6('Status');}var $1=this.$8();if(this.get_personalMessage()!==$1){this.$2=$1;this.$6('PersonalMessage');}var $2=this.$9();if(this.$3!==$2){this.$3=$2;this.$6('DisplayPictureUrl');}var $3=this.$A();if(this.$4!==$3){this.$4=$3;this.$6('Media');}},$8:function(){var $0=null;for(var $1=0;$1<this.$0.get_addresses().get_count();$1++){$0=this.$0.get_addresses().get_item($1).get_presence().get_personalMessage();if(!String.isNullOrEmpty($0)){break;}}return $0;},$9:function(){var $0=null;for(var $1=0;$1<this.$0.get_linkedContacts().get_count();$1++){$0=this.$0.get_linkedContacts().get_item($1).get_displayPictureUrl();if($0!=null){break;}}return $0;},$A:function(){var $0=null;for(var $1=0;$1<this.$0.get_addresses().get_count();$1++){$0=this.$0.get_addresses().get_item($1).get_presence().get_media();if($0!=null){break;}}return $0;}}
Microsoft.Live.Messenger.M$18=function(user,roleList){this.$0=user;this.$1=roleList;if(roleList===2){this.$2=4;}if(roleList===4){this.$2=2;}}
Microsoft.Live.Messenger.M$18.prototype={$0:null,$1:0,$2:0,$3:null,canAddContact:function($p0){var $0=this.$0.get_services();switch(this.$1){case 2:case 4:case 64:if($p0.get_$2C()){return false;}if(($0===2)||($0===1)){return false;}break;case 32:case 1:if($0===1){return false;}break;}return true;},canRemoveContact:function($p0){var $0=this.$0.get_services();switch(this.$2){case 2:case 4:case 64:if(($0===2)||($0===1)){return false;}break;case 32:case 1:if($0===1){return false;}break;}return true;},addContact:function($p0,$p1){if($p1.get_isEmailOnlyContact()||$p1.get_$2D()){return;}if($p1.get_$2C()){this.$0.addContact($p1.get_cid());}else{for(var $0=0;$0<$p1.get_linkedContacts().get_count();$0++){var $1=$p1.get_linkedContacts().get_item($0);if(!$1.get_network().get_$1A()){this.$0.$65($1,this.$1,this.$2);}}}},removeContact:function($p0,$p1){if($p1.get_$2C()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$12);}for(var $0=0;$0<$p1.get_linkedContacts().get_count();$0++){var $1=$p1.get_linkedContacts().get_item($0);if(!$1.get_network().get_$1A()){this.$0.$65($1,this.$2,this.$1);}}},containsContact:function($p0){switch(this.$1){case 1:return $p0.get_isContact();case 2:return $p0.get_isAllowed();case 4:return $p0.get_isBlocked();case 64:return $p0.get_isAppearOfflineTo();default:return this.$3.$B($p0);}},setCollection:function($p0){this.$3=$p0;},get_capacity:function(){var $0=this.$0.get_$2D().addressBook;switch(this.$1){case 2:return $0.maximumAllowedCount;case 4:return $0.maximumBlockedCount;case 1:return $0.maximumContactCount;case 64:return $0.maximumContactCount;default:return 0;}}}
Microsoft.Live.Messenger.ContactCollection=function(user,owner){Microsoft.Live.Messenger.ContactCollection.initializeBase(this);this.$13=owner;this.$14=user;this.$13.setCollection(this);}
Microsoft.Live.Messenger.ContactCollection.prototype={$13:null,$14:null,get_capacity:function(){return this.$13.get_capacity();},add:function(contact){if(contact==null){throw Microsoft.Live.Messenger.M$A.$0('contact');}if(this.$B(contact)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$D,'contact');}if(!this.$13.canAddContact(contact)){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$38);}this.$13.addContact(this,contact);},remove:function(contact){if(contact==null){throw Microsoft.Live.Messenger.M$A.$0('contact');}if(!this.$B(contact)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$E,'contact');}if(!this.$13.canRemoveContact(contact)){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$38);}this.$13.removeContact(this,contact);},findByAddress:function(address){if(address==null){throw Microsoft.Live.Messenger.M$A.$0('address');}if(address.get_$C()!==this.$14){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$1F,'address');}if(this.get_$5().contains(address.get_contact())){return address.get_contact();}return null;},findByCid:function(cid){if(String.isNullOrEmpty(cid)){throw Microsoft.Live.Messenger.M$A.$0('cid');}var $0=MC.$create_IMAddressInfo(cid,11,0);var $1=this.$14.$47($0);if($1!=null){return this.findByAddress($1);}return null;},findById:function(id){if(String.isNullOrEmpty(id)){throw Microsoft.Live.Messenger.M$A.$1('id',id);}var $0=this.$14.findContactById(id);if($0!=null){if(this.$13.containsContact($0)){return $0;}}return null;},find:function(address,addressType){if(String.isNullOrEmpty(address)){throw Microsoft.Live.Messenger.M$A.$0('address');}for(var $0=0;$0<this.get_count();$0++){var $1=this.get_$5()[$0];for(var $2=0;$2<$1.get_addresses().get_count();$2++){var $3=$1.get_addresses().get_item($2);if($3.$16(address,addressType)){return $1;}}}return null;},get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.M$19=function(application,user){this.$1={};this.$0={};this.$2=[];this.$3=application;this.set_$8(user);MSH.PerfCollector.get_instance().registerStatusCollector(this);}
Microsoft.Live.Messenger.M$19.$6=function($p0){var $0=null;if(!Object.keyExists(Microsoft.Live.Messenger.M$19.$5,$p0.get_$F())){Microsoft.Live.Messenger.M$19.$5[$p0.get_$F()]=new Microsoft.Live.Messenger.M$19($p0,null);}$0=Microsoft.Live.Messenger.M$19.$5[$p0.get_$F()];return $0;}
Microsoft.Live.Messenger.M$19.$22=function($p0){return String.isNullOrEmpty($p0)||($p0==='00000000-0000-0000-0000-000000000000')||($p0==='{00000000-0000-0000-0000-000000000000}');}
Microsoft.Live.Messenger.M$19.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,get_$7:function(){return this.$3;},set_$7:function($p0){this.$3=$p0;return $p0;},get_$8:function(){return this.$4;},set_$8:function($p0){if(this.$4!==$p0){if(this.$4!=null){this.$4.get_settings().remove_propertyChanged(ss.Delegate.create(this,this.$1D));this.$4=null;this.$B();}if($p0!=null){this.$4=$p0;this.$C();this.$4.get_settings().add_propertyChanged(ss.Delegate.create(this,this.$1D));}}return $p0;},$9:function($p0,$p1){var $0=MC.ServiceData.createEmpty(2);$0.set_status(1);var $1=[$0.get_info()];var $dict1=this.$1;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};var $3=$2.value;if($3.get_isOnline()&&(!$p0||!$3.get_$B())&&($p1==null||($3.get_network().get_id()===$p1))){$3.$1A($1);}}},$A:function($p0,$p1){var $dict1=this.$0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if((!$1.get_$47()||$p1)&&$1.get_isContact()&&!$1.get_$2D()){if($p0){this.$4.get_appearOfflineToContacts().$C($1);}else{this.$4.get_appearOfflineToContacts().$D($1);}$1.$34();}}},$B:function(){Object.clearKeys(this.$0);this.$2.clear();var $0=[];var $dict1=this.$1;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;if($2.get_contact()!=null&&$2.get_contact().get_isApplicationContact()){$0.add($2);$2.get_contact().set_$2A(null);}}Object.clearKeys(this.$1);var $enum3=ss.IEnumerator.getEnumerator($0);while($enum3.moveNext()){var $3=$enum3.get_current();this.$1[$3.get_id()]=$3;if(!this.$2.contains($3.get_contact())){this.$2.add($3.get_contact());}}},$C:function(){var $dict1=this.$1;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if($1.get_contact()!=null){$1.get_contact().set_$2A(this.$4);}else{$1.set_$C(this.$4);}}},$D:function($p0){var $0=new Microsoft.Live.Messenger.IMAddress(this.$4,$p0);this.$E($0);return $0;},$E:function($p0){this.$1[$p0.get_id()]=$p0;if($p0.get_$12().type===1&&!String.isNullOrEmpty($p0.get_$12().cid)&&!String.isNullOrEmpty($p0.get_$12().address)){var $0=MSH.ContactHelper.getIMAddressInfoKey($p0.get_$12());this.$1[$0]=$p0;}},$F:function($p0,$p1){var $0=null;var $1=this.$4.get_identity().get_liveId();for(var $2=0;$2<$p0.length;$2++){var $3=$p0[$2].addresses;var $4=$3.length;for(var $5=0;$5<$4;$5++){if(($3[$5].address===$1)&&($3[$5].type===1)){$0=this.$19($p0);break;}}if($0!=null){break;}}if($0==null){$0=this.$1C($p0,true);}else{$0.$44($p0);}if($p1!=null){for(var $6=0;$6<$p1.length;$6++){var $7=$p1[$6];$0.$3A($7);}}},$10:function($p0){var $0=null;var $1=MSH.ContactHelper.computeIMAddressId($p0);if(Object.keyExists(this.$1,$1)){$0=this.$1[$1];}if($0!=null&&$0.get_$12().type===11&&$p0.type===1){$0.$1E($p0);this.$E($0);}return $0;},$11:function($p0,$p1){return this.$12($p0,$p1);},$12:function($p0,$p1){var $0=this.$10($p1);if($0==null){$0=this.$D($p1);}$0.$17($p0);return $0;},$13:function($p0){var $0=this.$10($p0);if($0==null){$0=this.$D($p0);}if($0.get_contact()==null){this.$1B(MC.$create_ContactInfo(null,null,[$p0]));}return $0;},$14:function($p0){if(!Microsoft.Live.Messenger.M$19.$22($p0)){var $0=MSH.StringHelper.toLowerCase($p0);if(Object.keyExists(this.$0,$0)){return this.$0[$0];}if(Object.keyExists(this.$1,$0)){var $1=this.$1[$0];return $1.get_contact();}}return null;},$15:function($p0){var $0=this.$10($p0);if($0!=null){return $0.get_contact();}return null;},$16:function($p0){var $0=null;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.get_current();$0=this.$15($1);if($0!=null){return $0;}}return null;},$17:function($p0){var $0=this.$14($p0.id);if(($0==null)&&($p0.addresses.length>0)){$0=this.$16($p0.addresses);}return $0;},$18:function($p0){var $0=this.$19($p0);if($0==null){$0=this.$1C($p0,false);}else{$0.$44($p0);}return $0;},$19:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.get_current();var $1=this.$17($0);if($1!=null){return $1;}}return null;},$1A:function($p0){this.$1B(MC.$create_ContactInfo(null,null,[$p0.get_$12()]));},$1B:function($p0){return this.$1C([$p0],false);},$1C:function($p0,$p1){var $0=new Microsoft.Live.Messenger.Contact(this,this.$3,this.$4,$p0,$p1);this.$2.add($0);for(var $1=0;$1<$0.get_linkedContacts().get_count();$1++){var $2=$0.get_linkedContacts().get_item($1);if(!Microsoft.Live.Messenger.M$19.$22($2.get_id())){this.$0[$2.get_id()]=$0;}}return $0;},$1D:function($p0,$p1){if($p1.get_propertyNamePascal()==='DisplayNameMode'){var $enum1=ss.IEnumerator.getEnumerator(this.$2);while($enum1.moveNext()){var $0=$enum1.get_current();if(!String.isNullOrEmpty($0.get_fullName())){$0.$42(String.Empty,7,false);}}}},$1E:function($p0){delete this.$0[$p0];},$1F:function($p0){this.$0[$p0.get_id()]=$p0.get_$A();},$20:function($p0){if(this.$0==null||$p0==null){return null;}var $dict1=this.$0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if($1.get_addresses()==null){continue;}var $enum3=ss.IEnumerator.getEnumerator($1.get_addresses());while($enum3.moveNext()){var $2=$enum3.get_current();if($p0.type===11&&$2.get_cid()===$p0.cid){return $1;}if(MSH.ContactHelper.areIMAddressesEqual($2.get_$12(),$p0)){return $1;}}}return null;},$21:function(){return this.$1;},get_name:function(){return 'User-Contacts-Status';},getStatusText:function(){var $0=new ss.StringBuilder();$0.append('[User-Contacts-Status] ');if(this.$4!=null){$0.append('User status: ');$0.append(Microsoft.Live.Messenger.UserStatus.toString(this.$4.get_status()));$0.append('| Contacts count: ');$0.append(this.$4.get_contacts().get_count());$0.append('| Email-Only contacts count: ');$0.append(this.$4.get_emailOnlyContacts().get_count());$0.append('| Online contacts count: ');$0.append(this.$4.get_onlineContacts().get_count());$0.append('| Offline contacts count: ');$0.append(this.$4.get_offlineContacts().get_count());$0.append('| Groups count: ');$0.append(this.$4.get_groups().get_count());$0.append('| Conversations count: ');$0.append(this.$4.get_conversations().get_count());}return $0.toString();}}
Microsoft.Live.Messenger.Conversation=function(user,entity){if(user==null){throw Microsoft.Live.Messenger.M$A.$0('user');}if(entity==null){throw Microsoft.Live.Messenger.M$A.$0('address');}user.$6E();var $0=null;if(Type.canCast(entity,Microsoft.Live.Messenger.IMAddress)){$0=entity;}else if(Type.canCast(entity,Microsoft.Live.Messenger.Contact)){var $1=entity;$0=$1.get_currentAddress();}else{throw Microsoft.Live.Messenger.M$A.$5('entity');}if($0.get_$C()!==user){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$1F,'address');}if($0.get_$B()){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$C,'address');}if(!String.isNullOrEmpty(user.get_conversations().get_$18())){this.id=user.get_conversations().get_$18();user.get_conversations().set_$18(String.Empty);}else{this.id=$0.get_$15();}this.$1=user;this.$C=$0.get_network();if(user.get_conversations().get_$17()!=null){this.$2=user.get_conversations().get_$17();user.get_conversations().set_$17(null);}else{this.$2=user.get_address();}this.$6=new Microsoft.Live.Messenger.MessageCollection();this.$6.add_collectionChanged(ss.Delegate.create(this,this.$18));this.$7=$0.get_$12().type===11;this.$9={};this.$4=new Microsoft.Live.Messenger.IMAddressCollection(this);this.$4.add_collectionChanged(ss.Delegate.create(this,this.$19));this.$4.$C($0);this.$4.$C(user.get_address());this.$5=new Microsoft.Live.Messenger.TypingIMAddressCollection(10000);this.$A=MSH.DateTimeHelper.minValue;this.$B=user.get_conversations().get_$19();user.get_conversations().$C(this);this.$16();}
Microsoft.Live.Messenger.Conversation.$1F=function($p0,$p1,$p2){var $enum1=ss.IEnumerator.getEnumerator($p0.get_conversations());while($enum1.moveNext()){var $1=$enum1.get_current();if($1.id===$p1){return $1;}}var $0=$p0.$6C($p2[0],$p1);for(var $2=1;$2<$p2.length;$2++){$0.$4.$C($p2[$2]);}return $0;}
Microsoft.Live.Messenger.Conversation.prototype={$1:null,$2:null,id:null,$3:false,$4:null,$5:null,$6:null,$7:false,$8:false,$9:null,$A:null,$B:false,$C:null,get_user:function(){return this.$1;},get_network:function(){return this.$C;},get_roster:function(){return this.$4;},get_creator:function(){return this.$2;},get_typingAddresses:function(){return this.$5;},get_history:function(){return this.$6;},get_closed:function(){return this.$8;},get_reloaded:function(){return this.$B;},$D:function($p0){this.$B=$p0;},get_$E:function(){if(this.$8||(this.$4.get_count()!==2)){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_$B()){continue;}if(MSH.ContactHelper.getIMAddressInfoKey($0.get_$12())!==this.id){return false;}if(!$0.get_isOnline()&&!$0.get_$E()&&$0.get_isContact()){return true;}}return false;},get_$F:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if(!$0.get_capabilities().get_$3()){return false;}}return true;},get_id:function(){return this.id;},get_supportsMultiparty:function(){if(this.$8){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if(!$0.get_capabilities().get_supportsMultipartyConversations()){return false;}}return true;},get_supportsOfflineMessages:function(){if(this.$8||this.$4.get_count()!==2){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_$B()){continue;}if(!$0.get_capabilities().get_supportsOfflineMessages()||($0.get_$1D().type===11)){return false;}}return true;},get_hasUnreadMessages:function(){return this.$3;},set_hasUnreadMessages:function(value){if(this.$3!==value){this.$1D(value);this.$1.$75(this.id,value);}return value;},notifyUserTyped:function(){this.$21();if(!this.get_$F()||this.get_$E()){return;}var $0=Date.get_now();if(MSH.DateTimeHelper.exceeded(this.$A,$0,10000)){this.$A=$0;var $1=MC.$create_MessageInfo(255,null);$1.sender=this.$1.get_address().get_$12();this.$1.$74(this.id,$1,null);}this.set_hasUnreadMessages(false);},inviteAddress:function(address,userState){this.$21();if(address==null){throw Microsoft.Live.Messenger.M$A.$0('address');}if(!this.get_supportsMultiparty()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$1C);}if(this.$15(address)){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$1B);}this.$1.$73(this.id,address.get_$1D(),userState);},inviteContact:function(contact,userState){if(contact==null){throw Microsoft.Live.Messenger.M$A.$0('contact');}this.inviteAddress(contact.get_currentAddress(),userState);this.$9[contact.get_currentAddress().get_$14()]=contact;},sendMessage:function(message,userState){this.$21();if(message==null){throw Microsoft.Live.Messenger.M$A.$0('message');}if(this.$17()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$47);}if(this.get_$E()&&this.get_supportsOfflineMessages()){if(!message.get_$5()){return;}message.set_isOfflineMessage(true);}var $0=message.$7(this.$1.get_address(),this);if(this.$7){var $1=this.$1.get_displayName();if(!String.isNullOrEmpty(this.$1.get_applicationName())){$1=String.format(Microsoft.Live.Messenger.M$B.$2,this.$1.get_displayName(),this.$1.get_applicationName());}$0.displayNameOverride=$1;}this.$1.$74(this.id,$0,userState);this.$6.$14(message);this.set_hasUnreadMessages(false);},close:function(){if(this.$8){return;}this.$1.$76(this.id);this.$20();},supportsMessageType:function(messageType){if(this.$8){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if(!$0.get_capabilities().supportsMessageType(messageType)){return false;}}return true;},supportsApplicationMessageType:function(id){if(this.$8){return false;}if(this.$1.get_messageFactory()==null){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if(!$0.$11(id)){return false;}}return true;},isTextMessageValid:function(textMessage){return Microsoft.Live.Messenger.TextMessage.isValid(this,textMessage);},add_inviteAddressCompleted:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_inviteAddressCompleted:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,add_inviteContactCompleted:function(value){this.$11=ss.Delegate.combine(this.$11,value);},remove_inviteContactCompleted:function(value){this.$11=ss.Delegate.remove(this.$11,value);},$11:null,add_sendMessageFailed:function(value){this.$12=ss.Delegate.combine(this.$12,value);},remove_sendMessageFailed:function(value){this.$12=ss.Delegate.remove(this.$12,value);},$12:null,add_messageReceived:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_messageReceived:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,onMessageReceived:function(e){if(this.$13!=null){this.$13.invoke(this,e);}this.$6.$15(e.get_message());},onInviteAddressCompleted:function(e){if(this.$10!=null){this.$10.invoke(this,e);}},onInviteContactCompleted:function(e){if(this.$11!=null){this.$11.invoke(this,e);}},onSendMessageFailed:function(e){if(this.$12!=null){this.$12.invoke(this,e);}},onPropertyChanged:function(e){if(this.$14!=null){this.$14.invoke(this,e);}},dispose:function(){this.close();},addAddress:function($p0,$p1){throw new Error(Microsoft.Live.Messenger.M$D.$F);},removeAddress:function($p0,$p1){throw new Error(Microsoft.Live.Messenger.M$D.$F);},add_propertyChanged:function(value){this.$14=ss.Delegate.combine(this.$14,value);},remove_propertyChanged:function(value){this.$14=ss.Delegate.remove(this.$14,value);},$14:null,$15:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.equals($p0)){return true;}}return false;},$16:function(){var $0=this.$4.get_item(0);if($0.get_$B()){$0=this.$4.get_item(1);}this.$1.$72(this.id,$0);},$17:function(){if(this.$8||(this.$4.get_count()!==2)){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$4);while($enum1.moveNext()){var $0=$enum1.get_current();if(!$0.get_$B()&&$0.get_contact().get_$47()){return true;}}return false;},$18:function($p0,$p1){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('History'));},$19:function($p0,$p1){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('Roster'));},$1A:function($p0){if($p0.get_$12().type===11){return $p0.get_$12();}if($p0.get_contact()==null||String.isNullOrEmpty($p0.get_contact().get_cid())){return $p0.get_$12();}return MC.$create_IMAddressInfo($p0.get_contact().get_cid(),11,$p0.get_contact().get_currentAddress().get_$12().roleLists);},$1B:function($p0,$p1,$p2){if(Object.keyExists(this.$9,$p1.get_$14())){var $0=this.$9[$p1.get_$14()];delete this.$9[$p1.get_$14()];var $1=0;if($p0===1){$1=1;}this.onInviteContactCompleted(new Microsoft.Live.Messenger.InviteContactCompletedEventArgs($1,$0,$p2));}else{this.onInviteAddressCompleted(new Microsoft.Live.Messenger.InviteAddressCompletedEventArgs($p0,$p1,$p2));}},$1C:function(){if(this.$8){return;}this.$20();},$1D:function($p0){if(this.$3!==$p0){this.$3=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('HasUnreadMessages'));}},$1E:function($p0){if(this.id!==$p0){this.id=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('Id'));}},$20:function(){this.$8=true;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('Closed'));this.$1.get_conversations().$D(this);},$21:function(){if(this.$8){throw Microsoft.Live.Messenger.M$A.$4('Conversation');}}}
Microsoft.Live.Messenger.ConversationCollection=function(user){Microsoft.Live.Messenger.ConversationCollection.initializeBase(this);this.$13=user;this.$14=null;this.$15=String.Empty;this.$16=false;}
Microsoft.Live.Messenger.ConversationCollection.prototype={$13:null,$14:null,$15:null,$16:false,get_$17:function(){return this.$14;},set_$17:function($p0){this.$14=$p0;return $p0;},get_$18:function(){return this.$15;},set_$18:function($p0){this.$15=$p0;return $p0;},get_$19:function(){return this.$16;},create:function(entity){if(entity==null){throw Microsoft.Live.Messenger.M$A.$0('address');}this.$13.$6F([3,0]);var $0=null;if(Type.canCast(entity,Microsoft.Live.Messenger.IMAddress)){$0=entity;}else if(Type.canCast(entity,Microsoft.Live.Messenger.Contact)){var $2=entity;if($2.get_isEmailOnlyContact()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$42);}if($2.get_isApplicationContact()){$0=$2.get_$2E();}else{$0=$2.get_currentAddress();}}else{throw Microsoft.Live.Messenger.M$A.$5('entity');}if($0.get_$B()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$C);}var $1=this.$26($0);if($1==null){$1=this.$13.$6B($0);}return $1;},createByCid:function(cid){if(String.isNullOrEmpty(cid)){throw Microsoft.Live.Messenger.M$A.$1('cid',cid);}var $0=this.$13.get_contacts().findByCid(cid);if($0==null){$0=this.$13.get_applicationContacts().findByCid(cid);}return ($0!=null)?this.create($0):null;},$1A:function(){this.$16=true;},$1B:function(){this.$16=false;},$1C:function(){this.$9();while(this.get_count()>0){this.get_item(0).$1C();}this.$A();},$1D:function($p0,$p1,$p2,$p3){var $0=this.$27($p0);if($0==null){return;}var $1=this.$13.$49($p2);$0.$1B($p1,$1,$p3);},$1E:function($p0,$p1){var $0=this.$27($p0);if($0==null){return;}var $1=this.$13.$49($p1);$0.get_roster().$C($1);},$1F:function($p0,$p1){var $0=this.$27($p0);if($0==null){return;}if($0.get_roster().get_count()>=3){var $1=this.$13.$49($p1);$0.get_roster().$D($1);}},$20:function($p0){var $0=this.$27($p0);if($0==null){return;}$0.$1C();},$21:function($p0,$p1){var $0=this.$27($p0);if($0==null){return;}$0.$1D($p1);},$22:function($p0,$p1){var $0=this.$27($p0);if($0==null){return;}var $1=this.$13.$49($p1.sender);if(!String.isNullOrEmpty($p1.displayNameOverride)){if($1.get_isAnonymous()||(!$1.get_contact().get_isContact()&&!$1.get_contact().get_isApplicationContact())){$1.get_contact().$42($p1.displayNameOverride,3,false);}}var $2=Microsoft.Live.Messenger.Message.$8(this.$13,$1,$p1);if($2!=null){if(this.$16){$2.$6(true);}$0.onMessageReceived(new Microsoft.Live.Messenger.MessageReceivedEventArgs($2));if($1!=null&&$2.get_type()===1){$0.get_typingAddresses().$17($1);}}},$23:function($p0,$p1){var $0=this.$27($p0);if($0==null){return;}var $1=this.$13.$49($p1);$0.get_typingAddresses().$16($1);},$24:function($p0,$p1,$p2,$p3){var $0=this.$27($p0);if($0==null){return;}var $1=Microsoft.Live.Messenger.Message.$8(this.$13,this.$13.get_address(),$p2);if($1!=null){$0.onSendMessageFailed(new Microsoft.Live.Messenger.SendMessageFailedEventArgs($p1,$1,$p3));}},$25:function($p0,$p1){var $0=this.$27($p0);$0.$1E($p1);},$26:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_roster().get_count()<=2){var $enum2=ss.IEnumerator.getEnumerator($0.get_roster());while($enum2.moveNext()){var $1=$enum2.get_current();if($1.equals($p0)){return $0;}}}}return null;},$27:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_id()===$p0){return $0;}}return null;},get_item:function(index){if((index<0)||(index>=this.get_count())){throw Microsoft.Live.Messenger.M$A.$5('index');}return this.get_$5()[index];}}
Microsoft.Live.Messenger.EmailOnlyContactCollection=function(dictionary){Microsoft.Live.Messenger.EmailOnlyContactCollection.initializeBase(this);this.$13=dictionary;}
Microsoft.Live.Messenger.EmailOnlyContactCollection.prototype={$13:null,findByEmail:function(email){if(String.isNullOrEmpty(email)){throw Microsoft.Live.Messenger.M$A.$1('email',email);}email=MSH.StringHelper.toLowerCase(email);for(var $0=0;$0<this.get_count();$0++){var $1=this.get_$5()[$0];if($1.get_emailAddress()===email){return $1;}}return null;},findByCid:function(cid){if(String.isNullOrEmpty(cid)){throw Microsoft.Live.Messenger.M$A.$0('cid');}for(var $0=0;$0<this.get_count();$0++){var $1=this.get_$5()[$0];if($1.get_cid()===cid){return $1;}}return null;},$14:function($p0){this.$C($p0);},$15:function($p0){this.$D($p0);},get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.Endpoint=function(address,serviceData){this.$0=address;this.$3=serviceData;this.$1=new Microsoft.Live.Messenger.M$26(this.$0,this);this.$2=new Microsoft.Live.Messenger.EndpointPresence(this);}
Microsoft.Live.Messenger.Endpoint.isNameValid=function(name){if(name==null){return false;}return name.trim().length<=Microsoft.Live.Messenger.M$14.get_$10();}
Microsoft.Live.Messenger.Endpoint.prototype={$0:null,$1:null,$2:null,$3:null,id:null,add_propertyChanged:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_propertyChanged:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,get_id:function(){if(this.id==null){this.id=new Microsoft.Live.Messenger.EndpointId(this.$3.id);}return this.id;},get_name:function(){return this.$3.pdEndpointData.get_name()||String.Empty;},set_name:function(value){if(!this.get_$5()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$16);}if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}var $0=value.trim();if(!Microsoft.Live.Messenger.Endpoint.isNameValid($0)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$15,'value');}this.$0.get_$C().$71();if(this.$3.pdEndpointData.get_name()!==$0){var $1=this.$E(4);$1.getEndpointData(this.$3.id).set_name($0);this.$0.get_$C().$5F($1);}return value;},get_imAddress:function(){return this.$0;},get_capabilities:function(){return this.$1;},get_presence:function(){return this.$2;},get_applicationDisplayName:function(){return this.$3.imEndpointData.get_applicationDisplayName();},get_applicationPersonalMessage:function(){return this.$3.imEndpointData.get_applicationPersonalMessage();},get_applicationName:function(){return this.$3.imEndpointData.get_applicationName();},get_applicationDisplayPictureUrl:function(){if(String.isNullOrEmpty(this.$3.imEndpointData.get_applicationDisplayPictureUrl())){return null;}return new Microsoft.Live.Messenger.Uri(this.$3.imEndpointData.get_applicationDisplayPictureUrl());},get_applicationId:function(){return this.$3.imEndpointData.get_applicationId();},get_isInstance:function(){if(!this.$0.get_$B()){return false;}if(this.get_$5()){return true;}if(!Microsoft.Live.Messenger.M$14.get_$13()){return false;}var $0=this.$0.get_$C().get_localEndpoint();if(this.$3.imEndpointData==null||$0.$3.imEndpointData==null){return false;}return (this.$3.imEndpointData.get_domain()===$0.$3.imEndpointData.get_domain()&&this.$3.imEndpointData.get_domain()!==String.Empty);},get_$5:function(){return this.$0.$10(this);},get_$6:function(){return this.$3;},get_$7:function(){return this.$3.imEndpointData.get_presenceExtensions();},get_$8:function(){return (Object.getKeyCount(this.$3.imEndpointData.get_properties())===0)&&(Object.getKeyCount(this.$3.pdEndpointData.get_properties())===0);},get_$9:function(){return (Object.getKeyCount(this.$3.imEndpointData.get_properties())>0);},equals:function(other){if(other==null){return false;}return (this.$3.id===other.$3.id);},$A:function($p0,$p1,$p2,$p3){var $0=this.$E(2);var $1=$0.getEndpointData(this.$3.id);if($p0!=null){$1.set_applicationName($p0);}if($p1!=null){$1.set_applicationDisplayName($p1);}if($p2!=null){$1.set_applicationDisplayPictureUrl($p2);}if($p3!=null){$1.set_applicationPersonalMessage($p3);}this.$0.get_$C().$5F($0);},$B:function($p0,$p1){var $0=this.$3.imEndpointData;var $1=this.$E(2);var $2=$1.getEndpointData(this.$3.id);$2.set_messageExtensions($p0||$0.get_messageExtensions());$2.set_presenceExtensions($p1||$0.get_presenceExtensions());this.$0.get_$C().$5F($1);},$C:function($p0){var $0=false;switch($p0.service){case 2:$0=($0|this.$10($p0))===1;break;case 4:$0=($0|this.$11($p0))===1;break;case 8:$0=($0|this.$12($p0))===1;break;}if(this.$1.$7($p0)){$0=true;this.$F('Capabilities');}if(this.$2.$5($p0)){$0=true;this.$F('Presence');}return $0;},$D:function($p0,$p1){this.$3=this.$0.get_$13().getEndpointSet(this.get_id().toString());if($p0){this.$2.$6(this.$3);return this.$2.get_properties().$16($p1,this.id.toString());}return false;},$E:function($p0){var $0=MC.ServiceEndpointData.createEmpty($p0,this.$3.id);var $1=MC.ServiceData.createEmpty($p0);$1.addEndpoint($0);return $1;},$F:function($p0){if(this.$4!=null){this.$4.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$10:function($p0){var $0=false;var $1=$p0.updatedEndpoints[this.$3.id];var $2=$1.length;for(var $3=0;$3<$2;$3++){var $4=$1[$3];switch($4){case 'ApplicationId':case 'ApplicationName':$0=true;this.$F($4);break;case 'ApplicationDisplayName':case 'ApplicationDisplayPictureUrl':case 'ApplicationPersonalMessage':$0=true;this.$0.get_contact().$30(this,$4);this.$F($4);break;}}return $0;},$11:function($p0){var $0=$p0.updatedEndpoints[this.$3.id];if($0.contains('Name')){this.$F('Name');return true;}return false;},$12:function($p0){var $0=$p0.updatedEndpoints[this.$3.id];return $0.contains('events');}}
Microsoft.Live.Messenger.M$26=function(address,endpoint){Microsoft.Live.Messenger.M$26.initializeBase(this,[address]);this.$C=endpoint;this.$D=this.$C.get_$6().imEndpointData;this.$E=this.$C.get_$6().peEndpointData;}
Microsoft.Live.Messenger.M$26.prototype={$C:null,$D:null,$E:null,get_isOnlineViaMobileDevice:function(){return this.$D.get_isOnlineViaMobileDevice();},get_isOnlineViaWeb:function(){return this.$D.get_isOnlineViaWeb();},get_$6:function(){return this.$D.get_supportsMultipartyConversations();},get_$4:function(){return this.$D.get_supportsApplicationMessages();},get_$5:function(){return this.$D.get_supportsNudges();},$8:function(){var $0=this.$9(this.$E.get_clientVersion());if($0==null){$0=this.$A(this.$D.get_version());}return $0;}}
Microsoft.Live.Messenger.EndpointCollection=function(address){Microsoft.Live.Messenger.EndpointCollection.initializeBase(this);this.$13=address;this.$14=[];this.$15=[];}
Microsoft.Live.Messenger.EndpointCollection.prototype={$13:null,$14:null,$15:null,get_$16:function(){return this.$15;},$17:function($p0){var $0=false;var $dict1=$p0.updatedEndpoints;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.key;var $3=this.$1B($2);if($3!=null){var $4=Object.keyExists($p0.newEndpoints,$2);$0=($0|$3.$D($4,$p0))===1;if(!$4){$0=($0|$3.$C($p0))===1;}$0=($0|this.$1D($3))===1;}else{$3=new Microsoft.Live.Messenger.Endpoint(this.$13,this.$13.get_$13().getEndpointSet($2));$0=($0|this.$1E($3))===1;}}return $0;},$18:function($p0){var $0=false;var $dict1=$p0.deletedEndpoints;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.key;var $3=this.$1B($2);if($3!=null){$3.$D(false,$p0);if($3.get_$8()){$0=($0|this.$1F($3))===1;}else{$0=($0|$3.$C($p0))===1;$0=($0|this.$1D($3))===1;}}}return $0;},$19:function(){var $0=MC.ServiceDataSet.create();var $enum1=ss.IEnumerator.getEnumerator(this.$15);while($enum1.moveNext()){var $1=$enum1.get_current();if(!$1.get_$5()){var $2=$1.get_$6().toServiceDataArray();for(var $3=0;$3<$2.length;$3++){$0.addEndpoint($2[$3]);}}}this.$13.get_$C().$44(this.$13.get_$12(),$0.toArray());},$1A:function(){var $0=MC.ServiceDataSet.create();var $enum1=ss.IEnumerator.getEnumerator(this.$15);while($enum1.moveNext()){var $1=$enum1.get_current();var $2=$1.get_$6().toServiceDataArray();for(var $3=0;$3<$2.length;$3++){$0.addEndpoint($2[$3]);}}this.$13.$1B($0.toArray());},$1B:function($p0){for(var $0=0;$0<this.$15.length;$0++){var $1=this.$15[$0];if($1.get_$6().id===$p0){return $1;}}return null;},$1C:function($p0){if(!$p0.get_$9()){return true;}if(this.$15.length===0||(this.$15.length===1&&$p0===this.$15[0])){return false;}return (!$p0.get_$5()&&$p0.get_isInstance());},$1D:function($p0){var $0=this.$1C($p0);if(this.$14.contains($p0)){if(!$0){this.$14.remove($p0);this.$C($p0);return true;}}else if($0){this.$D($p0);this.$14.add($p0);return true;}return false;},$1E:function($p0){var $0;if(this.$1C($p0)){this.$14.add($p0);$0=false;}else{this.$C($p0);$0=true;}this.$15.add($p0);return $0;},$1F:function($p0){this.$15.remove($p0);if(this.$14.contains($p0)){this.$14.remove($p0);return false;}else{this.$D($p0);return true;}},get_item:function(index){if((index<0)||(index>=this.get_count())){throw Microsoft.Live.Messenger.M$A.$5('index');}return this.get_$5()[index];}}
Microsoft.Live.Messenger.EndpointId=function(id){this.id=id;}
Microsoft.Live.Messenger.EndpointId.prototype={id:null,equals:function(endpointId){return (endpointId!=null&&this.id===endpointId.id);},toString:function(){return this.id||String.Empty;}}
Microsoft.Live.Messenger.EndpointPresence=function(endpoint){this.$0=endpoint;var $0=this.$0.get_$6();this.$1=new Microsoft.Live.Messenger.PresencePropertyCollection(new Array(0),[$0.imEndpointData,$0.pdEndpointData,$0.peEndpointData,$0.cmEndpointData]);this.$2=new Microsoft.Live.Messenger.Presence.PresenceExtensionCollection(endpoint);}
Microsoft.Live.Messenger.EndpointPresence.prototype={$0:null,$1:null,$2:null,add_propertyChanged:function(value){this.$3=ss.Delegate.combine(this.$3,value);},remove_propertyChanged:function(value){this.$3=ss.Delegate.remove(this.$3,value);},$3:null,get_properties:function(){return this.$1;},get_extensions:function(){return this.$2;},get_$4:function(){return this.$0.get_$6().imEndpointData.get_messageExtensions();},$5:function($p0){var $0=false;if($p0.service===2){var $1=$p0.updatedEndpoints[this.$0.get_id().toString()];if($1.contains('PresenceExtensions')&&(this.$0.get_imAddress().get_$C().get_presenceFactory()!=null)){var $2=this.$0.get_$6().imEndpointData.get_presenceExtensions();if(this.$2.$15($2)){$0=true;this.$7('Extensions');}}}if(this.$1.$16($p0,this.$0.get_id().toString())){$0=true;this.$7('Properties');}return $0;},$6:function($p0){this.$1.$17(new Array(0),[$p0.imEndpointData,$p0.pdEndpointData,$p0.peEndpointData,$p0.cmEndpointData]);},$7:function($p0){if(this.$3!=null){this.$3.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}}}
Microsoft.Live.Messenger.Group=function(user,groupInfo){this.$0=user;this.$1=groupInfo;this.$2=new Microsoft.Live.Messenger.ContactCollection(this.$0,this);}
Microsoft.Live.Messenger.Group.prototype={$0:null,$1:null,$2:null,get_name:function(){return this.$1.name;},set_name:function(value){if(String.isNullOrEmpty(value)){throw Microsoft.Live.Messenger.M$A.$1('value',value);}this.$0.$6F([2,3,0]);if(this.$1.name!==value){if(this.$0.get_groups().get_item(value)!=null){throw Microsoft.Live.Messenger.M$A.$2(String.format(Microsoft.Live.Messenger.M$D.$17,value),'value');}if(!this.$0.get_groups().isNameValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$18,'value');}this.$0.$57(this,value);}return value;},get_contacts:function(){return this.$2;},get_isFavorites:function(){return this.$1.isFavorites;},get_isAppearOfflineTo:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$2);while($enum1.moveNext()){var $0=$enum1.get_current();if(!$0.get_isAppearOfflineTo()){return false;}}return true;},get_isAppearOnlineTo:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$2);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_isAppearOfflineTo()){return false;}}return true;},appearOfflineTo:function(){if(!this.$8()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$38);}if(this.get_contacts().get_count()===0){return;}this.$0.$67(this.get_contacts().get_$5(),1,String.Empty,null);},appearOnlineTo:function(){if(!this.$8()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$46);}if(this.get_contacts().get_count()===0){return;}this.$0.appearOnlineToContacts(this.get_contacts());},get_$3:function(){return this.$1;},add_propertyChanged:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_propertyChanged:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,$5:function($p0){if(this.$4!=null){this.$4.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$6:function($p0){MSH.ArrayHelper.sortArrayList(this.$2.get_$5(),$p0);},$7:function($p0){if(this.$1.name!==$p0){this.$1.name=$p0;this.$5('Name');}},$8:function(){var $0=this.$0.get_services();if(($0===2)||($0===1)){return false;}return true;},canAddContact:function($p0){var $0=this.$0.get_services();if(($0===2)||($0===1)){return false;}return $p0.get_isContact();},canRemoveContact:function($p0){var $0=this.$0.get_services();return ($0===3)||($0===0);},addContact:function($p0,$p1){if(!$p1.get_isContact()||$p1.get_$2C()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$12);}this.$0.$63($p1,this);},removeContact:function($p0,$p1){this.$0.$64($p1,this);},containsContact:function($p0){return this.$2.$B($p0);},setCollection:function($p0){},get_capacity:function(){return this.$0.get_$2D().addressBook.maximumContactCount;}}
Microsoft.Live.Messenger.GroupCollection=function(user){Microsoft.Live.Messenger.GroupCollection.initializeBase(this);this.$13=user;}
Microsoft.Live.Messenger.GroupCollection.prototype={$13:null,get_capacity:function(){return this.$13.get_$2D().addressBook.maximumGroupCount;},get_favorites:function(){var $enum1=ss.IEnumerator.getEnumerator(this.get_$5());while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_isFavorites()){return $0;}}return null;},create:function(groupName){if(String.isNullOrEmpty(groupName)){throw Microsoft.Live.Messenger.M$A.$1('groupName',groupName);}if(this.get_item(groupName)!=null){throw Microsoft.Live.Messenger.M$A.$2(String.format(Microsoft.Live.Messenger.M$D.$17,groupName),'groupName');}if(!this.isNameValid(groupName)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$18,'groupName');}this.$13.$6F([2,3,0]);var $0=MC.$create_GroupInfo(Microsoft.Live.Messenger.Guid.newGuid().toString(),groupName,null);var $1=this.$13.$4C($0);this.$13.$56($1);this.$C($1);return $1;},remove:function(group){if(group==null){throw Microsoft.Live.Messenger.M$A.$0('group');}if(!this.$B(group)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$E,'group');}this.$13.$6F([2,3,0]);this.$13.$58(group);this.$D(group);},isNameValid:function(groupName){if(String.isNullOrEmpty(groupName)){return false;}var $0=40;if(groupName.length>$0){return false;}return (this.get_item(groupName)==null);},$14:function(){var $0=this.get_favorites();if($0!=null){$0.$6(ss.Delegate.create(this,function($p1_0,$p1_1){
return Microsoft.Live.Messenger.Contact.$39($p1_0,$p1_1);}));}},get_item:function(key){if(key==null){throw Microsoft.Live.Messenger.M$A.$0('key');}if(Type.canCast(key,String)){var $0=key;if(String.isNullOrEmpty($0)){throw Microsoft.Live.Messenger.M$A.$1('name',$0);}var $1=MC.$create_GroupInfo(Microsoft.Live.Messenger.Guid.newGuid().toString(),$0,null);return this.$13.$4B($1);}else if(Type.canCast(key,Number)){return this.getItem(key);}else{throw Microsoft.Live.Messenger.M$A.$5('key');}}}
Microsoft.Live.Messenger.M$14=function(configInfo){this.$1=configInfo;}
Microsoft.Live.Messenger.M$14.get_$5=function(){return Microsoft.Live.Messenger.M$14.$0;}
Microsoft.Live.Messenger.M$14.get_$6=function(){return Microsoft.Live.Messenger.M$14.$0;}
Microsoft.Live.Messenger.M$14.$8=function($p0){Microsoft.Live.Messenger.M$14.$0=new Microsoft.Live.Messenger.M$14($p0);}
Microsoft.Live.Messenger.M$14.get_$9=function(){return window.location.hostname.toLowerCase();}
Microsoft.Live.Messenger.M$14.$A=function($p0){var $0=Microsoft.Live.Messenger.M$14.get_$5();if($0!=null){var $1=$0.get_$7().displayPictureUrl;if(!String.isNullOrEmpty($1)){return $1.replaceAll('{0}',$p0);}}return null;}
Microsoft.Live.Messenger.M$14.get_$B=function(){if(String.isNullOrEmpty(Microsoft.Live.Messenger.M$14.$3)){Microsoft.Live.Messenger.M$14.$3=Microsoft.Live.Messenger.M$14.get_$14()+'emoticons/';}return Microsoft.Live.Messenger.M$14.$3;}
Microsoft.Live.Messenger.M$14.$C=function($p0){return Microsoft.Live.Messenger.M$14.get_$D()+MSH.StringHelper.toLowerCase($p0)+'.png';}
Microsoft.Live.Messenger.M$14.get_$D=function(){if(String.isNullOrEmpty(Microsoft.Live.Messenger.M$14.$2)){if(MSH.TestingHelper.get_isUnitTest()){Microsoft.Live.Messenger.M$14.$2='http://settings.messenger.live.com/static/2008r2/conversation/img/networkicons/';}else{Microsoft.Live.Messenger.M$14.$2=Microsoft.Live.Messenger.M$14.get_$14()+'networkicons/';}}return Microsoft.Live.Messenger.M$14.$2;}
Microsoft.Live.Messenger.M$14.get_$E=function(){if(String.isNullOrEmpty(Microsoft.Live.Messenger.M$14.$4)){Microsoft.Live.Messenger.M$14.$4=Microsoft.Live.Messenger.M$14.get_$14()+'sharing/';}return Microsoft.Live.Messenger.M$14.$4;}
Microsoft.Live.Messenger.M$14.get_$F=function(){return 256;}
Microsoft.Live.Messenger.M$14.get_$10=function(){return 50;}
Microsoft.Live.Messenger.M$14.get_$11=function(){return 129;}
Microsoft.Live.Messenger.M$14.get_$12=function(){return 0;}
Microsoft.Live.Messenger.M$14.get_$13=function(){return Microsoft.Live.Core.Loader.get_settings().messenger.sameDomainEndpointsAsLocalEnabled;}
Microsoft.Live.Messenger.M$14.get_$14=function(){var $0=Microsoft.Live.Core.Loader.get_settings().messenger.getResourceUrl('resources/images/*.jpg');return $0.substring(0,$0.indexOf('*.jpg'));}
Microsoft.Live.Messenger.M$14.prototype={$1:null,get_$7:function(){return this.$1;}}
Microsoft.Live.Messenger.IMAddress=function(user,addressInfo){this.$0=user;this.$1=addressInfo;this.$5=this.$24();}
Microsoft.Live.Messenger.IMAddress.$1F=function($p0){if(String.isNullOrEmpty($p0)){return 0;}$p0=$p0.trim();if($p0.indexOf('@')>0){return 1;}else if($p0.startsWith('+')){return 4;}else{return 11;}}
Microsoft.Live.Messenger.IMAddress.$20=function($p0){return String.isNullOrEmpty($p0)||$p0.length<256;}
Microsoft.Live.Messenger.IMAddress.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:false,$8:false,$9:null,add_propertyChanged:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_propertyChanged:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,get_address:function(){if(this.$0==null){return String.Empty;}switch(this.$1.type){case 11:case 13:return String.Empty;case 4:return this.$1.address;default:if(this.$0.get_identity().get_$1C().authType!==1){return String.Empty;}else{return this.$1.address;}}},get_type:function(){switch(this.$1.type){case 1:case 11:return 1;case 13:return 13;case 2:return 2;case 32:return 32;case 4:return 4;case 16:return 16;case 8:return 8;default:return 0;}},get_id:function(){return MSH.ContactHelper.computeIMAddressId(this.$1);},get_linkedContact:function(){return this.$6;},get_network:function(){return this.$5;},get_endpoints:function(){if(this.$2==null){this.$2=new Microsoft.Live.Messenger.EndpointCollection(this);}return this.$2;},get_capabilities:function(){if(this.$3==null){this.$3=new Microsoft.Live.Messenger.M$25(this);}return this.$3;},get_cid:function(){if(this.get_type()===1){return this.get_$12().cid;}else{return String.Empty;}},get_presence:function(){if(this.$4==null){this.$4=new Microsoft.Live.Messenger.IMAddressPresence(this);}return this.$4;},get_isOnline:function(){if(this.$4==null){return false;}switch(this.get_presence().get_status()){case 2:case 0:return false;default:return true;}},get_supportsAppearOfflineTo:function(){return !this.$5.get_$1A()&&this.$6.get_$8();},get_isFederated:function(){switch(this.$1.type){case 1:case 11:return false;default:return true;}},get_isIdentityVerified:function(){return this.get_$13().peServiceData.get_isIdentityVerified();},get_isContact:function(){return ((this.$1.roleLists&1)!==0);},get_isAllowed:function(){return ((this.$1.roleLists&2)!==0);},get_isBlocked:function(){return ((this.$1.roleLists&4)!==0);},get_isAppearOfflineTo:function(){if(this.get_$C()==null){return false;}if(this.get_$C().get_presence().get_status()===2){return true;}return Microsoft.Live.Messenger.Contact.$37(this.$1.roleLists);},get_networkIconUrl:function(){return this.get_network().get_iconUrl();},get_contact:function(){return (this.$6==null)?null:this.$6.get_$A();},get_$B:function(){return (this.$0!=null&&this.$0.get_address()===this);},get_$C:function(){return this.$0;},set_$C:function($p0){if(this.$0!==$p0){if(this.$0!=null){this.$7=false;this.$8=false;this.$1.id=null;this.$1.roleLists&=~32;this.get_endpoints().$1A();}this.$0=$p0;}return $p0;},get_$D:function(){return ((this.$1.roleLists&32)!==0);},get_$E:function(){switch(this.$1.type){case 8:case 16:case 4:return true;default:return false;}},get_isAnonymous:function(){return this.$1.address.endsWith('@anonymous.messenger.live.com');},get_$F:function(){if(this.$4==null){return false;}switch(this.get_presence().get_status()){case 1:case 3:case 7:return true;default:return false;}},$10:function($p0){return (this.$0!=null&&this.$0.get_localEndpoint()===$p0);},$11:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this.get_endpoints());while($enum1.moveNext()){var $0=$enum1.get_current();if(MSH.ArrayHelper.contains($0.get_presence().get_$4(),$p0)){return true;}}return false;},get_$12:function(){return this.$1;},get_$13:function(){if(this.$9==null){this.$9=MC.ServiceDataSet.create();}return this.$9;},get_$14:function(){return MSH.ContactHelper.getIMAddressInfoKey(this.$1);},get_$15:function(){return MSH.ContactHelper.getIMAddressInfoKey(this.get_$1D());},equals:function(other){if(other==null){return false;}return MSH.ContactHelper.areIMAddressesEqual(this.$1,other.$1);},$16:function($p0,$p1){return (this.$1.address===$p0)&&(this.get_type()===$p1);},$17:function($p0){this.$6=$p0;},$18:function(){this.$21('IsAppearOfflineTo');},$19:function($p0,$p1){this.$1.roleLists=$p0;if($p1!==0){if(($p1&1)!==0){this.$21('IsContact');}if(($p1&2)!==0){this.$21('IsAllowed');}if(($p1&4)!==0){this.$21('IsBlocked');}var $0=((this.$0!=null)&&(this.$0.get_address()!=null)&&(this.$0.get_presence().get_status()===2));var $1=Microsoft.Live.Messenger.Contact.$37($p0^$p1);var $2=Microsoft.Live.Messenger.Contact.$37($p0);if(!$0&&(($1^$2)===1)){this.$21('IsAppearOfflineTo');}}},$1A:function($p0){var $0=false;var $1=false;var $2=false;var $3=this.get_$13().updateAll($p0);var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.get_current();if((Object.getKeyCount($4.deletedEndpoints)>0)||(Object.getKeyCount($4.newEndpoints)>0)||(Object.getKeyCount($4.updatedEndpoints)>0)||($4.updatedProperties.length>0)){$0=($0|this.get_capabilities().$7($4))===1;$1=($1|this.get_endpoints().$17($4))===1;$2=($2|this.get_presence().$8($4))===1;switch($4.service){case 2:this.$22($4);break;case 1:this.$23($4);break;}}}if($0){this.$21('Capabilities');}if($1){this.$21('Endpoints');this.get_contact().$2F(this.get_endpoints());}if($2){this.$21('Presence');}},$1B:function($p0){var $0=false;var $1=false;var $2=false;var $3=this.get_$13().deleteAll($p0);var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.get_current();$0=($0|this.get_capabilities().$7($4))===1;$1=($1|this.get_endpoints().$18($4))===1;$2=($2|this.get_presence().$8($4))===1;switch($4.service){case 2:this.$22($4);break;case 1:this.$23($4);break;}}if($0){this.$21('Capabilities');}if($1){this.$21('Endpoints');this.get_contact().$2F(this.get_endpoints());}if($2){this.$21('Presence');}},$1C:function($p0){switch($p0.type){case 1:this.$7=true;break;case 11:this.$8=true;break;}},get_$1D:function(){var $0=this.get_contact();if($0!=null&&$0.get_isApplicationContact()&&this.$1.type===1&&!String.isNullOrEmpty(this.$1.cid)){if(!this.$7&&(this.$8||$0.get_$48())){return MC.$create_IMAddressInfo(this.get_$12().cid,11,1|32);}}return this.get_$12();},$1E:function($p0){var $0=this.get_id();this.$1.address=$p0.address;this.$1.type=$p0.type;this.$1.id=$p0.id;this.$21('Address');this.$21('Type');if($0!==this.get_id()){this.$21('Id');}},$21:function($p0){if(this.$A!=null){this.$A.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$22:function($p0){var $0=$p0.updatedProperties;if($0.contains('Status')){this.get_contact().$32();}if($0.contains('IsOnline')){this.$21('IsOnline');this.get_contact().$31();}},$23:function($p0){if($p0.updatedProperties.contains('IsIdentityVerified')){this.$21('IsIdentityVerified');this.get_contact().$33();}},$24:function(){switch(this.$1.type){case 13:return this.$0.get_networks().get_item(this.$1.network);case 8:case 4:case 16:this.$0.get_networks().$1B();return Microsoft.Live.Messenger.Network.get_$15();case 2:this.$0.get_networks().$1C();return Microsoft.Live.Messenger.Network.get_$14();case 32:this.$0.get_networks().$1A();return Microsoft.Live.Messenger.Network.get_$13();default:return Microsoft.Live.Messenger.Network.get_$12();}}}
Microsoft.Live.Messenger.M$25=function(address){Microsoft.Live.Messenger.M$25.initializeBase(this,[address]);this.$C=address.get_$13().imServiceData;}
Microsoft.Live.Messenger.M$25.prototype={$C:null,get_isOnlineViaMobileDevice:function(){return this.$C.get_isOnlineViaMobileDevice();},get_isOnlineViaWeb:function(){return this.$C.get_isOnlineViaWeb();},get_$4:function(){return this.$C.get_supportsApplicationMessages();},get_$5:function(){return this.$C.get_supportsNudges();},get_$6:function(){return this.$C.get_supportsMultipartyConversations();},$8:function(){return this.$A(this.$C.get_version());}}
Microsoft.Live.Messenger.IMAddressCollection=function(owner){Microsoft.Live.Messenger.IMAddressCollection.initializeBase(this);this.$13=owner;}
Microsoft.Live.Messenger.IMAddressCollection.prototype={$13:null,add:function(address){if(address==null){throw Microsoft.Live.Messenger.M$A.$0('address');}if(this.$B(address)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$D,'address');}this.$13.addAddress(this,address);},remove:function(address){if(address==null){throw Microsoft.Live.Messenger.M$A.$0('address');}if(!this.$B(address)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$E,'address');}this.$13.removeAddress(this,address);},$14:function(){var $0=this.get_$5();var $1=new Array($0.length);for(var $2=0;$2<$0.length;$2++){$1[$2]=$0[$2];}return $1;},$15:function(){MSH.ArrayHelper.sortArrayList(this.get_$5(),ss.Delegate.create(this,this.$16));},$16:function($p0,$p1){return ($p0).get_network().get_$1F()-($p1).get_network().get_$1F();},get_item:function(index){if((index<0)||(index>=this.get_count())){throw Microsoft.Live.Messenger.M$A.$5('index');}return this.get_$5()[index];}}
Microsoft.Live.Messenger.IMAddressPresence=function(address){this.$0=address;this.$2=address.get_$13();this.$1=new Microsoft.Live.Messenger.PresencePropertyCollection([this.$2.imServiceData,this.$2.peServiceData,this.$2.cmServiceData],new Array(0));}
Microsoft.Live.Messenger.IMAddressPresence.isDisplayNameValid=function(displayName){if(displayName==null){return false;}var $0=129;if(displayName.length>$0){return false;}if(displayName.indexOf('&#')>=0){return false;}return true;}
Microsoft.Live.Messenger.IMAddressPresence.isPersonalMessageValid=function(message){if(message==null){return false;}return (message.length<=MC.Compatibility.get_maxPersonalMessageLength());}
Microsoft.Live.Messenger.IMAddressPresence.$7=function($p0){switch($p0){case 2:return Microsoft.Live.Messenger.M$B.$3;case 0:return Microsoft.Live.Messenger.M$B.$6;case 6:case 4:case 5:case 8:return Microsoft.Live.Messenger.M$B.$4;case 3:case 7:return Microsoft.Live.Messenger.M$B.$5;case 1:return Microsoft.Live.Messenger.M$B.$7;default:return String.Empty;}}
Microsoft.Live.Messenger.IMAddressPresence.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,add_propertyChanged:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_propertyChanged:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_imAddress:function(){return this.$0;},get_properties:function(){return this.$1;},get_displayName:function(){return this.$2.peServiceData.get_displayName();},set_displayName:function(value){this.$C();if(!this.$0.get_$C().get_settings().get_canUpdateDisplayName()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$14);}if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(!Microsoft.Live.Messenger.IMAddressPresence.isDisplayNameValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$13,'value');}if(this.get_displayName()!==value){var $0=MC.ServiceData.createEmpty(1);$0.set_displayName(value);this.$0.get_$C().$5F($0);}return value;},get_displayPictureUrl:function(){if(String.isNullOrEmpty(this.$3)){this.$F();if(String.isNullOrEmpty(this.$3)){return null;}}return new Microsoft.Live.Messenger.Uri(this.$3);},get_media:function(){return this.$4;},set_media:function(value){this.$C();if(value!==this.$4){this.$4=value;var $0=String.Empty;if(this.$4!=null){this.$4.set_$A(true);$0=this.$4.$D(this.$0.get_$C().get_applicationName());}var $1=MC.ServiceData.createEmpty(2);$1.set_currentMedia($0);this.$0.get_$C().$5F($1);}return value;},get_personalMessage:function(){if(!MC.Compatibility.get_useLegacyPersonalMessage()&&!String.isNullOrEmpty(this.$2.peServiceData.get_richUserMessage())){return this.$2.peServiceData.get_richUserMessage();}return this.$2.peServiceData.get_personalMessage();},set_personalMessage:function(value){this.$C();if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}value=value.trim();if(!Microsoft.Live.Messenger.IMAddressPresence.isPersonalMessageValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$22,'value');}if(this.get_personalMessage()!==value){var $0=129;var $1=MC.ServiceData.createEmpty(1);$1.set_personalMessage(MSH.StringHelper.truncate(value,$0));$1.set_richUserMessage(value);$1.set_richLinkType(1);$1.set_richUrl(null);$1.set_safeUrl(null);this.$0.get_$C().$5F($1);}return value;},get_status:function(){switch(this.$2.imServiceData.get_status()){case 3:return 2;case 7:return 6;case 6:return 5;case 4:return 3;case 5:return 4;case 8:return 7;case 2:return 1;case 9:return 8;case 0:case 1:return 0;default:return 0;}},set_status:function(value){this.$D();var $0=0;switch(value){case 2:$0=3;break;case 6:$0=7;break;case 5:$0=6;break;case 3:$0=4;break;case 4:$0=5;break;case 7:$0=8;break;case 1:$0=2;break;case 8:$0=9;break;case 0:$0=0;break;}if($0===0){throw Microsoft.Live.Messenger.M$A.$5('Status');}if(this.$2.imServiceData.get_status()!==$0){var $1=MC.ServiceData.createEmpty(2);$1.set_status($0);var $2=this.$0.get_$C();$2.$5F($1);if($0!==5){$2.get_settings().set_$6($0);}}return value;},get_statusText:function(){return Microsoft.Live.Messenger.IMAddressPresence.$7(this.get_status());},get_$6:function(){return this.$2;},createPersonalMessageElement:function(){var $0=this.get_personalMessage()||String.Empty;$0=MSH.RegexHelper.replace('(\\r?\\n)+',$0,' ','g');return Microsoft.Live.Messenger.MessengerUtility.$5($0,this.$2.peServiceData);},$8:function($p0){var $0=false;switch($p0.service){case 2:$0=this.$10($p0);break;case 1:$0=this.$11($p0);break;case 8:$0=this.$12($p0);break;}if(this.$1.$15($p0)){$0=true;this.$A('Properties');}if($0){this.$0.get_contact().$40(this.$0);}return $0;},$9:function(){this.$B();var $0=this.$0.get_$C();if(($0.get_status()===2)&&(($0.get_services()===3)||($0.get_services()===0))){if((this.$4!=null)&&this.$4.get_$A()){this.set_media(null);}}},$A:function($p0){if(this.$5!=null){this.$5.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$B:function(){if(!this.$0.get_$B()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$2A);}},$C:function(){this.$B();this.$E();this.$0.get_$C().$6E();},$D:function(){this.$B();this.$E();this.$0.get_$C().$71();},$E:function(){this.$0.get_$C().$6F([3,0]);},$F:function(){var $0=null;if(this.$0.get_type()===13){this.$3=this.$0.get_linkedContact().get_$9().pictureUrl;return;}var $1=this.$0.get_$B();var $2=this.$0.get_contact().get_isContact();var $3=this.$0.get_contact().get_isApplicationContact();if($2||$1){var $4=this.$2.peServiceData;if(!String.isNullOrEmpty($4.get_userTileLocation())&&$4.get_userTileLocation()!=='1'){var $5=MSH.XmlHelper.parseXmlDocument($4.get_userTileLocation());var $6=$5.documentElement;if(($6!=null)&&($6.nodeName==='msnobj')){var $7=MSH.XmlHelper.getAttribute($6,'Url1');if(Microsoft.Live.Messenger.MessengerUtility.$B($7)){this.$3=MSH.UriHelper.updateDisplayPictureUrl($7);return;}}}}if($3||$1){var $8=this.$2.peServiceData;if(!String.isNullOrEmpty($8.get_displayPictureUrl())){$0=$8.get_displayPictureUrl();}}if($0==null){if(String.isNullOrEmpty(this.$0.get_cid())||(Microsoft.Live.Messenger.M$14.get_$6()==null)){return;}$0=Microsoft.Live.Messenger.M$14.$A(this.$0.get_cid());}if($0!=null){var $9=this.$0.get_$C();if(!$3&&($9!=null)){var $A=$9.get_identity().get_$1C();var $B=$A.ticket;if(!String.isNullOrEmpty($B)){switch($A.authType){case 2:$0=MSH.UriHelper.addParameter($0,'dt',$B);break;case 1:$0=MSH.UriHelper.addParameter($0,'t',$B);break;}}}this.$3=MSH.UriHelper.updateDisplayPictureUrl($0);}},$10:function($p0){var $0=false;var $1=$p0.updatedProperties.length;for(var $2=0;$2<$1;$2++){var $3=$p0.updatedProperties[$2];switch($3){case 'CurrentMedia':var $4=this.$2.imServiceData.get_currentMedia();if((this.$4!=null)&&(this.$4.$D(this.$0.get_$C().get_applicationName())===$4)){}else{this.$4=Microsoft.Live.Messenger.Media.$B($4);}$0=true;this.$A('Media');break;case 'Status':$0=true;this.$A('Status');break;}}return $0;},$11:function($p0){var $0=false;var $1=false;var $2=$p0.updatedProperties.length;for(var $3=0;$3<$2;$3++){var $4=$p0.updatedProperties[$3];switch($4){case 'DisplayName':$0=true;this.$A($4);break;case 'RichUserMessage':case 'RichUrl':case 'SafeUrl':case 'RichLinkType':case 'PersonalMessage':if(!$1){$1=true;$0=true;this.$A('PersonalMessage');}break;case 'DisplayPictureUrl':case 'UserTileLocation':this.$3=null;$0=true;this.$A('DisplayPictureUrl');break;}}return $0;},$12:function($p0){var $0=false;var $1=$p0.updatedProperties.length;for(var $2=0;$2<$1;$2++){var $3=$p0.updatedProperties[$2];switch($3){case 'comments':$0=true;break;}}return $0;}}
Microsoft.Live.Messenger.Instance=function(info){this.$0=info;}
Microsoft.Live.Messenger.Instance.prototype={$0:null,add_propertyChanged:function(value){this.$1=ss.Delegate.combine(this.$1,value);},remove_propertyChanged:function(value){this.$1=ss.Delegate.remove(this.$1,value);},$1:null,get_isLocal:function(){return this.$0.isLocal;},get_id:function(){return this.$0.id;},get_isPrimary:function(){return this.$0.isPrimary;},$2:function($p0){var $0=false;var $1=false;if($p0.id!==this.$0.id){this.$0.id=$p0.id;$0=true;}if($p0.isPrimary!==this.$0.isPrimary){this.$0.isPrimary=$p0.isPrimary;$1=true;}if(this.$1!=null){if($0){this.$1.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs('Id'));}if($1){this.$1.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs('IsPrimary'));}}}}
Microsoft.Live.Messenger.InstanceCollection=function(){Microsoft.Live.Messenger.InstanceCollection.initializeBase(this);this.$13=new Microsoft.Live.Messenger.Instance(MC.$create_InstanceInfo(String.Empty,true,false));this.$C(this.$13);}
Microsoft.Live.Messenger.InstanceCollection.prototype={$13:null,get_localInstance:function(){return this.$13;},find:function(id){if(String.isNullOrEmpty(id)){throw Microsoft.Live.Messenger.M$A.$1('id',id);}var $0=this.get_$5();for(var $1=0;$1<$0.length;$1++){if(($0[$1]).get_id()===id){return $0[$1];}}return null;},$14:function($p0){var $0=[];var $1=[];var $2;for($2=0;$2<$p0.length;$2++){var $3=$p0[$2];$1.add($3.id);if($3.isLocal){this.$13.$2($3);}else{var $4=this.find($3.id);if($4!=null){$4.$2($3);}else{$0.add(new Microsoft.Live.Messenger.Instance($3));}}}$2=0;while($2<this.get_$5().length){var $5=this.get_item($2);if($1.contains($5.get_id())){$2++;}else if($5.get_isLocal()){$5.$2(MC.$create_InstanceInfo($5.get_id(),true,false));$2++;}else{this.$10($2);}}for($2=0;$2<$0.length;$2++){this.$C($0[$2]);}},get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.MessageCollection=function(){Microsoft.Live.Messenger.MessageCollection.initializeBase(this);this.$13=MSH.DateTimeHelper.minValue;}
Microsoft.Live.Messenger.MessageCollection.prototype={$13:null,$14:function($p0){var $0=Date.get_now();$p0.set_timestamp($0);this.$15($p0);},$15:function($p0){this.$C($p0);if(!$p0.get_sender().get_$B()){this.$13=$p0.get_timestamp();this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('LastReceived'));}},get_lastReceived:function(){return this.$13;},get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.MessengerUtility=function(){}
Microsoft.Live.Messenger.MessengerUtility.emoticonEncode=function(text){if(text==null){throw Microsoft.Live.Messenger.M$A.$0('text');}return Microsoft.Live.Messenger.MessengerUtility.$0(text,String.Empty);}
Microsoft.Live.Messenger.MessengerUtility.$0=function($p0,$p1){var $0=document.createElement('span');var $1=Microsoft.Live.Messenger.MessengerUtility.$4($p1);var $2=0;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.get_current();if($3.$0>0){Microsoft.Live.Messenger.MessengerUtility.$1(MSH.StringHelper.substringSection($p0,$2,$3.$0),$0);}var $4=MSH.StringHelper.substring($p0,$3.$0,$3.$1);var $5=Microsoft.Live.Messenger.MessengerUtility.$2($4,$3.$2);$5.innerText=$4;$0.appendChild($5);$2=$3.$0+$3.$1+1;}if($2<$p0.length){Microsoft.Live.Messenger.MessengerUtility.$1(MSH.StringHelper.substringToEnd($p0,$2),$0);}return $0;}
Microsoft.Live.Messenger.MessengerUtility.$1=function($p0,$p1){while($p0.length>0){var $0=false;$p0.replace(Microsoft.Live.Messenger.MessengerUtility.$6,function($p1_0){
var $1_0=arguments[1];var $1_1=arguments[4];if($1_1>0){var $1_2=MSH.StringHelper.substring($p0,0,$1_1);$p1.appendChild(document.createTextNode($1_2));}switch($1_0){case '\r\n':case '\r':case '\n':$p1.appendChild(document.createElement('br'));break;default:if($1_0.startsWith('http')||$1_0.startsWith('www')){var $1_3=Microsoft.Live.Messenger.MessengerUtility.$2($1_0,null);$1_3.innerText=$1_0;$p1.appendChild($1_3);}else if($1_0.startsWith('/www')){$p1.appendChild(document.createTextNode($1_0));}else{var $1_4=Microsoft.Live.Messenger.MessengerUtility.$3($1_0);$p1.appendChild($1_4);}break;}$p0=MSH.StringHelper.substringToEnd($p0,$1_1+$1_0.length);$0=true;return String.Empty;});if(!$0){$p1.appendChild(document.createTextNode($p0));$p0=String.Empty;}}}
Microsoft.Live.Messenger.MessengerUtility.$2=function($p0,$p1){var $0=document.createElement('a');var $1=$p0;if(!$1.startsWith('http://')&&!$1.startsWith('https://')){$1='http://'+$1;}$0.href=$1;$0.target='_blank';$0.attachEvent('onclick',function(){
if($0.className==='Disabled'){window.event.returnValue=false;}else{window.event.cancelBubble=true;}if($p1!=null){$0.href=$p1;MSH.Scheduler.defer(function(){
$0.href=$1;});}});return $0;}
Microsoft.Live.Messenger.MessengerUtility.$3=function($p0){var $0=Microsoft.Live.Messenger.MessengerUtility.$7[MSH.StringHelper.toLowerCase($p0)];var $1=Object.keyExists(Microsoft.Live.Messenger.MessengerUtility.$8,$0);var $2=($1)?'.gif':'.png';var $3=Microsoft.Live.Messenger.M$14.get_$B()+$0+$2;var $4=document.createElement('img');$4.title=$p0;$4.alt=$p0;$4.className='Emoticon';if($1||MSH.BrowserHelper.get_supportsTransparentPngs()){$4.src=$3;}else{$4.src=Microsoft.Live.Core.Loader.get_settings().messenger.getResourceUrl('resources/images/transparent.gif');$4.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader('+'sizingMethod=\'image\','+'src=\''+$3+'\');';}return $4;}
Microsoft.Live.Messenger.MessengerUtility.$4=function($p0){var $0=[];if(String.isNullOrEmpty($p0)){return $0;}var $1=$p0.split(' ');var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.get_current();var $3=$2.split(',');$0.add(Microsoft.Live.Messenger.$create_M$C(MSH.ConvertHelper.tryParseInt($3[0]),MSH.ConvertHelper.tryParseInt($3[1]),$3[2]));}return $0;}
Microsoft.Live.Messenger.MessengerUtility.$5=function($p0,$p1){var $0=document.createElement('span');$0.className='PersonalMessage';var $1=$p1.get_safeUrl()||String.Empty;var $2=Microsoft.Live.Messenger.MessengerUtility.$0($p0,$1);$2.className='PersonalMessage_Text';var $3=String.Empty;var $4=1;if($p1!=null){$4=$p1.get_richLinkType();$3=$p1.get_richUrl();}if($4!==1&&$4!==0&&!String.isNullOrEmpty($3)){var $5=document.createElement('img');$5.className='PersonalMessage_Icon';$5.style.border='none';$5.src=Microsoft.Live.Messenger.M$14.get_$E()+Microsoft.Live.Messenger.MessengerUtility.$9[$4]+'.png';var $6=Microsoft.Live.Messenger.MessengerUtility.$2($3,null);$6.appendChild($5);$0.appendChild($6);}$0.appendChild($2);return $0;}
Microsoft.Live.Messenger.MessengerUtility.$B=function($p0){if(String.isNullOrEmpty($p0)){return false;}return MSH.RegexHelper.isMatch('((http|https):\\/\\/)[^\\s]*[^\\s?.!(;:\'>\\[\\],]',$p0,'i');}
Microsoft.Live.Messenger.M$1A=function(dictionary){this.$0=new Microsoft.Live.Messenger.SortedContactCollection(null,dictionary);this.$1=new Microsoft.Live.Messenger.SortedContactCollection(null,dictionary);}
Microsoft.Live.Messenger.M$1A.prototype={$0:null,$1:null,get_$2:function(){return this.$0;},get_$3:function(){return this.$1;},$4:function($p0){if($p0.get_isOnline()){this.$0.$17($p0);}else{this.$1.$17($p0);}},$5:function($p0){if($p0.get_isOnline()){this.$0.$18($p0);}else{this.$1.$18($p0);}},$6:function($p0){return this.$0.$B($p0)||this.$1.$B($p0);},$7:function($p0){this.$1.$18($p0);this.$0.$17($p0);},$8:function($p0){this.$0.$18($p0);this.$1.$17($p0);},$9:function($p0){if(!$p0.get_isContact()&&!$p0.get_isApplicationContact()){return false;}if(!this.$6($p0)){return false;}var $0=this.$0.$B($p0);if($p0.get_isOnline()!==$0){if($p0.get_isOnline()){this.$7($p0);}else{this.$8($p0);}return true;}return false;},$A:function($p0){this.get_$2().$1E($p0);this.get_$3().$1E($p0);}}
Microsoft.Live.Messenger.PendingContact=function(collection,address){this.$0=collection;this.$1=address;}
Microsoft.Live.Messenger.PendingContact.prototype={$0:null,$1:null,get_imAddress:function(){return this.$1;},get_displayName:function(){return this.$1.get_$12().address;},get_inviteMessage:function(){return this.$1.get_$12().inviteMessage;},accept:function(){this.$0.accept(this);},decline:function(){this.$0.decline(this);}}
Microsoft.Live.Messenger.PendingContactCollection=function(user){Microsoft.Live.Messenger.PendingContactCollection.initializeBase(this);this.$13=user;}
Microsoft.Live.Messenger.PendingContactCollection.prototype={$13:null,$14:function($p0){var $enum1=ss.IEnumerator.getEnumerator(this.get_$5());while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_imAddress()===$p0){return;}}this.$C(new Microsoft.Live.Messenger.PendingContact(this,$p0));},$15:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0.get_addresses());while($enum1.moveNext()){var $0=$enum1.get_current();var $enum2=ss.IEnumerator.getEnumerator(this.get_$5());while($enum2.moveNext()){var $1=$enum2.get_current();if($0===$1.get_imAddress()){return;}}}this.$C(new Microsoft.Live.Messenger.PendingContact(this,$p0.get_currentAddress()));},$16:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0.get_addresses());while($enum1.moveNext()){var $0=$enum1.get_current();var $enum2=ss.IEnumerator.getEnumerator(this);while($enum2.moveNext()){var $1=$enum2.get_current();if($0===$1.get_imAddress()){this.$D($1);return;}}}},accept:function(contact){if(contact==null){throw Microsoft.Live.Messenger.M$A.$0('contact');}if(!this.$B(contact)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$E,'contact');}this.$17(contact,2|1,16);},decline:function(contact){if(contact==null){throw Microsoft.Live.Messenger.M$A.$0('contact');}if(!this.$B(contact)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$E,'contact');}this.$17(contact,4,16);},$17:function($p0,$p1,$p2){this.$13.$6F([2,3,0]);var $0=MC.$create_ContactInfo(Microsoft.Live.Messenger.Guid.empty.toString(),null,[$p0.get_imAddress().get_$12()]);var $1=this.$13.$4A($0);this.$13.$65($1.get_$4A(),$p1,$p2);},get_item:function(index){if((index<0)||(index>=this.get_count())){throw Microsoft.Live.Messenger.M$A.$5('index');}return this.get_$5()[index];}}
Microsoft.Live.Messenger.PremiumFeature=function(){}
Microsoft.Live.Messenger.PremiumFeature.prototype={get_provisioned:function(){return false;},get_enabled:function(){return false;},get_suspended:function(){return false;},add_propertyChanged:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_propertyChanged:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null}
Microsoft.Live.Messenger.PresenceProperty=function(name,value){if(String.isNullOrEmpty(name)){throw Microsoft.Live.Messenger.M$A.$1('name',name);}if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}this.$0=name;this.$1=value;}
Microsoft.Live.Messenger.PresenceProperty.prototype={$0:null,$1:null,get_name:function(){return this.$0;},get_value:function(){return this.$1;}}
Microsoft.Live.Messenger.PresencePropertyCollection=function(serviceData,serviceEndpointData){Microsoft.Live.Messenger.PresencePropertyCollection.initializeBase(this);this.$17(serviceData,serviceEndpointData);}
Microsoft.Live.Messenger.PresencePropertyCollection.prototype={$13:null,$14:null,$15:function($p0){var $0=false;var $1=this.$1A($p0.service);if($1!=null){$0=($0|this.$18($p0.updatedRawProperties,$1.get_properties()))===1;}return $0;},$16:function($p0,$p1){var $0=false;var $1=this.$1A($p0.service);if($1!=null){$0=($0|this.$18($p0.updatedRawProperties,$1.get_properties()))===1;}var $2=this.$1B($p0.service);if($2!=null){$0=($0|this.$18($p0.updatedEndpoints[$p1],$2.get_properties()))===1;}return $0;},$17:function($p0,$p1){this.$13=$p0;this.$14=$p1;this.$1C();},$18:function($p0,$p1){var $0=false;var $1=$p0.length;for(var $2=0;$2<$1;$2++){var $3=$p0[$2];var $4=this.$19($3);if(!Object.keyExists($p1,$3)){this.$D($4);$0=true;}else{var $5=Type.safeCast($p1[$3],String);if($5!=null){if($4===-1){this.$C(new Microsoft.Live.Messenger.PresenceProperty($3,$5));}else{this.$E($4,new Microsoft.Live.Messenger.PresenceProperty($3,$5));}$0=true;}}}return $0;},$19:function($p0){var $0=this.get_count();for(var $1=0;$1<$0;$1++){if((this.get_$5()[$1]).get_name()===$p0){return $1;}}return -1;},$1A:function($p0){for(var $0=0;$0<this.$13.length;$0++){if(this.$13[$0].get_service()===$p0){return this.$13[$0];}}return null;},$1B:function($p0){for(var $0=0;$0<this.$14.length;$0++){if(this.$14[$0].get_service()===$p0){return this.$14[$0];}}return null;},$1C:function(){for(var $0=0;$0<this.$13.length;$0++){this.$1D(this.$13[$0].get_properties());}for(var $1=0;$1<this.$14.length;$1++){this.$1D(this.$14[$1].get_properties());}},$1D:function($p0){var $dict1=$p0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=Type.safeCast($0.value,String);if($1!=null){this.$C(new Microsoft.Live.Messenger.PresenceProperty($0.key,$1));}}},get_item:function(key){if(key==null){throw Microsoft.Live.Messenger.M$A.$0('key');}if(Type.canCast(key,String)){var $0=key;if(String.isNullOrEmpty($0)){throw Microsoft.Live.Messenger.M$A.$1('name',$0);}for(var $1=0;$1<this.get_count();$1++){if((this.get_$5()[$1]).get_name()===$0){return this.get_$5()[$1];}}return null;}else if(Type.canCast(key,Number)){return this.getItem(key);}else{throw Microsoft.Live.Messenger.M$A.$5('key');}}}
Microsoft.Live.Messenger.Settings=function(user){this.$0=user;this.$1=MC.$create_SettingsInfo();this.$1.privacyOptions=1;this.$1.isAutoReconnectEnabled=MC.Compatibility.get_autoReconnectEnabled();this.$2=MC.$create_UXSettingsInfo(2,true,false,2);this.$2.displayNameOptions=MC.Compatibility.get_displayNameOptions();this.$3=new Microsoft.Live.Messenger.PremiumFeature();this.$4=new Microsoft.Live.Messenger.PremiumFeature();}
Microsoft.Live.Messenger.Settings.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,add_propertyChanged:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_propertyChanged:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_autoReconnectEnabled:function(){return this.$1.isAutoReconnectEnabled;},set_autoReconnectEnabled:function(value){if(value!==this.$1.isAutoReconnectEnabled){this.$1.isAutoReconnectEnabled=value;this.$A('AutoReconnectEnabled');}return value;},get_autoReconnectInitialWaitTime:function(){return this.$1.autoReconnectInitialWaitTime;},set_autoReconnectInitialWaitTime:function(value){if(value<-1||value>120){throw Microsoft.Live.Messenger.M$A.$5('AutoReconnectInitialWaitTime');}if(value!==this.$1.autoReconnectInitialWaitTime){this.$1.autoReconnectInitialWaitTime=value;this.$A('AutoReconnectInitialWaitTime');}return value;},get_privacyMode:function(){if(this.$1.privacyOptions===2){return 0;}return 1;},set_privacyMode:function(value){var $0=MC.$create_SettingsInfo();if((value===0)&&(this.$1.privacyOptions!==2)){$0.privacyOptions=2;}if((value===1)&&(this.$1.privacyOptions!==1)){$0.privacyOptions=1;}if($0.privacyOptions!==0){this.$0.$59($0);}return value;},get_canUpdateDisplayName:function(){return !this.$1.isIdentityUnverified;},get_hasMailbox:function(){return this.$1.hasInbox;},get_prepaidMobileMessaging:function(){return this.$3;},get_partnerMobileMessaging:function(){return this.$4;},get_multipleEndpointsEnabled:function(){return !this.$1.isMpopDisabled;},set_multipleEndpointsEnabled:function(value){var $0=!value;if($0!==this.$1.isMpopDisabled){var $1=MC.$create_SettingsInfo();$1.isMpopDisabled=$0;$1.isMpopDisabledChanged=true;this.$0.$59($1);}return value;},get_signInPreference:function(){return this.$2.autoSignInEnabled;},set_signInPreference:function(value){if(this.$2.autoSignInEnabled!==value){var $0=this.$9();$0.autoSignInEnabled=value;this.$0.$5A($0);}return value;},get_audioEnabled:function(){return this.$2.audioEnabled;},set_audioEnabled:function(value){if(this.$2.audioEnabled!==value){var $0=this.$9();$0.audioEnabled=value;this.$0.$5A($0);}return value;},get_firstRunExperienceViewed:function(){return this.$2.firstRunExperienceViewed;},set_firstRunExperienceViewed:function(value){if(this.$2.firstRunExperienceViewed!==value){var $0=this.$9();$0.firstRunExperienceViewed=value;this.$0.$5A($0);}return value;},get_displayNameMode:function(){switch(this.$2.displayNameOptions){case 1:return 1;case 0:return 0;default:return 0;}},set_displayNameMode:function(value){if(this.get_displayNameMode()!==value){switch(value){case 1:this.$2.displayNameOptions=1;break;case 0:this.$2.displayNameOptions=0;break;default:throw Microsoft.Live.Messenger.M$A.$5('DisplayNameMode');}this.$A('DisplayNameMode');}return value;},get_$6:function(){return this.$2.lastStatus;},set_$6:function($p0){if(this.$2.lastStatus!==$p0){var $0=this.$9();$0.lastStatus=$p0;this.$0.$5A($0);}return $p0;},get_$7:function(){return this.$1;},get_$8:function(){return this.$2;},$9:function(){return MC.$create_UXSettingsInfo(this.$2.autoSignInEnabled,this.$2.audioEnabled,this.$2.firstRunExperienceViewed,this.$2.lastStatus);},$A:function($p0){var $0=new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0);if(this.$5!=null){this.$5.invoke(this,$0);}},$B:function($p0){if($p0.hasInboxChanged&&$p0.hasInbox!==this.$1.hasInbox){this.$1.hasInbox=$p0.hasInbox;this.$A('HasMailbox');}if($p0.isIdentityUnverifiedChanged&&$p0.isIdentityUnverified!==this.$1.isIdentityUnverified){this.$1.isIdentityUnverified=$p0.isIdentityUnverified;this.$A('CanUpdateDisplayName');}if($p0.isMpopDisabledChanged&&$p0.isMpopDisabled!==this.$1.isMpopDisabled){this.$1.isMpopDisabled=$p0.isMpopDisabled;this.$A('MultipleEndpointsEnabled');}if($p0.privacyOptions!==0&&$p0.privacyOptions!==this.$1.privacyOptions){this.$1.privacyOptions=$p0.privacyOptions;this.$A('PrivacyMode');}},$C:function($p0){if(this.$2.autoSignInEnabled!==$p0.autoSignInEnabled){this.$2.autoSignInEnabled=$p0.autoSignInEnabled;this.$A('SignInPreference');}if(this.$2.audioEnabled!==$p0.audioEnabled){this.$2.audioEnabled=$p0.audioEnabled;this.$A('AudioEnabled');}if(this.$2.firstRunExperienceViewed!==$p0.firstRunExperienceViewed){this.$2.firstRunExperienceViewed=$p0.firstRunExperienceViewed;this.$A('FirstRunExperienceViewed');}if(this.$2.lastStatus!==$p0.lastStatus){this.$2.lastStatus=$p0.lastStatus;}}}
Microsoft.Live.Messenger.SignedInEventArgs=function(server){Microsoft.Live.Messenger.SignedInEventArgs.initializeBase(this);this.$1_0=server;}
Microsoft.Live.Messenger.SignedInEventArgs.prototype={$1_0:null,get_serverName:function(){return this.$1_0;}}
Microsoft.Live.Messenger.M$16=function(userState,raiseSignInCompleted){this.$0=userState;this.$1=raiseSignInCompleted;}
Microsoft.Live.Messenger.M$16.prototype={$0:null,$1:false}
Microsoft.Live.Messenger.M$17=function(signoutEndpoint,locations,userState){this.$0=signoutEndpoint;this.$1=locations;this.$2=userState;}
Microsoft.Live.Messenger.M$17.prototype={$0:null,$1:0,$2:null}
Microsoft.Live.Messenger.M$15=function(){}
Microsoft.Live.Messenger.M$15.prototype={$0:false,$1:0}
Microsoft.Live.Messenger.SortedCollection=function(compareItems,sortCallback){Microsoft.Live.Messenger.SortedCollection.initializeBase(this);this.$13=compareItems;this.$14=sortCallback;if(this.$14==null){this.$14=ss.Delegate.create(this,this.$1B);}}
Microsoft.Live.Messenger.SortedCollection.prototype={$13:null,$14:null,$A:function(){this.$14.invoke(this.get_$5());Microsoft.Live.Messenger.SortedCollection.callBaseMethod(this, '$A');},$16:function($p0){this.$9();this.get_$5().clear();if($p0!=null){this.$11(0,$p0);}this.$A();},$17:function($p0){var $0;if(this.get_$4()){$0=this.get_count();}else{var $1=new Microsoft.Live.Messenger.M$15();this.$1C($p0,$1);if($1.$0){if(!this.onInsertEqual(this.get_$5()[$1.$1],$p0)){}}$0=$1.$1;}this.$F($0,$p0);},$18:function($p0){var $0=this.$1A($p0);if($0>=0){this.$10($0);}},$19:function($p0){var $0=this.get_$5().indexOf($p0);if($0!==-1){var $1=new Microsoft.Live.Messenger.M$15();this.get_$5().removeAt($0);this.$1C($p0,$1);this.get_$5().insert($0,$p0);if($0!==$1.$1){this.$12($1.$1,$0);}}},$1A:function($p0){var $0=new Microsoft.Live.Messenger.M$15();if(this.get_count()>600&&!this.get_$4()){this.$1C($p0,$0);if($0.$0){return $0.$1;}return -1;}else{return this.get_$5().indexOf($p0);}},onInsertEqual:function(listObject,rhs){return true;},$1B:function($p0){MSH.ArrayHelper.sortArrayList($p0,this.$13);},$1C:function($p0,$p1){$p1.$1=0;$p1.$0=false;if(this.get_count()===0){return;}var $0=this.get_count()-1;var $1=0;var $2;var $3;while($1<=$0){$2=Math.floor((($0+$1)/2));$3=this.$13.invoke(this.get_$5()[$2],$p0);if($3<0){$1=$2+1;}else if($3>0){$0=$2-1;}else if($3===0){while($2>0&&this.$13.invoke(this.get_$5()[$2-1],$p0)===0){$2--;}while($2<this.get_count()-1&&this.get_$5()[$2]!==$p0&&this.$13.invoke(this.get_$5()[$2+1],$p0)===0){$2++;}$p1.$1=$2;$p1.$0=this.get_$5()[$2]===$p0;return;}}$p1.$1=$1;return;}}
Microsoft.Live.Messenger.SortedContactCollection=function(contacts,dictionary){Microsoft.Live.Messenger.SortedContactCollection.initializeBase(this,[Microsoft.Live.Messenger.SortedContactCollection.$20,Microsoft.Live.Messenger.SortedContactCollection.$21]);this.$1F(contacts);this.$1D=dictionary;}
Microsoft.Live.Messenger.SortedContactCollection.$20=function($p0,$p1){var $0=($p0).get_displayName();var $1=($p1).get_displayName();return MSH.StringHelper.localeCompare($0,$1);}
Microsoft.Live.Messenger.SortedContactCollection.$21=function($p0){var $0=[];$p0.forEach(function($p1_0){
$0.add([($p1_0).get_displayName(),$p1_0]);});MSH.ArrayHelper.sortArrayList($0,function($p1_0,$p1_1){
return (($p1_0)[0]).localeCompare((($p1_1)[0]));});$p0.clear();$0.forEach(function($p1_0){
$p0.add(($p1_0)[1]);});}
Microsoft.Live.Messenger.SortedContactCollection.prototype={$1D:null,findByAddress:function(address){if(address==null){throw Microsoft.Live.Messenger.M$A.$0('address');}if(this.$1A(address.get_contact())>-1){return address.get_contact();}return null;},findByCid:function(cid){if(String.isNullOrEmpty(cid)){throw Microsoft.Live.Messenger.M$A.$0('cid');}var $0=MC.$create_IMAddressInfo(cid,11,0);var $1=this.$1D.$10($0);if($1!=null){return this.findByAddress($1);}return null;},find:function(address,addressType){if(String.isNullOrEmpty(address)){throw Microsoft.Live.Messenger.M$A.$0('address');}for(var $0=0;$0<this.get_count();$0++){var $1=this.get_$5()[$0];for(var $2=0;$2<$1.get_addresses().get_count();$2++){var $3=$1.get_addresses().get_item($2);if($3.$16(address,addressType)){return $1;}}}return null;},findById:function(id){var $0=this.$1D.$14(id);if($0!=null){if(this.$1A($0)>-1){return $0;}}return null;},$1E:function($p0){this.$19($p0);},$1F:function($p0){this.$16($p0);},get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.M$21=function(address){this.$0=address;this.$1=Date.get_now();}
Microsoft.Live.Messenger.M$21.prototype={$0:null,$1:null,get_$2:function(){return this.$0;},get_$3:function(){return this.$1;},set_$3:function($p0){this.$1=$p0;return $p0;}}
Microsoft.Live.Messenger.TypingIMAddressCollection=function(timeout){Microsoft.Live.Messenger.TypingIMAddressCollection.initializeBase(this);this.$13=timeout;this.$14=[];}
Microsoft.Live.Messenger.TypingIMAddressCollection.prototype={$13:0,$14:null,$15:null,$16:function($p0){if(!this.$B($p0)){this.$C($p0);}this.$19($p0);if(this.$15==null){this.$1C(this.$13);}},$17:function($p0){this.$D($p0);},$18:function($p0){var $0=false;while(this.$14.length>0){var $1=this.$1B();var $2=this.$13-MSH.DateTimeHelper.subtract(Date.get_now(),$1.get_$3());if($2<=100){this.$1A($1);}else{this.$1C($2);$0=true;break;}}if(!$0){this.$15=null;}},$19:function($p0){var $0=false;var $enum1=ss.IEnumerator.getEnumerator(this.$14);while($enum1.moveNext()){var $1=$enum1.get_current();if($1.get_$2().equals($p0)){$1.set_$3(Date.get_now());$0=true;break;}}if(!$0){this.$14.add(new Microsoft.Live.Messenger.M$21($p0));}},$1A:function($p0){this.$D($p0.get_$2());this.$14.remove($p0);},$1B:function(){var $0=this.$14[0];var $enum1=ss.IEnumerator.getEnumerator(this.$14);while($enum1.moveNext()){var $1=$enum1.get_current();if($1.get_$3()<$0.get_$3()){$0=$1;}}return $0;},$1C:function($p0){this.$15=new MSH.Timer(ss.Delegate.create(this,this.$18),null,$p0,MSH.Timeout.infinite);},get_item:function(index){return (this.getItem(index));}}
Microsoft.Live.Messenger.User=function(identity,application){this.$1C=MC.$create_ConfigurationInfo();this.$22=String.Empty;this.$24=-1;if(identity==null){throw Microsoft.Live.Messenger.M$A.$0('identity');}if(!identity.get_isAuthenticated()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$2F);}this.$14=new Microsoft.Live.Messenger.Settings(this);this.$2=identity;this.$2.set_$21(this);this.$18=new MC.LogContext(this.$2.get_liveId()+';'+this.$2.get_$15());this.$16=this.$2.get_$1E();this.$1=this.$2.get_$17();this.$1.set_$4(this);this.$23=this.$2.get_$16();if(application!=null){this.$E=application.get_$D();}else{this.$E=new Microsoft.Live.Messenger.M$19(null,this);}this.$17=new Microsoft.Live.Messenger.InstanceCollection();this.$F={};this.$6=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$18(this,1));this.$7=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$18(this,2));this.$8=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$18(this,4));this.$9=new Microsoft.Live.Messenger.ContactCollection(this,new Microsoft.Live.Messenger.M$18(this,64));this.$C=new Microsoft.Live.Messenger.PendingContactCollection(this);this.$D=new Microsoft.Live.Messenger.EmailOnlyContactCollection(this.$E);this.$A=new Microsoft.Live.Messenger.M$1A(this.$E);this.$B=new Microsoft.Live.Messenger.Applications.M$9(this.$16,this,this.$15);if(application!=null){this.$B.$F(application);}this.$E.set_$8(this);this.$10=new Microsoft.Live.Messenger.ConversationCollection(this);this.$11=new Microsoft.Live.Messenger.GroupCollection(this);this.$1F=[];this.$12=new Microsoft.Live.Messenger.AlertCollection();this.$13=new Microsoft.Live.Messenger.NetworkCollection(this);var $0=this.$28();var $1=MC.$create_IMAddressInfo(MSH.StringHelper.toLowerCase(identity.get_liveId()),1,0);$1.cid=identity.get_cid();this.$3=this.$49($1);this.$3.$1A($0.toArray());this.$3.get_presence().add_propertyChanged(ss.Delegate.create(this,this.$3F));this.$4=this.$3.get_contact();this.$4.add_propertyChanged(ss.Delegate.create(this,this.$40));if(this.$4.get_isApplicationContact()){this.$4.set_isApplicationContact(false);}this.$5=this.$3.get_endpoints().get_item(0);this.$20=MSH.ReportFactory.createReport(1,5);this.$6A();this.$25=new Microsoft.Live.Messenger.M$1D(this);this.$1A=new Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory(this);this.$1B=new Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory();}
Microsoft.Live.Messenger.User.prototype={$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null,$15:null,$16:null,$17:null,$18:null,$19:null,$1A:null,$1B:null,$1D:0,$1E:null,$1F:null,$20:null,$21:null,$23:0,$25:null,$26:false,$27:null,$28:function(){var $0=-1610612736;var $1=256|8|1024|-2147483648;var $2=0;var $3=0;$0|=512;var $4=MC.ServiceEndpointData.createEmpty(4,this.$2.get_$15());$4.set_name(Microsoft.Live.Messenger.M$14.get_$9());$4.set_clientType(2);var $5=MC.ServiceEndpointData.createEmpty(2,this.$2.get_$15());$5.set_capabilities([$0,$1]);if(Type.canCast(this.$2,Microsoft.Live.Messenger.DelegatedAuthIdentity)){$5.set_applicationId((this.$2).get_applicationId());}var $6=MC.ServiceEndpointData.createEmpty(1,this.$2.get_$15());$6.set_capabilities([$2,$3]);$6.set_clientType(2);var $7=MC.ServiceDataSet.create();$7.imServiceData.set_status(1);$7.imServiceData.addEndpoint($5);$7.pdServiceData.addEndpoint($4);$7.peServiceData.addEndpoint($6);return $7;},get_$29:function(){return this.$E;},get_$2A:function(){return this.$1;},get_autoReconnectWaitTime:function(){return this.$24;},get_identity:function(){return this.$2;},get_applicationId:function(){if(Type.canCast(this.$2,Microsoft.Live.Messenger.DelegatedAuthIdentity)){return (this.$2).get_applicationId();}return String.Empty;},get_applicationName:function(){return this.$5.get_applicationName();},set_applicationName:function(value){this.$6E();this.$70(2);if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(value.length>Microsoft.Live.Messenger.M$14.get_$11()){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3C,'value');}if(this.get_applicationName()!==value){this.$5.$A(value,null,null,null);this.onPropertyChanged('ApplicationName');}return value;},get_applicationDisplayPictureUrl:function(){return this.$5.get_applicationDisplayPictureUrl();},set_applicationDisplayPictureUrl:function(value){this.$6E();this.$70(2);if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(value.toString().length>Microsoft.Live.Messenger.M$14.get_$F()){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3D,'value');}if(this.get_applicationDisplayPictureUrl()!==value){this.$5.$A(null,null,value.toString(),null);}return value;},get_applicationDisplayName:function(){return this.$5.get_applicationDisplayName();},set_applicationDisplayName:function(value){this.$6E();this.$70(2);if(!Microsoft.Live.Messenger.IMAddressPresence.isDisplayNameValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$13,'value');}if(this.get_applicationDisplayName()!==value){this.$5.$A(null,value,null,null);}return value;},get_applicationPersonalMessage:function(){return this.$5.get_applicationPersonalMessage();},set_applicationPersonalMessage:function(value){this.$6E();this.$70(2);if(!Microsoft.Live.Messenger.IMAddressPresence.isPersonalMessageValid(value)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$22,'value');}if(this.get_applicationPersonalMessage()!==value){this.$5.$A(null,null,null,value);}return value;},get_displayName:function(){var $0=this.get_contact();if(this.get_$2C()&&!String.isNullOrEmpty($0.get_fullName())){return $0.get_fullName();}else if(!String.isNullOrEmpty(this.get_applicationDisplayName())){return this.get_applicationDisplayName();}else if(!String.isNullOrEmpty(this.get_presence().get_displayName())){return this.get_presence().get_displayName();}else{return this.get_identity().get_liveId();}},get_address:function(){return this.$3;},get_contact:function(){return this.$4;},get_presence:function(){return this.$3.get_presence();},get_endpoints:function(){return this.$3.get_endpoints();},get_localEndpoint:function(){return this.$5;},get_conversations:function(){return this.$10;},get_alerts:function(){return this.$12;},get_contacts:function(){return this.$6;},get_applicationContacts:function(){return this.$B.get_contacts();},get_$2B:function(){return this.$B;},get_$2C:function(){return this.get_settings().get_displayNameMode()===1;},get_allowedContacts:function(){return this.$7;},get_blockedContacts:function(){return this.$8;},get_pendingContacts:function(){return this.$C;},get_onlineContacts:function(){return this.$A.get_$2();},get_offlineContacts:function(){return this.$A.get_$3();},get_emailOnlyContacts:function(){return this.$D;},get_appearOfflineToContacts:function(){return this.$9;},get_groups:function(){return this.$11;},get_services:function(){switch(this.$23){case 2:return 2;case 0:return 0;case 3:return 3;case 1:return 1;default:return 0;}},set_services:function(value){this.$71();if(value!==this.get_services()){switch(value){case 2:this.$42(2);break;case 3:this.$42(3);break;case 0:this.$42(0);break;case 1:this.$42(1);break;default:throw Microsoft.Live.Messenger.M$A.$5('Services');}if(this.$1D===2){this.$5B(this.$23);}}return value;},get_settings:function(){return this.$14;},get_status:function(){switch(this.get_$31()){case 2:return 2;case 6:case 0:case 4:return 0;case 1:return 1;case 3:return 3;case 5:return 4;default:return 0;}},get_mailbox:function(){return this.$19;},get_networks:function(){return this.$13;},get_messageFactory:function(){return this.$1A;},set_messageFactory:function(value){this.$6E();this.$6F([3,0]);if(value!==this.$1A){this.$1A=value;if(this.$1A!=null){this.$1A.$7();}this.onPropertyChanged('MessageFactory');}return value;},get_presenceFactory:function(){return this.$1B;},set_presenceFactory:function(value){this.$6E();this.$6F([3,0]);if(value!==this.$1B){this.$1B=value;this.onPropertyChanged('PresenceFactory');}return value;},get_instances:function(){return this.$17;},get_$2D:function(){return this.$1C;},get_$2E:function(){return (this.get_$31()===6);},get_$2F:function(){return this.$A;},get_$30:function(){return this.$20;},get_$31:function(){return this.$1D;},set_$31:function($p0){if($p0!==this.$1D){MSH.Logger.logStateChange(2,this.$18,'User.State','Changing state',MC.$create_StateChangeLogEntryInfo('User.State',Microsoft.Live.Messenger.M$1.toString($p0)));var $0=this.get_status();this.$1D=$p0;if(this.$1D===2&&!this.$2.get_reloaded()&&!this.$26){this.$5.$B(this.$1A.get_$5(),this.$5.get_presence().get_extensions().get_$14());}if($0!==this.get_status()){this.onPropertyChanged('Status');}if(this.$1D===2){this.$1.$5();}else if(this.$1D===4){var $1=MC.ServiceData.createEmpty(2);$1.set_status(1);this.$3.$1A([$1.get_info()]);if(Type.canCast(this.$2,Microsoft.Live.Messenger.M$23)){this.$2.dispose();}}}return $p0;},add_addContactCompleted:function(value){this.$32=ss.Delegate.combine(this.$32,value);},remove_addContactCompleted:function(value){this.$32=ss.Delegate.remove(this.$32,value);},$32:null,add_alertReceived:function(value){this.$33=ss.Delegate.combine(this.$33,value);},remove_alertReceived:function(value){this.$33=ss.Delegate.remove(this.$33,value);},$33:null,add_signedOutRemotely:function(value){this.$34=ss.Delegate.combine(this.$34,value);},remove_signedOutRemotely:function(value){this.$34=ss.Delegate.remove(this.$34,value);},$34:null,add_signedOut:function(value){this.$35=ss.Delegate.combine(this.$35,value);},remove_signedOut:function(value){this.$35=ss.Delegate.remove(this.$35,value);},$35:null,add_signedIn:function(value){this.$36=ss.Delegate.combine(this.$36,value);},remove_signedIn:function(value){this.$36=ss.Delegate.remove(this.$36,value);},$36:null,add_signInCompleted:function(value){this.$37=ss.Delegate.combine(this.$37,value);},remove_signInCompleted:function(value){this.$37=ss.Delegate.remove(this.$37,value);},$37:null,add_signOutCompleted:function(value){this.$38=ss.Delegate.combine(this.$38,value);},remove_signOutCompleted:function(value){this.$38=ss.Delegate.remove(this.$38,value);},$38:null,add_signOutEndpointCompleted:function(value){this.$39=ss.Delegate.combine(this.$39,value);},remove_signOutEndpointCompleted:function(value){this.$39=ss.Delegate.remove(this.$39,value);},$39:null,add_propertyChanged:function(value){this.$3A=ss.Delegate.combine(this.$3A,value);},remove_propertyChanged:function(value){this.$3A=ss.Delegate.remove(this.$3A,value);},$3A:null,findContactById:function(id){if(String.isNullOrEmpty(id)){throw Microsoft.Live.Messenger.M$A.$1('id',id);}return this.$E.$14(id);},signIn:function(userState){this.$3B(userState,true);},$3B:function($p0,$p1){this.$6D();this.$21=Date.get_now();if((this.get_$31()!==5)&&(this.get_$31()!==0)){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$2E);}var $0=new Microsoft.Live.Messenger.M$16($p0,$p1);if(this.get_$31()===5){this.$25.$8();if(this.$26){this.$3D($0);return;}}if((this.$3.get_presence().get_status()===0)&&(this.$23!==1)&&(this.$23!==2)){var $1=MC.ServiceData.createEmpty(2);if(MC.Compatibility.get_useLastKnownUserStatus()){$1.set_status(this.$14.get_$6());}if($1.get_status()===0||$1.get_status()===1){$1.set_status(2);}this.$3.$1A([$1.get_info()]);}this.set_$31(1);this.$16.signIn(this.$3.get_$13().toArray(),this.$23,$0);},triggerFakeAutoReconnect:function(){},signOut:function(locations,userState){if(arguments.length===0){locations=1;}if(this.get_$31()===5){if((locations===3)||(locations===1)){this.$25.$A();return;}}this.$6E();var $0=0;if((locations===3)||(locations===1)){this.get_presence().$9();}var $1=null;switch(locations){case 3:$0=3;break;case 2:if(!Microsoft.Live.Messenger.M$14.get_$13()){$0=2;break;}$1=[];var $enum1=ss.IEnumerator.getEnumerator(this.get_endpoints().get_$16());while($enum1.moveNext()){var $2=$enum1.get_current();if(!$2.get_isInstance()&&$2.get_$9()){$1.add($2.get_id().toString());}}if($1.length===this.get_endpoints().get_$16().length-1){$1=null;$0=2;}else{$0=8;}break;case 1:if(!Microsoft.Live.Messenger.M$14.get_$13()){$0=1;break;}$1=[];var $enum2=ss.IEnumerator.getEnumerator(this.get_endpoints().get_$16());while($enum2.moveNext()){var $3=$enum2.get_current();if($3!==this.$5&&$3.get_isInstance()&&$3.get_$9()){$1.add($3.get_id().toString());}}if($1.length===0){$1=null;$0=1;}else{$0=8|1;}break;default:throw Microsoft.Live.Messenger.M$A.$5('locations');}if(($0&1)===1){this.set_$31(3);}this.$16.signOut($0,($1==null)?null:MSH.CollectionHelper.toArray($1),true,new Microsoft.Live.Messenger.M$17(null,locations,userState));},signOutEndpoint:function(endpoint,userState){if(endpoint==null){throw Microsoft.Live.Messenger.M$A.$0('endpoint');}if(!this.$3.get_endpoints().$B(endpoint)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$1F,'endpoint');}if((this.get_$31()===5)&&(this.$5===endpoint)){this.$25.$A();return;}this.$6E();var $0;var $1;var $2;if(this.$5===endpoint){$2=null;$0=1;$1=1;this.get_presence().$9();this.set_$31(3);}else{$2=[endpoint.get_id().toString()];$0=8;$1=2;}this.$16.signOut($0,$2,true,new Microsoft.Live.Messenger.M$17(endpoint,$1,userState));},addContact:function(address,inviteMessage,userState){this.$6E();this.$6F([2,3,0]);if(String.isNullOrEmpty(inviteMessage)){inviteMessage=String.Empty;}if(this.$7C(address)){var $3=new Microsoft.Live.Messenger.AddContactCompletedEventArgs(2,null,userState);this.$3E($3);return;}address=address.trim();var $0=Microsoft.Live.Messenger.IMAddress.$1F(address);var $1=MC.$create_IMAddressInfo(address,$0,0);var $2=this.$47($1);if($2!=null){if($2.get_contact().get_isAllowed()||$2.get_contact().get_isBlocked()){if($2.get_isBlocked()){$2.get_contact().allow();}}}if(this.$48($1)!=null){this.$3E(new Microsoft.Live.Messenger.AddContactCompletedEventArgs(0,$2.get_contact(),userState));return;}this.$16.addAddress(address,inviteMessage,userState);},appearOnlineToContacts:function(contacts){if(contacts==null){throw Microsoft.Live.Messenger.M$A.$0('contacts');}this.$6F([2,3,0]);var $0=[];var $enum1=ss.IEnumerator.getEnumerator(contacts);while($enum1.moveNext()){var $1=$enum1.get_current();if($1.get_$47()){$0.add($1);}}if($0.length!==0){this.$67($0,2,String.Empty,null);}if(this.get_presence().get_status()===2){this.$3C(contacts);}},appearOnlineToAllContacts:function(){this.appearOnlineToContacts(this.get_contacts());},$3C:function($p0){this.$6F([2,3,0]);var $0=[];var $enum1=ss.IEnumerator.getEnumerator(this.get_contacts());while($enum1.moveNext()){var $1=$enum1.get_current();var $2=false;var $enum2=ss.IEnumerator.getEnumerator($p0);while($enum2.moveNext()){var $3=$enum2.get_current();if($1===$3&&!$1.get_$47()){$2=true;break;}}if(!$2){$0.add($1);}}this.$27={};if($0.length!==0){this.$67($0,1,String.Empty,this.$27);}else{this.$55(this.$27);}},$3D:function($p0){this.set_$31(1);var $0=this.$3.get_$13();if((this.$23===3||this.$23===0)&&this.$25.get_$7()!==$0.imServiceData.get_status()){$0=$0.clone();$0.imServiceData.set_status(this.$25.get_$7());}this.$16.reconnect($0.toArray(),this.$23,$p0);},$3E:function($p0){this.$1F.enqueue($p0);if(this.$1E==null){this.$1E=new MSH.Timer(ss.Delegate.create(this,this.$7D),null,3,MSH.Timeout.infinite);}},$3F:function($p0,$p1){if($p1.get_propertyNamePascal()==='DisplayName'){this.onPropertyChanged($p1.get_propertyNamePascal());}},$40:function($p0,$p1){switch($p1.get_propertyNamePascal()){case 'ApplicationDisplayName':case 'ApplicationDisplayPictureUrl':case 'ApplicationPersonalMessage':case 'DisplayName':this.onPropertyChanged($p1.get_propertyNamePascal());break;}},$41:function(){(this.$2).$20();},$42:function($p0){if(this.$23!==$p0){if(($p0===1)||($p0===2)){this.$10.$1C();if(this.get_presence().get_status()!==0){this.$79();}}this.$23=$p0;this.onPropertyChanged('Services');}},$43:function($p0,$p1){var $0=this.$49($p0);if($0!=null){$0.$1A($p1);$0.$1C($p0);}},$44:function($p0,$p1){var $0=this.$47($p0);if($0!=null){$0.$1B($p1);}},$45:function($p0){this.$14.$B($p0);},$46:function($p0,$p1){return Microsoft.Live.Messenger.Conversation.$1F(this,$p0,$p1);},$47:function($p0){return this.$E.$10($p0);},$48:function($p0){return this.$E.$20($p0);},$49:function($p0){return this.$E.$13($p0);},$4A:function($p0){return this.$E.$18([$p0]);},$4B:function($p0){var $0=MSH.StringHelper.toLowerCase($p0.name);if(Object.keyExists(this.$F,$0)){return this.$F[$0];}return null;},$4C:function($p0){var $0=this.$4B($p0);if($0==null){var $1=MSH.StringHelper.toLowerCase($p0.name);this.$F[$1]=$0=new Microsoft.Live.Messenger.Group(this,$p0);}return $0;},$4D:function($p0){this.$1C=$p0;Microsoft.Live.Messenger.M$14.$8($p0);this.get_networks().get_item('WL').$21(this.$1C.photoUrl,this.$1C.profileUrl,this.$1C.sendMessageUrl,this.$1C.profileUrl);},$4E:function($p0,$p1,$p2){this.$53();var $0={};for(var $1=0;$1<$p0.length;$1++){var $2=this.$4C($p0[$1]);this.$11.$C($2);var $enum1=ss.IEnumerator.getEnumerator($p0[$1].contactIds);while($enum1.moveNext()){var $3=$enum1.get_current();if(!Object.keyExists($0,$3)){$0[$3]=[];}($0[$3]).add($2);}}this.$4F($p1.getEnumerator(),$0,100,$p2);},$4F:function($p0,$p1,$p2,$p3){var $0=$p2;var $1=false;while(($p2===Microsoft.Live.Messenger.User.$0||$0>0)&&($1=$p0.moveNext())){var $2=$p0.get_current();var $3=$2[0];if(MSH.ContactHelper.isUnknownContact($3)&&$3.addresses.length>1){var $4=[];while($p0.moveNext()){$4.add($p0.get_current());}var $5=$3.addresses.length;for(var $6=0;$6<$5;$6++){var $7=MC.$create_ContactInfo($3.id,$3.nickname,[$3.addresses[$6]]);$4.add([$7]);}$p0=$4.getEnumerator();}else{this.$51($2,$p1);$0-=$2.length;}}if($1){new MSH.Timer(ss.Delegate.create(this,function(){
var $1_0=Date.get_now();this.$4F($p0,$p1,$p2,$p3);var $1_1=MSH.DateTimeHelper.subtract(Date.get_now(),$1_0);MSH.PerfCollector.get_instance().addPerfCounterValue('UserPopulateBatch-MessageHandlingTime',$1_1);}),null,1,MSH.Timeout.infinite);}else{this.$50();$p3.invoke(null,ss.EventArgs.Empty);}},$50:function(){this.$60(this.get_presence().get_$6().imServiceData.get_status(),0,true);this.$11.$14();this.$54();},$51:function($p0,$p1){var $0=$p0[0];if($0.id==null){this.$4.$3F($0.nickname);this.$4.get_$4A().$E($0.firstName,$0.lastName);}else{this.$E.$F($p0,this.$52($p0,$p1));}},$52:function($p0,$p1){var $0=[];for(var $1=0;$1<$p0.length;$1++){var $2=$p0[$1];if(Object.keyExists($p1,$2.id)){var $3=$p1[$2.id];for(var $4=0;$4<$3.length;$4++){var $5=$3[$4];if(!$0.contains($5)){$0.add($5);}}}}return $0;},$53:function(){this.$6.$9();this.$7.$9();this.$8.$9();this.$C.$9();this.$9.$9();this.$A.get_$3().$9();this.$A.get_$2().$9();this.$12.$9();var $enum1=ss.IEnumerator.getEnumerator(this.$11.get_$5());while($enum1.moveNext()){var $0=$enum1.get_current();$0.get_contacts().$9();}this.$11.$9();},$54:function(){this.$6.$A();this.$7.$A();this.$8.$A();this.$C.$A();this.$9.$A();this.$11.$A();this.$A.get_$3().$A();this.$A.get_$2().$A();this.$12.$A();var $enum1=ss.IEnumerator.getEnumerator(this.$11.get_$5());while($enum1.moveNext()){var $0=$enum1.get_current();$0.get_contacts().$A();}},$55:function($p0){if($p0!=null){if($p0===this.$27&&this.get_presence().get_status()===2){this.get_presence().set_status(1);}this.$27=null;}},onAddContactCompleted:function(e){if(this.$32!=null){this.$32.invoke(this,e);}},onAlertReceived:function(e){if(this.$33!=null){this.$33.invoke(this,e);}},onSignInCompleted:function(e){if(this.$37!=null){this.$37.invoke(this,e);}},onSignOutCompleted:function(e){if(this.$38!=null){this.$38.invoke(this,e);}},onSignOutEndpointCompleted:function(e){if(this.$39!=null){this.$39.invoke(this,e);}},onSignedOutRemotely:function(e){if(this.$34!=null){this.$34.invoke(this,e);}},onSignedOut:function(e){if(this.$35!=null){this.$35.invoke(this,e);}},onSignedIn:function(e){if(this.$36!=null){this.$36.invoke(this,e);}},onPropertyChanged:function(propertyName){if(propertyName==='DisplayName'){if(this.$22===this.get_displayName()){return;}else{this.$22=this.get_displayName();}}if(this.$3A!=null){this.$3A.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs(propertyName));}},$56:function($p0){this.$6E();this.$16.addGroup($p0.get_$3(),null);},$57:function($p0,$p1){this.$6E();var $0=MSH.StringHelper.toLowerCase($p0.get_$3().name);var $1=MSH.StringHelper.toLowerCase($p1);this.$F[$1]=$p0;delete this.$F[$0];$p0.$7($p1);this.$16.renameGroup($p0.get_$3(),null);},$58:function($p0){this.$6E();var $enum1=ss.IEnumerator.getEnumerator($p0.get_contacts());while($enum1.moveNext()){var $1=$enum1.get_current();$1.$3B($p0);}var $0=MSH.StringHelper.toLowerCase($p0.get_$3().name);delete this.$F[$0];this.$16.removeGroup($p0.get_$3(),null);},$59:function($p0){this.$6E();this.$16.updateSettings($p0,null);this.$14.$B($p0);},$5A:function($p0){this.$6D();this.$16.updateUXSettings($p0);this.$5D($p0);},$5B:function($p0){this.$6E();this.$16.updateServices($p0,true);this.$13.$18($p0);},$5C:function($p0,$p1){this.$6E();this.$16.updateNetwork($p0,$p1);},$5D:function($p0){this.$14.$C($p0);},$5E:function($p0){this.$15=$p0;},$5F:function($p0){var $0=this.get_presence().get_$6().imServiceData.get_status();var $1=[$p0.get_info()];if(this.get_$31()===2){this.$16.updateServiceData($1,null);}this.$3.$1A($1);if($p0.get_service()===2){var $2=$p0;this.$60($2.get_status(),$0,false);}},$60:function($p0,$p1,$p2){if($p0===3){this.$E.$A(true,$p2);}if($p1===3&&$p0!==3&&$p0!==0){this.$E.$A(false,$p2);}},$61:function($p0){this.$20.add($p0);},$62:function($p0){if(!$p0.get_reloaded()){this.onAlertReceived(new Microsoft.Live.Messenger.AlertReceivedEventArgs($p0));}this.get_alerts().$13($p0);},$63:function($p0,$p1){this.$6E();for(var $0=0;$0<$p0.get_linkedContacts().get_count();$0++){this.$16.addContactToGroup($p0.get_linkedContacts().get_item($0).get_$9(),$p1.get_$3(),null);}$p0.$3A($p1);},$64:function($p0,$p1){this.$6E();for(var $0=0;$0<$p0.get_linkedContacts().get_count();$0++){this.$16.removeContactFromGroup($p0.get_linkedContacts().get_item($0).get_$9(),$p1.get_$3(),null);}$p0.$3B($p1);},$65:function($p0,$p1,$p2){this.$6E();this.$16.updateContact($p0.get_$9(),$p1,$p2,null);$p0.$D($p1,$p2);},$66:function($p0,$p1){this.$6E();this.$16.updateContactNickname(MC.$create_ContactInfo($p0.get_$9().id,$p1,$p0.get_$9().addresses),null);$p0.get_$A().$3F($p1);},$67:function($p0,$p1,$p2,$p3){this.$6E();var $0=[];var $1=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $4=$enum1.get_current();if((!$4.get_$47()&&$p1===1)||($4.get_$47()&&$p1===2)){$0.add($4);var $enum2=ss.IEnumerator.getEnumerator($4.get_linkedContacts());while($enum2.moveNext()){var $5=$enum2.get_current();if(!$5.get_network().get_$1A()){$1.add($5.get_$9());}}}}if($1.length===0){this.$55($p3);return;}this.$16.updateIMAvailability(MSH.CollectionHelper.toArray($1),$p1,$p2,$p3);var $2=($p1===1)?64:0;var $3=($p1===2)?64:0;var $enum3=ss.IEnumerator.getEnumerator($0);while($enum3.moveNext()){var $6=$enum3.get_current();for(var $7=0;$7<$6.get_linkedContacts().get_count();$7++){var $8=$6.get_linkedContacts().get_item($7);if(!$8.get_network().get_$1A()){$8.$D($2,$3);}}}},$68:function($p0,$p1){this.$6E();this.$16.addAddressToContact($p0.get_$12(),$p1.get_$9(),null);},$69:function($p0,$p1){this.$6E();this.$16.removeAddressFromContact($p0.get_$12(),$p1.get_$9(),null);},onCreateMailbox:function(){return new Microsoft.Live.Messenger.Mailbox(this);},onCreateConversation:function(address){return new Microsoft.Live.Messenger.Conversation(this,address);},$6A:function(){var $0=this.onCreateMailbox();if($0==null||$0.get_$7()!==this){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$20,'mailbox');}this.$19=$0;},$6B:function($p0){var $0=this.onCreateConversation($p0);if($0==null||$0.get_user()!==this){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$21);}return $0;},$6C:function($p0,$p1){this.get_conversations().set_$17($p0);this.get_conversations().set_$18($p1);try{return this.$6B($p0);}finally{this.get_conversations().set_$17(null);}},$6D:function(){if(this.get_$31()===6){throw Microsoft.Live.Messenger.M$A.$4('User');}},$6E:function(){this.$6D();if(this.get_$31()!==2){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$30);}},$6F:function($p0){var $0=this.get_services();for(var $1=0;$1<$p0.length;$1++){if($p0[$1]===$0){return;}}throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$44);},$70:function($p0){if(this.$2.get_$1C().authType!==$p0){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$36);}},$71:function(){this.$6D();if((this.get_$31()!==0)&&(this.get_$31()!==2)){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$30);}},dispose:function(){if(this.get_$31()===6){return;}var $0=this.get_$31();this.set_$31(6);if(($0===1)||($0===2)){var $1=1;this.$16.signOut($1,null,true,new Microsoft.Live.Messenger.M$17(null,1,null));}this.$25.dispose();},$72:function($p0,$p1){this.$16.conversationCreate($p0,$p1.get_$1D());},$73:function($p0,$p1,$p2){this.$16.conversationInviteAddress($p0,$p1,$p2);},$74:function($p0,$p1,$p2){this.$16.conversationSendMessage($p0,$p1,$p2);},$75:function($p0,$p1){this.$16.conversationUpdateHasUnreadMessages($p0,$p1);},$76:function($p0){this.$16.conversationClose($p0);},$77:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){if(this.get_$2E()){return;}if($p6==null){$p6=new Microsoft.Live.Messenger.M$16(null,true);}var $0=0;if($p0!==0){$0=1;if(this.$14.get_autoReconnectEnabled()&&$p0!==3){this.$25.$B(-1);}else{this.set_$31(4);}if($p6.$1){if(MC.Compatibility.get_version()!==1&&MC.Compatibility.get_version()!==2&&$p0===3){$0=2;}var $1=new Microsoft.Live.Messenger.SignInCompletedEventArgs($0,$p6.$0);$1.set_serverName($p5);this.onSignInCompleted($1);this.$81($0,$p4);}}else{this.$25.$9();var $2=ss.Delegate.create(this,function(){
if(!this.$26){this.$45($p3);}this.$B.$1D();this.$16.onSignInPopulateCompleted();this.set_$31(2);this.$26=true;this.onSignedIn(new Microsoft.Live.Messenger.SignedInEventArgs($p5));if($p6.$1){var $1_0=new Microsoft.Live.Messenger.SignInCompletedEventArgs($0,$p6.$0);$1_0.set_serverName($p5);this.onSignInCompleted($1_0);this.$81($0,$p4);}});if(this.$26){$2.invoke(null,ss.EventArgs.Empty);}else if($p2!=null){this.$4E($p1,$p2,$2);}}},$78:function($p0,$p1){$p0=($p0&this.$14.get_autoReconnectEnabled())===1;this.$B.$1E();if($p0){this.$25.$B($p1);}else{if(this.get_$31()!==6){this.set_$31(4);}}this.$79();this.$3.get_endpoints().$19();this.$17.$14(new Array(0));},$79:function(){var $0=MC.ServiceData.createEmpty(2);$0.set_status(1);this.$3.$1A([$0.get_info()]);},$7A:function(){this.$E.$9(false,null);},$7B:function($p0){if($p0!==this.$24){this.$24=$p0;this.onPropertyChanged('AutoReconnectWaitTime');}},$7C:function($p0){var $0=MC.$create_IMAddressInfo($p0,2,1);var $1=this.$47($0);return ($1!=null);},$7D:function($p0){var $0=this.$1F;this.$1F=[];var $1=this.$1E;this.$1E=null;$1.dispose();while($0.length>0){var $2=$0.dequeue();this.onAddContactCompleted($2);}},$7E:function($p0,$p1,$p2){if($p0==null){return;}this.$10.$1A();var $enum1=ss.IEnumerator.getEnumerator($p0.conversations);while($enum1.moveNext()){var $0=$enum1.get_current();var $1=$0.id;this.$1.$6(this,$1,$0.roster,$0.hasUnreadMessages,!$p2);if($p1==null){continue;}this.$80($p1,$1,$p2);}if($p2){this.$10.$1B();}},$7F:function(){this.$10.$1B();},$80:function($p0,$p1,$p2){if(($p0==null)||($p0.length===0)){return;}for(var $0=0,$1=$p0.length;$0<$1;$0++){var $2=$p0[$0];if($2.conversationId===$p1){var $3=$2.messages;if(($3==null)||($3.length===0)){break;}for(var $4=0,$5=$3.length;$4<$5;$4++){var $6=$3[$4];this.$1.$7($p1,$6,!$p2);}break;}}},$81:function($p0,$p1){if(this.$2.get_reloaded()){return;}this.$61(MSH.$create_ReportKeyValue(20,($p0===0&&$p1!=null)?$p1:'failure'));this.$61(MSH.$create_ReportKeyValue(17,($p0===0)?MSH.DateTimeHelper.subtract(Date.get_now(),this.$21).toString():'failure'));this.$61(MSH.$create_ReportKeyValue(16,($p0===0)?'success':'failure'));this.$61(MSH.$create_ReportKeyValue(19,($p0===0&&this.$2.get_$13()!=null)?this.$2.get_$13():'failure'));this.$20.report();}}
Microsoft.Live.Messenger.M$1D=function(user){this.$2=-1;this.$5=user;}
Microsoft.Live.Messenger.M$1D.prototype={$2:0,$3:null,$4:null,$5:null,$6:0,get_$7:function(){return this.$6;},dispose:function(){this.$C();},$8:function(){this.$C();},$9:function(){this.$C();this.$2=-1;},$A:function(){this.$C();this.$2=-1;this.$5.set_$31(4);this.$5.onSignedOut(new Microsoft.Live.Messenger.SignedOutEventArgs(0));},$B:function($p0){if(this.$5.get_$31()===2){this.$6=this.$5.get_address().get_$13().imServiceData.get_status();}this.$E($p0);this.$5.set_$31(5);},$C:function(){this.$D(-1);if(this.$3!=null){this.$3.dispose();this.$3=null;}},$D:function($p0){this.$5.$7B($p0);},$E:function($p0){if(this.$3==null){this.$3=new MSH.Timer(ss.Delegate.create(this,this.$F),null,MSH.Timeout.infinite,MSH.Timeout.infinite);}if($p0>=0){this.$2=$p0;}else if(this.$2===-1){if(this.$5.get_settings().get_autoReconnectInitialWaitTime()>=0){this.$2=Math.min(this.$5.get_settings().get_autoReconnectInitialWaitTime(),120);}else{this.$2=MSH.MathHelper.random(2,60);}}else{this.$2=Math.min(this.$2+30,120);}this.$4=MSH.DateTimeHelper.addMilliseconds(Date.get_now(),1000*this.$2);this.$D(this.$2);this.$5.set_$31(5);this.$3.change(1000,1000);},$F:function($p0){var $0=Math.round(MSH.DateTimeHelper.subtract(this.$4,Date.get_now())/1000);if($0>0){this.$D($0);}else{this.$3.change(MSH.Timeout.infinite,MSH.Timeout.infinite);this.$D(-1);this.$5.$3B(null,false);}}}
Microsoft.Live.Messenger.M$1E=function(identity){this.$2=identity;}
Microsoft.Live.Messenger.M$1E.prototype={$0:null,$1:null,$2:null,$3:null,get_$4:function(){return this.$3;},set_$4:function($p0){this.$3=$p0;return $p0;},onServicesChanged:function($p0){this.$3.$42($p0);},onAlertNotificationReceived:function($p0){var $0=new Microsoft.Live.Messenger.Alert($p0.actionUrl,$p0.subscrUrl,$p0.iconUrl,$p0.timestamp,$p0.message);if($p0.reloaded){$0.$6(true);}this.$3.$62($0);},onUpdateNetworkCompleted:function($p0,$p1,$p2){var $0=this.$3.get_networks().get_item($p1);if($0!=null){$0.$23($p0,$p2);}},onNetworksChanged:function($p0){this.$3.get_networks().$19($p0);},onNetworkStatusChanged:function($p0,$p1){var $0=this.$3.get_networks().get_item($p0);if($0!=null){$0.$22($p1);}},onGetApplicationContactsInfoCompleted:function($p0,$p1){this.$3.get_$2B().$1A($p0,$p1);},onGetConsentStatusCompleted:function($p0,$p1){this.$2.$1B($p0,$p1);},onInitializeSignInStatusCompleted:function($p0,$p1){this.$2.$19($p0,$p1);},onSignedIn:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){this.$3.$77($p0,$p1,$p2,$p3,$p4,$p5,$p6);},onPersistedConversationsLoaded:function($p0,$p1,$p2){this.$3.$7E($p0,$p1,$p2);},$5:function(){this.$9();this.$A();},onSignedOut:function($p0,$p1,$p2){var $0=0;if($p0!==0){$0=1;}var $1=$p2;var $2=$1.$1;var $3=$1.$0;if(($p1&1)===1){this.$3.$78(false,0);}var $4=new Microsoft.Live.Messenger.SignOutCompletedEventArgs($0,$2,$3,$1.$2);if(!this.$3.get_$2E()){if($3!=null){this.$3.onSignOutEndpointCompleted($4);}else{this.$3.onSignOutCompleted($4);}if(($p1&1)===1){if(this.$3.get_$31()!==5){this.$3.onSignedOut(new Microsoft.Live.Messenger.SignedOutEventArgs(0));}this.$3.$7A();this.$3.get_networks().$1D();}}},onInstancesChanged:function($p0){if(!this.$3.get_$2E()&&this.$3.get_$31()!==4){this.$3.get_instances().$14($p0);}},onTicketExpired:function(){if(!this.$3.get_$2E()){this.$3.$41();}},onUpdateApplicationContactsCompleted:function($p0,$p1,$p2){if(!this.$3.get_$2E()){this.$3.get_$2B().$1B($p0,$p1,$p2);}},onAppContactsRoleListsUpdated:function($p0,$p1){},onAddressAdded:function($p0,$p1,$p2){var $0=1;var $1=null;if($p0===0){$0=0;if($p1!=null&&$p1.addresses.length>0){$1=this.$3.$4A($p1);var $2=($1.get_$48())?16:0;var $3=$1.$45($p1);if($3!=null){$3.$D(1|2,$2);$3.set_id($p1.id);}}}else if($p0===2){$0=2;}if($p1!=null&&$p1.addresses.length===0){$0=2;}this.$3.onAddContactCompleted(new Microsoft.Live.Messenger.AddContactCompletedEventArgs($0,$1,$p2));},onGroupAdded:function($p0,$p1,$p2){if($p0===0){var $0=this.$3.$4C($p1);if($0!=null){$0.get_$3().id=$p1.id;}}},onGroupRenamed:function($p0,$p1,$p2){},onGroupRemoved:function($p0,$p1,$p2){},onContactAddedToGroup:function($p0,$p1,$p2,$p3){},onContactRemovedFromGroup:function($p0,$p1,$p2,$p3){},onContactUpdated:function($p0,$p1,$p2){if(($p0===0)&&($p1!=null)){var $0=this.$3.$4A($p1);var $1=$0.$45($p1);$1.set_id($p1.id);var $enum1=ss.IEnumerator.getEnumerator($p1.addresses);while($enum1.moveNext()){var $2=$enum1.get_current();var $3=this.$3.$47($2);$3.get_$12().id=$2.id;}}},onIMAvailabilityUpdated:function($p0,$p1){if($p0===0){this.$3.$55($p1);}},onUserServicesUpdated:function($p0){},onUserSettingsUpdated:function($p0,$p1){},onUserUXSettingsUpdated:function($p0){},onUserServiceDataUpdated:function($p0,$p1){},onMailNotification:function($p0){this.$3.get_mailbox().$8($p0);},onPendingContacts:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.get_current();var $2=this.$3.$47($1.addresses[0]);if($2!=null){$0.add($2);continue;}$2=this.$3.$49($1.addresses[0]);if($2.get_linkedContact().get_id()==null&&!String.isNullOrEmpty($1.id)){$2.get_linkedContact().set_id($1.id);}$0.add($2);this.$3.get_pendingContacts().$14($2);}var $enum2=ss.IEnumerator.getEnumerator(this.$3.get_pendingContacts());while($enum2.moveNext()){var $3=$enum2.get_current();if(!$0.contains($3.get_imAddress())){this.$3.get_pendingContacts().$D($3);}}},onServiceDataChanged:function($p0,$p1){this.$3.$43($p0,$p1);},onServiceDataDeleted:function($p0,$p1){this.$3.$44($p0,$p1);},onSettingsChanged:function($p0){this.$3.$45($p0);},onSignedOutRemotely:function($p0,$p1){var $0=false;var $1=1;switch($p0){case 2:$1=2;$0=true;break;case 3:$1=3;$0=true;break;case 4:$1=4;break;case 1:$1=1;break;case 6:case 5:$0=true;$1=5;break;default:return;}this.$3.$78($0,$p1);this.$3.onSignedOutRemotely(new Microsoft.Live.Messenger.SignedOutRemotelyEventArgs());this.$3.onSignedOut(new Microsoft.Live.Messenger.SignedOutEventArgs($1));this.$3.$7A();},onConfigurationChanged:function($p0){this.$3.$4D($p0);},onNotifyWebSignInPendingEventsCompleted:function(){this.$5();this.$3.$7F();},$6:function($p0,$p1,$p2,$p3,$p4){var $0=new Array($p2.length-1);var $1=[];var $2=0;var $3=!String.isNullOrEmpty($p0.get_applicationId())&&$p2[0].type===11;for(var $4=0;$4<$p2.length;$4++){var $5=$p0.$49($p2[$4]);if($5.get_$B()){continue;}$5.$1C($p2[$4]);if($3&&$p2[$4].applicationId===$p0.get_applicationId()){$1.add($5);}$0[$2++]=$5;}if($1.length>0){$p0.get_$2B().$1F(MSH.CollectionHelper.toArray($1));}if(!$p4){this.$8($p0,$p1,$p3,$0);}else{this.$B($p0,$p1,$p3,$0);}},onConversationCreated:function($p0,$p1){var $0=false;var $1=this.$3.get_$31()!==2;this.$6(this.$3,$p0,$p1,$0,$1);},onConversationInviteAddressCompleted:function($p0,$p1,$p2,$p3){var $0=0;if($p1!==0){$0=1;}this.$3.get_conversations().$1D($p0,$0,$p2,$p3);},onConversationAddressJoined:function($p0,$p1){this.$3.get_conversations().$1E($p0,$p1);},onConversationAddressLeft:function($p0,$p1){this.$3.get_conversations().$1F($p0,$p1);},onConversationMessageReceived:function($p0,$p1){var $0=this.$3.get_$31()!==2;this.$7($p0,$p1,$0);},onConversationHasUnreadMessagesUpdated:function($p0,$p1){this.$3.get_conversations().$21($p0,$p1);},onConversationClosed:function($p0){this.$3.get_conversations().$20($p0);},$7:function($p0,$p1,$p2){if($p2){var $0={};$0['id']=$p0;$0['messageInfo']=$p1;if(this.$1==null){this.$1=[];}this.$1.enqueue($0);return;}if($p1.type===255){this.$3.get_conversations().$23($p0,$p1.sender);}else{this.$3.get_conversations().$22($p0,$p1);}},onConversationSendMessageFailed:function($p0,$p1,$p2,$p3){var $0=1;switch($p1){case 5:$0=2;break;case 7:$0=4;break;case 6:$0=3;break;}this.$3.get_conversations().$24($p0,$0,$p2,$p3);},onConversationUpdatedId:function($p0,$p1){this.$3.get_conversations().$25($p0,$p1);},$8:function($p0,$p1,$p2,$p3){var $0=$p0.$46($p1,$p3);$0.$1D($p2);},$9:function(){if(this.$0==null){return;}while(this.$0.length>0){var $0=this.$0.dequeue();this.$8(this.$3,$0['id'].toString(),$0['hasUnreadMessages'],$0['addresses']);}},$A:function(){if(this.$1==null){return;}while(this.$1.length>0){var $0=this.$1.dequeue();var $1=false;this.$7($0['id'].toString(),$0['messageInfo'],$1);}},$B:function($p0,$p1,$p2,$p3){if(this.$0==null){this.$0=[];}var $0={};$0['id']=$p1;$0['addresses']=$p3;$0['hasUnreadMessages']=$p2;this.$0.enqueue($0);}}
Microsoft.Live.Messenger.M$1B=function(){this.$0={};}
Microsoft.Live.Messenger.M$1B.prototype={$1:0,$2:function($p0){this.$1++;var $0=this.$1.toString();if(ss.isNullOrUndefined($p0)){$p0=null;}this.$0[$0]=$p0;return $0;},$3:function($p0){var $0=$p0;if(Object.keyExists(this.$0,$0)){var $1=this.$0[$0];delete this.$0[$0];return $1;}return null;}}
Microsoft.Live.Messenger.M$1C=function(channelUrl,channelEndpointType){this.$2=channelEndpointType;if(Microsoft.Live.Messenger.M$1C.$0!=null){Microsoft.Live.Messenger.M$1C.$6=Microsoft.Live.Messenger.M$1C.$0;this.$9(channelEndpointType);return;}if(String.isNullOrEmpty(channelUrl)){channelUrl=null;}this.$D(channelUrl);if(Microsoft.Live.Messenger.M$1C.$6==null){var $0=MSH.ChannelHelper.getPreloadedIframe('messenger_iframe');Microsoft.Live.Messenger.M$1C.$6=MSH.ChannelHelper.createParentChannel('Messenger.html',$0,channelUrl,'MessengerChannel');var $1=Microsoft.Live.Messenger.M$1C.$8(channelUrl,1).get_$A();MSH.LogCollector.get_instance().registerMessengerServicesChannel($1);MSH.PerfCollector.get_instance().registerRemoteServiceChannel($1);}this.$9(channelEndpointType);}
Microsoft.Live.Messenger.M$1C.$8=function($p0,$p1){if(MSH.ChannelHelper.canCreateChannel($p0)){return new Microsoft.Live.Messenger.M$1C($p0,$p1);}return null;}
Microsoft.Live.Messenger.M$1C.prototype={$1:null,$2:0,$3:null,$4:false,$9:function($p0){if(Microsoft.Live.Messenger.M$1C.$7==null){Microsoft.Live.Messenger.M$1C.$7=new MC.ChannelEndpointMultiplexer(Microsoft.Live.Messenger.M$1C.$6);}this.$1=Microsoft.Live.Messenger.M$1C.$7.createNewChannelEndpoint($p0);},get_$A:function(){return this.$1;},get_$B:function(){return (this.$1).get_id();},dispose:function(){if(this.$4){return;}this.$4=true;(this.$1).dispose();},get_$C:function(){return window.location.hostname.toLowerCase();},$D:function($p0){if(String.isNullOrEmpty($p0)){return;}$p0=$p0.toLowerCase();var $0=($p0.startsWith('http://'))?'http://':(($p0.startsWith('https://'))?'https://':null);if($0!=null){$p0=$p0.substr($0.length);var $1=$p0.indexOf('/');if($1>=0){var $2=document.domain.toLowerCase();var $3=$p0.substring(0,$1);var $4=$3.indexOf(':');if($4>0&&$4<$1){$3=$3.substring(0,$4);}if(!$3.endsWith($2)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$34,'channelUrl');}}}else{}}}
Microsoft.Live.Messenger.AddContactCompletedEventArgs=function(resultCode,contact,userState){Microsoft.Live.Messenger.AddContactCompletedEventArgs.initializeBase(this);this.$1_0=resultCode;this.$1_1=contact;this.$1_2=userState;}
Microsoft.Live.Messenger.AddContactCompletedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0;},get_contact:function(){return this.$1_1;},get_userState:function(){return this.$1_2;}}
Microsoft.Live.Messenger.AddressChangingEventArgs=function(oldAddress,newAddress){Microsoft.Live.Messenger.AddressChangingEventArgs.initializeBase(this);this.$1_0=oldAddress;this.$1_1=newAddress;}
Microsoft.Live.Messenger.AddressChangingEventArgs.prototype={$1_0:null,$1_1:null,get_oldAddress:function(){return this.$1_0;},get_newAddress:function(){return this.$1_1;}}
Microsoft.Live.Messenger.AlertReceivedEventArgs=function(alert){Microsoft.Live.Messenger.AlertReceivedEventArgs.initializeBase(this);this.$1_0=alert;}
Microsoft.Live.Messenger.AlertReceivedEventArgs.prototype={$1_0:null,get_alert:function(){return this.$1_0;}}
Microsoft.Live.Messenger.InviteAddressCompletedEventArgs=function(resultCode,address,userState){Microsoft.Live.Messenger.InviteAddressCompletedEventArgs.initializeBase(this);if(address==null){throw Microsoft.Live.Messenger.M$A.$0('address');}this.$1_0=resultCode;this.$1_1=address;this.$1_2=userState;}
Microsoft.Live.Messenger.InviteAddressCompletedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0;},get_imAddress:function(){return this.$1_1;},get_userState:function(){return this.$1_2;}}
Microsoft.Live.Messenger.InviteContactCompletedEventArgs=function(resultCode,contact,userState){Microsoft.Live.Messenger.InviteContactCompletedEventArgs.initializeBase(this);if(contact==null){throw Microsoft.Live.Messenger.M$A.$0('contact');}this.$1_0=resultCode;this.$1_1=contact;this.$1_2=userState;}
Microsoft.Live.Messenger.InviteContactCompletedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0;},get_contact:function(){return this.$1_1;},get_userState:function(){return this.$1_2;}}
Microsoft.Live.Messenger.MessageReceivedEventArgs=function(message){Microsoft.Live.Messenger.MessageReceivedEventArgs.initializeBase(this);this.$1_0=message;}
Microsoft.Live.Messenger.MessageReceivedEventArgs.prototype={$1_0:null,get_message:function(){return this.$1_0;}}
Microsoft.Live.Messenger.SendMessageFailedEventArgs=function(resultCode,message,userState){Microsoft.Live.Messenger.SendMessageFailedEventArgs.initializeBase(this);this.$1_0=resultCode;this.$1_1=message;this.$1_2=userState;}
Microsoft.Live.Messenger.SendMessageFailedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0;},get_message:function(){return this.$1_1;},get_userState:function(){return this.$1_2;}}
Microsoft.Live.Messenger.SignedOutEventArgs=function(reason){Microsoft.Live.Messenger.SignedOutEventArgs.initializeBase(this);this.$1_0=reason;}
Microsoft.Live.Messenger.SignedOutEventArgs.prototype={$1_0:0,get_reason:function(){return this.$1_0;}}
Microsoft.Live.Messenger.SignedOutRemotelyEventArgs=function(){Microsoft.Live.Messenger.SignedOutRemotelyEventArgs.initializeBase(this);}
Microsoft.Live.Messenger.SignInCompletedEventArgs=function(resultCode,userState){Microsoft.Live.Messenger.SignInCompletedEventArgs.initializeBase(this);this.$1_0=resultCode;this.$1_1=userState;}
Microsoft.Live.Messenger.SignInCompletedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_resultCode:function(){return this.$1_0;},get_userState:function(){return this.$1_1;},get_serverName:function(){return this.$1_2;},set_serverName:function(value){this.$1_2=value;return value;}}
Microsoft.Live.Messenger.SignOutCompletedEventArgs=function(resultCode,locations,endpoint,userState){Microsoft.Live.Messenger.SignOutCompletedEventArgs.initializeBase(this);this.$1_1=resultCode;this.$1_0=locations;this.$1_2=endpoint;this.$1_3=userState;}
Microsoft.Live.Messenger.SignOutCompletedEventArgs.prototype={$1_0:0,$1_1:0,$1_2:null,$1_3:null,get_endpoint:function(){return this.$1_2;},get_locations:function(){return this.$1_0;},get_resultCode:function(){return this.$1_1;},get_userState:function(){return this.$1_3;}}
Microsoft.Live.Messenger.M$A=function(){}
Microsoft.Live.Messenger.M$A.$0=function($p0){return new Error(String.format(Microsoft.Live.Messenger.M$D.$9,$p0));}
Microsoft.Live.Messenger.M$A.$1=function($p0,$p1){if($p1==null){return Microsoft.Live.Messenger.M$A.$0($p0);}else{return Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$7,$p0);}}
Microsoft.Live.Messenger.M$A.$2=function($p0,$p1){return new Error(String.format(Microsoft.Live.Messenger.M$D.$8,$p0,$p1));}
Microsoft.Live.Messenger.M$A.$3=function($p0){return new Error(String.format(Microsoft.Live.Messenger.M$D.$1A,$p0));}
Microsoft.Live.Messenger.M$A.$4=function($p0){return new Error(String.format(Microsoft.Live.Messenger.M$D.$1E,$p0));}
Microsoft.Live.Messenger.M$A.$5=function($p0){return new Error(Microsoft.Live.Messenger.M$D.$A);}
Microsoft.Live.Messenger.ReportingHelper=function(){}
Microsoft.Live.Messenger.ReportingHelper.$0=function(){var $0=MSH.ReportFactory.createReport(1,4);$0.add(MSH.$create_ReportKeyValue(18,(Microsoft.Live.Core.Loader.get_scriptsLoadTime()!=null)?Microsoft.Live.Core.Loader.get_scriptsLoadTime().toString():'failure'));$0.report();}
Microsoft.Live.Messenger.M$8=function(channelUrl,channelEndpointType){this.$2=channelEndpointType;this.$0=Microsoft.Live.Messenger.M$1C.$8(channelUrl,channelEndpointType);}
Microsoft.Live.Messenger.M$8.prototype={$0:null,$1:null,$2:0,$3:false,get_$4:function(){return this.$0.get_$A();},$5:function($p0,$p1,$p2){this.$1=$p0;if(this.$0==null){MSH.Scheduler.defer(ss.Delegate.create(this,function(){
this.$1.$18();}));}else{this.$1.$1F(Microsoft.Live.Messenger.Services.M$20.$2(this.$1,this.$1.get_$17()));this.$6($p1,$p2);}},dispose:function(){if(this.$0!=null){this.$0.dispose();}},$6:function($p0,$p1){if(this.$3){return;}switch(this.$2){case 2:(this.$1).$28();this.$3=true;break;case 3:break;default:this.$1.get_$1E().initializeSignInStatus(this.$1.$1D(),$p0,$p1);this.$3=true;break;}}}
Microsoft.Live.Messenger.WindowsLiveAuthIdentity=function(authenticationToken,channelUrl,prefetchedStatus,initializationOptions){Microsoft.Live.Messenger.WindowsLiveAuthIdentity.initializeBase(this,[authenticationToken,channelUrl,prefetchedStatus,initializationOptions]);}
Microsoft.Live.Messenger.WindowsLiveAuthIdentity.prototype={$31:null,get_experienceId:function(){return this.$31;},set_experienceId:function(value){if(this.$31!==value){this.$31=value;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('ExperienceId'));}return value;},$1D:function(){var $0=Microsoft.Live.Messenger.WindowsLiveAuthIdentity.callBaseMethod(this, '$1D');$0.experienceId=this.$31;return $0;}}
Microsoft.Live.Messenger.DelegatedAuthIdentity=function(token,channelUrl,initializationOptions){Microsoft.Live.Messenger.DelegatedAuthIdentity.initializeBase(this);if(String.isNullOrEmpty(token)){throw Microsoft.Live.Messenger.M$A.$1('token',token);}this.$14(false);this.set_$1C(MC.$create_AuthenticationInfo(2,token));this.$27=1;this.$25=new Microsoft.Live.Messenger.M$8(channelUrl,5);this.$25.$5(this,null,(initializationOptions)||null);}
Microsoft.Live.Messenger.DelegatedAuthIdentity.prototype={$25:null,$26:null,$27:0,$28:null,add_tokenExpired:function(value){this.$29=ss.Delegate.combine(this.$29,value);},remove_tokenExpired:function(value){this.$29=ss.Delegate.remove(this.$29,value);},$29:null,get_$F:function(){return this.$25;},$20:function(){if(this.$29!=null){this.$29.invoke(this,new Microsoft.Live.Messenger.TokenExpiredEventArgs());}if(this.$27>0){this.$2A();}},get_applicationId:function(){return this.$26;},$1D:function(){var $0=Microsoft.Live.Messenger.DelegatedAuthIdentity.callBaseMethod(this, '$1D');$0.appId=this.$26;return $0;},get_token:function(){return Microsoft.Live.Messenger.DelegatedAuthIdentity.callBaseMethod(this, 'get_token');},set_token:function(value){Microsoft.Live.Messenger.DelegatedAuthIdentity.callBaseMethod(this, 'set_token',[value]);this.$27++;this.$2B();return value;},$11:function($p0){Microsoft.Live.Messenger.DelegatedAuthIdentity.callBaseMethod(this, '$11',[$p0]);if(this.$26!==$p0){this.$26=$p0;this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs('AppId'));}},$14:function($p0){if(this.get_isAuthenticated()!==$p0){Microsoft.Live.Messenger.DelegatedAuthIdentity.callBaseMethod(this, '$14',[$p0]);if($p0){this.$27=0;}else if(this.$27>=2){this.$2D();}}},$2A:function(){if(this.$28==null){this.$28=new MSH.Timer(ss.Delegate.create(this,this.$2C),null,60000,MSH.Timeout.infinite);}},$2B:function(){if(this.$28!=null){this.$28.dispose();this.$28=null;}},$2C:function($p0){this.$28=null;if(!this.get_isAuthenticated()){this.$2D();}},$2D:function(){if(this.get_$21()!=null&&!this.get_$21().get_$2E()&&this.get_$21().get_$31()===2){this.get_$21().signOut(1);}},dispose:function(){if(!this.get_$24()){this.$25.dispose();if(this.$28!=null){this.$28.dispose();this.$28=null;}Microsoft.Live.Messenger.DelegatedAuthIdentity.callBaseMethod(this, 'dispose');}}}
Microsoft.Live.Messenger.RpsAuthIdentity=function(authenticationToken,channelUrl,prefetchedStatus,initializationOptions){Microsoft.Live.Messenger.RpsAuthIdentity.initializeBase(this);this.$14(false);this.get_$1C().ticket=authenticationToken;this.$2A=new Microsoft.Live.Messenger.M$8(channelUrl,4);this.$2A.$5(this,(prefetchedStatus)||null,(initializationOptions)||null);if((authenticationToken==null)&&Microsoft.Live.Messenger.RpsAuthIdentity.get_$30()){this.$29=new MSH.Timer(ss.Delegate.create(this,this.$2B),null,5000,5000);}}
Microsoft.Live.Messenger.RpsAuthIdentity.get_$2E=function(){return (Microsoft.Live.Messenger.M$E.get_$4())?'.live.com':'.live-int.com';}
Microsoft.Live.Messenger.RpsAuthIdentity.get_$2F=function(){return Microsoft.Live.Core.Loader.isFlashInstalled(8)&&!Microsoft.Live.Core.Loader.get_settings().channel.flashDisabled;}
Microsoft.Live.Messenger.RpsAuthIdentity.get_$30=function(){return window.location.hostname.toLowerCase().endsWith(Microsoft.Live.Messenger.RpsAuthIdentity.get_$2E());}
Microsoft.Live.Messenger.RpsAuthIdentity.prototype={$27:false,$28:null,$29:null,$2A:null,get_$F:function(){return this.$2A;},dispose:function(){if(!this.get_$24()){if(this.$28!=null){window.detachEvent('onunload',this.$28);}if(this.$29!=null){this.$29.dispose();}this.$2A.dispose();Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this, 'dispose');}},get_$21:function(){return Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this, 'get_$21');},set_$21:function($p0){if(Microsoft.Live.Messenger.RpsAuthIdentity.get_$30()){if(Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this, 'get_$21')!=null){Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this, 'get_$21').remove_signInCompleted(ss.Delegate.create(this,this.$2D));}if($p0!=null){$p0.add_signInCompleted(ss.Delegate.create(this,this.$2D));}}Microsoft.Live.Messenger.RpsAuthIdentity.callBaseMethod(this, 'set_$21',[$p0]);return $p0;},$2B:function($p0){if('1'!==MSH.CookieHelper.getCookie('PPLState')){if(this.get_$21()!=null&&this.get_$21().get_$31()===2){this.get_$21().signOut();}}},$2C:function(){if(this.get_$21()!=null&&this.get_$21().get_$31()===2&&!this.$27){MSH.CookieHelper.setCookieWithExpiry('MWTMsgr','1',Microsoft.Live.Messenger.RpsAuthIdentity.get_$2E(),120);}},$2D:function($p0,$p1){var $0=MLC.Channel.getChannelType();this.$27=$0===0||$0===2&&!Microsoft.Live.Messenger.RpsAuthIdentity.get_$2F();if(!this.$27){this.$28=ss.Delegate.create(this,this.$2C);window.attachEvent('onunload',this.$28);MSH.CookieHelper.expireCookie('MWTMsgr',Microsoft.Live.Messenger.RpsAuthIdentity.get_$2E());}}}
Microsoft.Live.Messenger.M$23=function(initializer){Microsoft.Live.Messenger.M$23.initializeBase(this);this.$14(false);this.$25=initializer;this.$25.$5(this,null,null);}
Microsoft.Live.Messenger.M$23.prototype={$25:null,get_$F:function(){return this.$25;}}
Microsoft.Live.Messenger.TokenExpiredEventArgs=function(){Microsoft.Live.Messenger.TokenExpiredEventArgs.initializeBase(this);}
Microsoft.Live.Messenger.EmailReceivedEventArgs=function(subject,sender,senderAddress,messageUrl,folder){Microsoft.Live.Messenger.EmailReceivedEventArgs.initializeBase(this);this.$1_0=subject;this.$1_1=sender;this.$1_2=senderAddress;this.$1_3=new Microsoft.Live.Messenger.Uri(String.format(Microsoft.Live.Messenger.M$14.get_$5().get_$7().messageUrl,messageUrl));this.$1_4=folder;}
Microsoft.Live.Messenger.EmailReceivedEventArgs.prototype={$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:0,get_subject:function(){return this.$1_0;},get_sender:function(){return this.$1_1;},get_senderAddress:function(){return this.$1_2;},get_messageUrl:function(){return this.$1_3;},get_folder:function(){return this.$1_4;}}
Microsoft.Live.Messenger.Mailbox=function(user){if(user==null){throw Microsoft.Live.Messenger.M$A.$0('user');}this.$0=user;}
Microsoft.Live.Messenger.Mailbox.prototype={$0:null,$1:0,$2:0,$3:0,$4:0,add_emailReceived:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_emailReceived:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,add_propertyChanged:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_propertyChanged:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_inboxInitialCount:function(){return this.$1;},set_inboxInitialCount:function(value){if(value!==this.$1){this.$1=value;this.$9('InboxInitialCount');}return value;},get_inboxUnreadCount:function(){return this.$2;},set_inboxUnreadCount:function(value){if(value!==this.$2){this.$2=value;this.$9('InboxUnreadCount');}return value;},get_otherInitialCount:function(){return this.$3;},set_otherInitialCount:function(value){if(value!==this.$3){this.$3=value;this.$9('OtherInitialCount');}return value;},get_otherUnreadCount:function(){return this.$4;},set_otherUnreadCount:function(value){if(value<0){value=0;}if(value!==this.$4){this.$4=value;this.$9('OtherUnreadCount');}return value;},get_$7:function(){return this.$0;},$8:function($p0){switch($p0.type){case 0:var $0=$p0.notification;this.set_inboxInitialCount($0.inboxTotal);this.set_inboxUnreadCount($0.inboxUnread);this.set_otherInitialCount($0.foldersTotal);this.set_otherUnreadCount($0.foldersUnread);break;case 1:var $1=$p0.notification;if($1.folder!==6){this.onEmailReceived(new Microsoft.Live.Messenger.EmailReceivedEventArgs($1.subject,$1.from,$1.fromAddress,new Microsoft.Live.Messenger.Uri($1.messageUrl),$1.folder));}break;case 2:var $2=$p0.notification;if($2.source===0){this.set_inboxUnreadCount(this.get_inboxUnreadCount()-$2.delta);if($2.destination!==0&&$2.destination!==6){this.set_otherUnreadCount(this.get_otherUnreadCount()+$2.delta);}}else if($2.source!==6){this.set_otherUnreadCount(this.get_otherUnreadCount()-$2.delta);if($2.destination===0){this.set_inboxUnreadCount(this.get_inboxUnreadCount()+$2.delta);}}else{if($2.destination===0){this.set_inboxUnreadCount(this.get_inboxUnreadCount()+$2.delta);}else if($2.destination!==6){this.set_otherUnreadCount(this.get_otherUnreadCount()+$2.delta);}}break;default:break;}},onEmailReceived:function(e){if(this.$5!=null){this.$5.invoke(this,e);}},onPropertyChanged:function(e){if(this.$6!=null){this.$6.invoke(this,e);}},$9:function($p0){this.onPropertyChanged(new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}}
Microsoft.Live.Messenger.Message=function(messageType){this.$0=messageType;this.$2=Date.get_now();this.$4=false;}
Microsoft.Live.Messenger.Message.$8=function($p0,$p1,$p2){var $0=null;switch($p2.type){case 1:var $1=$p2.info;var $2=new Microsoft.Live.Messenger.TextMessage($1.text,Microsoft.Live.Messenger.TextMessageFormat.$6($1.format));$2.set_$C($1.safeUrl);$0=$2;break;case 2:$0=new Microsoft.Live.Messenger.NudgeMessage();break;case 3:if($p0.get_messageFactory()!=null){var $3=$p2.info;if($p0.get_messageFactory().isRegistered($3.id)){$0=$p0.get_messageFactory().deserialize($p1,$3.id,$3.content);}}break;default:return null;}$0.$1=$p1;$0.$2=$p2.timestamp;$0.set_isOfflineMessage($p2.isOfflineMessage);return $0;}
Microsoft.Live.Messenger.Message.prototype={$0:0,$1:null,$2:null,$3:false,$4:false,get_sender:function(){return this.$1;},set_sender:function(value){this.$1=value;return value;},get_type:function(){return this.$0;},get_timestamp:function(){return this.$2;},set_timestamp:function(value){this.$2=value;return value;},get_reloaded:function(){return this.$4;},get_isOfflineMessage:function(){return this.$3;},set_isOfflineMessage:function(value){this.$3=value;return value;},get_$5:function(){return false;},$6:function($p0){this.$4=$p0;},$7:function($p0,$p1){this.$1=$p0;var $0=MC.$create_MessageInfo(this.$0,null);$0.sender=this.$1.get_$12();$0.timestamp=this.$2;$0.isOfflineMessage=this.$3;return $0;}}
Microsoft.Live.Messenger.NudgeMessage=function(){Microsoft.Live.Messenger.NudgeMessage.initializeBase(this,[2]);}
Microsoft.Live.Messenger.TextMessage=function(text,format){Microsoft.Live.Messenger.TextMessage.initializeBase(this,[1]);if(String.isNullOrEmpty(text)){throw Microsoft.Live.Messenger.M$A.$0('text');}if(format==null){format=Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat();}this.$9=text;this.$A=format;}
Microsoft.Live.Messenger.TextMessage.isValid=function(conversation,textMessage){if(conversation==null){throw Microsoft.Live.Messenger.M$A.$0('conversation');}if(conversation.get_closed()){return false;}if((textMessage!=null)&&(textMessage.length===0)){return false;}return Microsoft.Live.Messenger.TextMessage.getRemainingCharCount(conversation,textMessage)>=0;}
Microsoft.Live.Messenger.TextMessage.getRemainingCharCount=function(conversation,textMessage){if(conversation==null){throw Microsoft.Live.Messenger.M$A.$0('conversation');}if(textMessage==null){throw Microsoft.Live.Messenger.M$A.$0('textMessage');}var $0=0;if(!conversation.get_closed()){if(conversation.get_$E()){$0=400;}else{var $enum1=ss.IEnumerator.getEnumerator(conversation.get_roster());while($enum1.moveNext()){var $1=$enum1.get_current();if(!$1.get_$B()){switch($1.get_type()){case 1:$0=2000;break;case 8:case 2:case 32:$0=400;break;case 13:$0=1000;break;case 4:$0=140;break;case 16:$0=600;break;default:break;}}}}}return $0-textMessage.length;}
Microsoft.Live.Messenger.TextMessage.prototype={$9:null,$A:null,$B:null,get_format:function(){return this.$A;},get_text:function(){return this.$9;},createTextElement:function(){var $0=Microsoft.Live.Messenger.MessengerUtility.$0(this.$9,this.$B);this.$A.applyToElement($0);return $0;},get_$5:function(){return true;},get_$C:function(){return this.$B;},set_$C:function($p0){this.$B=$p0;return $p0;},$7:function($p0,$p1){if(!$p1.isTextMessageValid(this.get_text())){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$2D,'message');}this.set_sender($p0);var $0=MC.$create_TextMessageInfo(this.$9,this.$A.$5());var $1=MC.$create_MessageInfo(1,$0);$1.sender=$p0.get_$12();$1.timestamp=Date.get_now();$1.isOfflineMessage=this.get_isOfflineMessage();return $1;}}
Microsoft.Live.Messenger.TextMessageColor=function(){}
Microsoft.Live.Messenger.TextMessageColor.fromRgb=function(r,g,b){if((r<0)||(r>255)){throw Microsoft.Live.Messenger.M$A.$5('r');}if((g<0)||(g>255)){throw Microsoft.Live.Messenger.M$A.$5('g');}if((b<0)||(b>255)){throw Microsoft.Live.Messenger.M$A.$5('b');}var $0=new Microsoft.Live.Messenger.TextMessageColor();$0.r=r;$0.g=g;$0.b=b;return $0;}
Microsoft.Live.Messenger.TextMessageColor.prototype={r:0,g:0,b:0,get_r:function(){return this.r;},get_g:function(){return this.g;},get_b:function(){return this.b;}}
Microsoft.Live.Messenger.TextMessageFormat=function(fontColor,fontFamily,fontStyle,flowDirection){if(fontColor==null){throw Microsoft.Live.Messenger.M$A.$0('fontColor');}if(String.isNullOrEmpty(fontFamily)){throw Microsoft.Live.Messenger.M$A.$0('fontFamily');}this.$1=fontColor;this.$2=fontFamily;this.$3=fontStyle;this.$4=(flowDirection||0);}
Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat=function(){return Microsoft.Live.Messenger.TextMessageFormat.$0;}
Microsoft.Live.Messenger.TextMessageFormat.$6=function($p0){if($p0==null){return Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat();}else{return new Microsoft.Live.Messenger.TextMessageFormat(Microsoft.Live.Messenger.TextMessageColor.fromRgb(($p0.fontColor&255),(($p0.fontColor>>>8)&255),(($p0.fontColor>>>16)&255)),((!String.isNullOrEmpty($p0.fontFamily))?$p0.fontFamily:Microsoft.Live.Messenger.TextMessageFormat.get_defaultFormat().get_fontFamily()),$p0.fontStyle,(($p0.rightToLeft)?1:0));}}
Microsoft.Live.Messenger.TextMessageFormat.prototype={$1:null,$2:null,$3:0,$4:0,get_fontColor:function(){return this.$1;},get_fontFamily:function(){return this.$2;},get_fontStyle:function(){return this.$3;},get_flowDirection:function(){return this.$4;},applyToElement:function(element){if(element==null){throw Microsoft.Live.Messenger.M$A.$0('element');}var $0=element.style;if(this.get_fontStyle()!==0){if((this.get_fontStyle()&1)===1){$0.fontWeight='bold';}if((this.get_fontStyle()&2)===2){$0.fontStyle='italic';}if((this.get_fontStyle()&8)===8){$0.textDecoration='underline';}if((this.get_fontStyle()&4)===4){$0.textDecoration+=' line-through';}}$0.fontFamily='\''+this.get_fontFamily()+'\'';$0.color='rgb('+this.get_fontColor().get_r()+','+this.get_fontColor().get_g()+','+this.get_fontColor().get_b()+')';$0.direction=(this.get_flowDirection()===1)?'rtl':'ltr';try{$0.whiteSpace='pre-wrap';}catch($1){}},$5:function(){return MC.$create_TextMessageFormatInfo(((this.$1.get_b()<<16)|(this.$1.get_g()<<8)|this.$1.get_r()),this.$2,this.$3,(this.$4===1));}}
Microsoft.Live.Messenger.PubSubChannelEndpoint=function(){}
Microsoft.Live.Messenger.PubSubChannelEndpoint.createEndpoint=function(channelUrl){var $0=Microsoft.Live.Messenger.M$1C.$8(channelUrl,7);return $0.get_$A();}
Microsoft.Live.Messenger.M$E=function(){}
Microsoft.Live.Messenger.M$E.get_$0=function(){return (Microsoft.Live.Core.Loader.get_settings().messenger.getResourceUrl('Messenger.html').startsWith('https:'))?'https:':'http:';}
Microsoft.Live.Messenger.M$E.get_$1=function(){return Microsoft.Live.Messenger.M$E.get_$0()+'//settings.messenger.live.com';}
Microsoft.Live.Messenger.M$E.get_$2=function(){return window.location.hostname;}
Microsoft.Live.Messenger.M$E.$3=function(){return Microsoft.Live.Core.Loader.get_settings().messenger.version;}
Microsoft.Live.Messenger.M$E.get_$4=function(){switch(Microsoft.Live.Core.Loader.get_settings().environment){case 'production':case 'dogfood':case 'dogfood-int':case 'dogfood-corep5':return true;default:return false;}}
Microsoft.Live.Messenger.M$E.$5=function($p0,$p1,$p2,$p3,$p4){var $0=new ss.StringBuilder();$0.append(String.format('{0}//{1}/Delegation.aspx',Microsoft.Live.Messenger.M$E.get_$0(),Microsoft.Live.Core.Loader.get_settings().messenger.consentHostName));$0.append(String.format('?RU={0}&ps=Messenger.SignIn&pl={1}&app={2}&mkt={3}&ttype=1&appdomain={4}&clver={5}',encodeURIComponent(Microsoft.Live.Messenger.M$E.get_$1()),encodeURIComponent($p0),encodeURIComponent($p1),encodeURIComponent($p2),encodeURIComponent(Microsoft.Live.Messenger.M$E.get_$2()),encodeURIComponent(Microsoft.Live.Core.Loader.get_settings().messenger.version)));if(!String.isNullOrEmpty($p3)){$0.append('&appname=');$0.append(encodeURIComponent($p3));}if(!String.isNullOrEmpty($p4)){$0.append('&applogourl=');$0.append(encodeURIComponent($p4));}return $0.toString();}
Microsoft.Live.Messenger.M$F=function(){}
Microsoft.Live.Messenger.M$F.$0=function($p0){return MLC.JSON.deserialize($p0);}
Microsoft.Live.Messenger.M$F.$1=function($p0){return MLC.JSON.serialize($p0);}
Microsoft.Live.Messenger.M$24=function(control){Microsoft.Live.Messenger.M$24.initializeBase(this);this.$27(control);this.$14(false);this.set_$1C(MC.$create_AuthenticationInfo(2,'-'));this.$25=new Microsoft.Live.Messenger.M$8(this.$26.get_$F(),2);this.$25.$5(this,null,null);}
Microsoft.Live.Messenger.M$24.prototype={$25:null,$26:null,get_$F:function(){return this.$25;},$1B:function($p0,$p1){this.$26.$14($p0,$p1);},$27:function($p0){this.$26=$p0;},$28:function(){this.get_$1E().getConsentStatus(this.$26.get_$E());}}
Microsoft.Live.Messenger.ConsentCompletedEventArgs=function(consentToken){Microsoft.Live.Messenger.ConsentCompletedEventArgs.initializeBase(this);this.$1_0=consentToken;}
Microsoft.Live.Messenger.ConsentCompletedEventArgs.prototype={$1_0:null,get_consentToken:function(){return this.$1_0;}}
Microsoft.Live.Messenger.LinkedContact=function(contactMap,contact,contactInfo,populating){this.$6=0;this.$0=contactMap;this.$1=contact;this.$2=contactInfo;this.$3=new Microsoft.Live.Messenger.IMAddressCollection(this);var $0=this.$2.addresses;if($0!=null&&$0.length>0){var $1=$0[0];if($1.type===13){this.$5=$1.address;this.$4=this.$1.get_$2A().get_networks().get_item($1.network);if(this.$4.get_supportsIM()&&!$1.isFan){var $2;if(populating){$2=this.$0.$11(this,$1);}else{$2=this.$0.$12(this,$1);}this.$6=$1.roleLists;this.$3.$C($2);}}else{for(var $3=0;$3<$0.length;$3++){var $4=$0[$3];var $5;if(populating){$5=this.$0.$11(this,$4);}else{$5=this.$0.$12(this,$4);}if(this.$13($5,$4)){$5.get_$12().roleLists=$4.roleLists;}if($5.get_$B()){$5.get_$12().roleLists=$4.roleLists;}this.$6|=$4.roleLists;this.$3.$C($5);}}}if(this.$4==null){this.$4=(this.$3.get_count()>0)?this.$3.get_item(0).get_network():Microsoft.Live.Messenger.Network.get_$12();}}
Microsoft.Live.Messenger.LinkedContact.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$7:null,get_displayPictureUrl:function(){if(!String.isNullOrEmpty(this.$2.pictureUrl)){if(this.$4.get_$1A()){return new Microsoft.Live.Messenger.Uri(this.$2.pictureUrl);}else{return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateDisplayPictureUrl(this.$2.pictureUrl));}}else{var $enum1=ss.IEnumerator.getEnumerator(this.$3);while($enum1.moveNext()){var $0=$enum1.get_current();var $1=$0.get_presence().get_displayPictureUrl();if($1!=null){return $1;}}if(!String.isNullOrEmpty(this.$2.cid)){var $2=Microsoft.Live.Messenger.M$14.$A(this.$2.cid);if($2!=null){return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateDisplayPictureUrl($2));}}}return null;},get_emailAddress:function(){if(this.$2.emailAddress!=null){return this.$2.emailAddress.address;}return null;},get_firstName:function(){return this.$2.firstName;},get_lastName:function(){return this.$2.lastName;},get_fullName:function(){if(this.$7==null){this.$7=Microsoft.Live.Messenger.Contact.$38(this.$2.firstName,this.$2.lastName);}return this.$7;},get_id:function(){if(this.$2.id!=null){return MSH.StringHelper.toLowerCase(this.$2.id);}return null;},set_id:function(value){if(this.get_$9().id!==value){if(!String.isNullOrEmpty(this.get_$9().id)&&!Microsoft.Live.Messenger.Guid.empty.equals(new Microsoft.Live.Messenger.Guid(this.get_$9().id))){this.$0.$1E(this.get_id());}this.get_$9().id=value;if(!String.isNullOrEmpty(value)&&!Microsoft.Live.Messenger.Guid.empty.equals(new Microsoft.Live.Messenger.Guid(value))){this.$0.$1F(this);}}return value;},get_isAllowed:function(){return (this.$6&2)!==0;},get_network:function(){return this.$4;},get_photosUrl:function(){var $0=this.$11(false);var $1=this.$4.get_$18().photoUrlFormat;if(!String.isNullOrEmpty($0)&&!String.isNullOrEmpty($1)){return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format($1,MSH.UriHelper.encode($0))));}return null;},get_profileUrl:function(){var $0=this.$11(false);var $1=this.$4.get_$18().profileUrlFormat;if(!String.isNullOrEmpty($0)&&!String.isNullOrEmpty($1)){return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format($1,MSH.UriHelper.encode($0))));}return null;},get_sendMessageUrl:function(){var $0=this.$11(true);var $1=this.$4.get_$18().sendMessageUrlFormat;if(!String.isNullOrEmpty($0)&&!String.isNullOrEmpty($1)){return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format($1,MSH.UriHelper.encode($0))));}return null;},get_reportAbuseUrl:function(){var $0=this.$11(false);var $1=this.$4.get_$18().reportAbuseUrlFormat;if(!String.isNullOrEmpty($0)&&!String.isNullOrEmpty($1)){return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(String.format($1,MSH.UriHelper.encode($0))));}return null;},get_$8:function(){return ((this.$6&1)!==0);},get_$9:function(){return this.$2;},get_$A:function(){return this.$1;},get_$B:function(){return this.$3;},$C:function($p0){if(!this.$4.get_$1A()){var $0=0;var $enum1=ss.IEnumerator.getEnumerator($p0.addresses);while($enum1.moveNext()){var $1=$enum1.get_current();$0|=$1.roleLists;}if($0!==0){var $2=(($0&4)!==0)?2:4;this.$D($0,$2);}if(this.get_id()==null&&!String.isNullOrEmpty($p0.id)){this.set_id($p0.id);this.$12('Id');}if(this.get_$8()){this.$1.$3F($p0.nickname);this.$E($p0.firstName,$p0.lastName);}}},$D:function($p0,$p1){var $0=this.$6;var $1=(($0^$p0)&$p0);$0|=$p0;$1|=($0&$p1);$0&=~$p1;if($1!==0){this.$6=$0;for(var $2=0;$2<this.$3.get_count();$2++){this.$3.get_item($2).get_$12().roleLists=$0;}this.$1.$43($p0,$p1);for(var $3=0;$3<this.$3.get_count();$3++){this.$3.get_item($3).$19($0,$1);}return true;}return false;},$E:function($p0,$p1){var $0=false;if($p0!==this.$2.firstName){$0=true;this.$2.firstName=$p0;this.$12('FirstName');}if($p1!==this.$2.lastName){$0=true;this.$2.lastName=$p1;this.$12('LastName');}if($0){this.$7=null;this.$12('FullName');this.$1.$42(String.Empty,7,false);}},add_propertyChanged:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_propertyChanged:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,get_$10:function(){if(!String.isNullOrEmpty(this.$2.cid)){return this.$2.cid;}var $enum1=ss.IEnumerator.getEnumerator(this.$3);while($enum1.moveNext()){var $0=$enum1.get_current();if(!String.isNullOrEmpty($0.get_cid())){return $0.get_cid();}}return null;},$11:function($p0){var $0=null;if(!this.$4.get_$1A()){if($p0){$0=this.get_emailAddress();}else{$0=MSH.ConvertHelper.convertDecToHex(this.get_$10());if(!String.isNullOrEmpty($0)){$0=$0.padLeft(16,'0');}}}else{$0=this.$5;}return $0;},$12:function($p0){if(this.$F!=null){this.$F.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},$13:function($p0,$p1){if($p0.get_$12().roleLists===$p1.roleLists){return false;}var $0=(($p1.roleLists&32)!==0);if($p0.get_$D()&&!$0){return true;}return false;},addAddress:function($p0,$p1){var $0=$p1.get_contact();if($0!=null){$0.get_addresses().remove($p1);}$p1.$19(this.$6,this.$6^$p1.get_$12().roleLists);this.$1.get_$2A().$68($p1,this);$p1.$17(this);$p0.$C($p1);},removeAddress:function($p0,$p1){if(this.$3.get_count()===1){this.$1.get_$2A().$65(this,0,this.$6);}else{this.$1.get_$2A().$69($p1,this);}this.$0.$1A($p1);$p0.$D($p1);}}
Microsoft.Live.Messenger.LinkedContactCollection=function(){Microsoft.Live.Messenger.LinkedContactCollection.initializeBase(this);}
Microsoft.Live.Messenger.LinkedContactCollection.prototype={get_item:function(index){return this.getItem(index);}}
Microsoft.Live.Messenger.Game=function(title,username,platform){Microsoft.Live.Messenger.Game.initializeBase(this,[2]);if(title==null){throw Microsoft.Live.Messenger.M$A.$0('title');}var $0=new Array(3);$0[0]=platform||String.Empty;$0[1]=title;$0[2]=username||String.Empty;var $1=this.$17($0);this.set_$9($0);this.set_$8($1);this.$C();}
Microsoft.Live.Messenger.Game.prototype={get_platform:function(){return this.get_$9()[0];},get_title:function(){return this.get_$9()[1];},get_username:function(){return this.get_$9()[2];},$17:function($p0){if(String.isNullOrEmpty($p0[0])){if(String.isNullOrEmpty($p0[2])){return '{1}';}else{return '{1} ({2})';}}else{return '{0}: {1} ({2})';}}}
Microsoft.Live.Messenger.Media=function(type){this.$6=String.Empty;this.$3=type;}
Microsoft.Live.Messenger.Media.$B=function($p0){if(String.isNullOrEmpty($p0)){return null;}var $0=MSH.StringHelper.splitString($p0,'\\0');if($0.length>=4){if($0[2]!=='1'){return null;}var $1=null;switch(MSH.StringHelper.toLowerCase($0[1])){case 'game':$1=new Microsoft.Live.Messenger.Game(String.Empty);break;case 'music':$1=new Microsoft.Live.Messenger.Music(String.Empty,String.Empty);break;case 'video':$1=new Microsoft.Live.Messenger.Video(String.Empty);break;}if($1!=null){var $2=new Array($0.length-4);for(var $3=0;$3<$2.length;$3++){$2[$3]=$0[$3+4];}$1.$6=Microsoft.Live.Messenger.Media.$E($0[0]);$1.$4=$0[3];$1.$5=$2;return $1;}}return null;}
Microsoft.Live.Messenger.Media.$E=function($p0){var $0=MSH.StringHelper.toLowerCase($p0);if(Object.keyExists(Microsoft.Live.Messenger.Media.$2,$0)){return Microsoft.Live.Messenger.Media.$2[$0];}return $p0;}
Microsoft.Live.Messenger.Media.$F=function($p0){switch($p0){case 2:return 'Game';case 0:return 'Music';case 1:return 'Video';}return String.Empty;}
Microsoft.Live.Messenger.Media.$10=function($p0){return $p0.replaceAll('\\0',String.Empty);}
Microsoft.Live.Messenger.Media.prototype={$3:0,$4:null,$5:null,$7:false,get_application:function(){return this.$6;},get_type:function(){return this.$3;},get_text:function(){return this.$4.replace(Microsoft.Live.Messenger.Media.$1,ss.Delegate.create(this,function($p1_0){
var $1_0=parseInt(arguments[1]);if($1_0<this.$5.length){return this.$5[$1_0];}return String.Empty;}));},get_$8:function(){return this.$4;},set_$8:function($p0){this.$4=$p0;return $p0;},get_$9:function(){return this.$5;},set_$9:function($p0){this.$5=$p0;return $p0;},get_$A:function(){return this.$7;},set_$A:function($p0){this.$7=$p0;return $p0;},createTextElement:function(){var $0=document.createElement('span');$0.innerText=this.get_text();return $0;},$C:function(){var $0=null;if(String.isNullOrEmpty(this.$6)){$0=MSH.StringHelper.fromChar('x',Microsoft.Live.Messenger.M$14.get_$11());}var $1=this.$D($0);if(MSH.StringHelper.getByteCount($1)>250){throw Microsoft.Live.Messenger.M$A.$3(String.format(Microsoft.Live.Messenger.M$D.$45,250));}},$D:function($p0){var $0=new ss.StringBuilder();$0.append(Microsoft.Live.Messenger.Media.$10(this.$6||$p0));$0.append('\\0');$0.append(Microsoft.Live.Messenger.Media.$F(this.$3));$0.append('\\01\\0');$0.append(Microsoft.Live.Messenger.Media.$10(this.$4));$0.append('\\0');for(var $1=0;$1<this.$5.length;$1++){$0.append(Microsoft.Live.Messenger.Media.$10(this.$5[$1]));$0.append('\\0');}return $0.toString();}}
Microsoft.Live.Messenger.Music=function(artist,title){Microsoft.Live.Messenger.Music.initializeBase(this,[0]);if(artist==null){throw Microsoft.Live.Messenger.M$A.$0('artist');}if(title==null){throw Microsoft.Live.Messenger.M$A.$0('title');}var $0=new Array(2);$0[0]=artist;$0[1]=title;this.set_$8('{0} - {1}');this.set_$9($0);this.$C();}
Microsoft.Live.Messenger.Music.prototype={get_artist:function(){return this.get_$9()[0];},get_title:function(){return this.get_$9()[1];}}
Microsoft.Live.Messenger.Video=function(title){Microsoft.Live.Messenger.Video.initializeBase(this,[1]);if(title==null){throw Microsoft.Live.Messenger.M$A.$0('title');}var $0=[title];this.set_$8('{0}');this.set_$9($0);this.$C();}
Microsoft.Live.Messenger.Video.prototype={get_title:function(){return this.get_$9()[0];}}
Microsoft.Live.Messenger.Network=function(networkInfo){this.$10=networkInfo;this.$10.iconUrl=Microsoft.Live.Messenger.M$14.$C(this.$10.id);}
Microsoft.Live.Messenger.Network.get_$12=function(){if(Microsoft.Live.Messenger.Network.$C==null){var $0=MC.$create_NetworkInfo('WL',Microsoft.Live.Messenger.M$B.$8,1,false,null,null,null,null);$0.imEnabled=true;$0.rank=1;Microsoft.Live.Messenger.Network.$C=new Microsoft.Live.Messenger.Network($0);}return Microsoft.Live.Messenger.Network.$C;}
Microsoft.Live.Messenger.Network.get_$13=function(){if(Microsoft.Live.Messenger.Network.$F==null){var $0=MC.$create_NetworkInfo('YH',Microsoft.Live.Messenger.M$B.$B,1,false,null,null,null,null);$0.imEnabled=true;$0.rank=1001;Microsoft.Live.Messenger.Network.$F=new Microsoft.Live.Messenger.Network($0);}return Microsoft.Live.Messenger.Network.$F;}
Microsoft.Live.Messenger.Network.get_$14=function(){if(Microsoft.Live.Messenger.Network.$D==null){var $0=MC.$create_NetworkInfo('OCS',Microsoft.Live.Messenger.M$B.$9,1,false,null,null,null,null);$0.imEnabled=true;$0.rank=2;Microsoft.Live.Messenger.Network.$D=new Microsoft.Live.Messenger.Network($0);}return Microsoft.Live.Messenger.Network.$D;}
Microsoft.Live.Messenger.Network.get_$15=function(){if(Microsoft.Live.Messenger.Network.$E==null){var $0=MC.$create_NetworkInfo('SMS',Microsoft.Live.Messenger.M$B.$A,1,false,null,null,null,null);$0.imEnabled=true;$0.rank=1002;Microsoft.Live.Messenger.Network.$E=new Microsoft.Live.Messenger.Network($0);}return Microsoft.Live.Messenger.Network.$E;}
Microsoft.Live.Messenger.Network.get_$16=function(){return Microsoft.Live.Messenger.Network.$B++;}
Microsoft.Live.Messenger.Network.prototype={$10:null,$11:null,get_iconUrl:function(){if(!String.isNullOrEmpty(this.$10.iconUrl)){return new Microsoft.Live.Messenger.Uri(MSH.UriHelper.updateUrlProtocol(this.$10.iconUrl));}return null;},get_id:function(){return this.$10.id;},get_imEnabled:function(){return this.$10.imEnabled;},set_imEnabled:function(value){if(!this.get_supportsRemoteSignIn()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$1D);}if(this.$10.imEnabled!==value){this.$10.imEnabled=value;var $0=(this.$10.imEnabled)?4:8;this.$20($0);this.$27('IMEnabled');}return value;},get_name:function(){return this.$10.name;},get_status:function(){return this.$10.status;},get_tokenState:function(){return this.$10.tokenState;},get_supportsIM:function(){return this.$10.supportsIM;},get_supportsRemoteSignIn:function(){return this.$10.connectionType===2;},add_propertyChanged:function(value){this.$17=ss.Delegate.combine(this.$17,value);},remove_propertyChanged:function(value){this.$17=ss.Delegate.remove(this.$17,value);},$17:null,get_$18:function(){return this.$10;},get_$19:function(){return this.$11;},set_$19:function($p0){this.$11=$p0;return $p0;},get_$1A:function(){return this.$10.isRemoteNetwork;},get_$1B:function(){return this.$10.id==='WL';},get_$1C:function(){return this.$10.id==='SMS';},get_$1D:function(){return this.$10.id==='YH';},get_$1E:function(){return this.$10.id==='OCS';},get_$1F:function(){return this.$10.rank;},$20:function($p0){if(this.$11.get_$31()!==2){return;}var $0=MSH.StringHelper.toLowerCase(this.get_tokenState());var $1=$0==='accept'||$0==='error';var $2=this.$11.get_services();var $3=($2===3)||($2===0);var $4=0;var $5=false;if(this.get_supportsRemoteSignIn()&&this.get_imEnabled()&&$1&&$3){switch(this.$10.status){case 0:case 3:$p0|=1;$4=1;$5=true;break;}}else{switch(this.$10.status){case 1:case 2:$p0|=2;$4=3;$5=true;break;}}if($p0!==0){this.$11.$5C(this.get_id(),$p0);if($5){this.$22($4);}}},$21:function($p0,$p1,$p2,$p3){this.$10.photoUrlFormat=$p0;this.$10.profileUrlFormat=$p1;this.$10.sendMessageUrlFormat=$p2;this.$10.reportAbuseUrlFormat=$p3;},$22:function($p0){if(this.$10.status!==$p0){this.$10.status=$p0;if(this.$10.status===0){this.$26();}this.$27('Status');}},$23:function($p0,$p1){if($p0!==0){var $0=$p1&(1|2);switch($0){case 1:if(this.$10.status===1){this.$22(0);}break;case 2:if(this.$10.status===3){this.$22(2);}break;}if($p0===8){var $1=$p1&(4|8);var $2=false;switch($1){case 4:if(this.get_imEnabled()){$2=true;this.$10.imEnabled=false;}break;case 8:if(!this.get_imEnabled()){$2=true;this.$10.imEnabled=true;}break;}if($2){this.$27('IMEnabled');}}}},$24:function($p0){var $0=[];if(this.$10.name!==$p0.name){this.$10.name=$p0.name;$0.add('Name');}if(this.$10.supportsIM!==$p0.supportsIM){this.$10.supportsIM=$p0.supportsIM;$0.add('SupportsIM');}if(this.$10.connectionType!==$p0.connectionType){this.$10.connectionType=$p0.connectionType;$0.add('SupportsRemoteSignIn');}if(this.$10.imEnabled!==$p0.imEnabled){this.$10.imEnabled=$p0.imEnabled;$0.add('IMEnabled');}if(this.$10.tokenState!==$p0.tokenState){this.$10.tokenState=$p0.tokenState;$0.add('TokenState');}this.$20(0);for(var $1=0;$1<$0.length;$1++){this.$27($0[$1]);}},$25:function(){if(this.get_$18().connectionType===2){this.get_$18().connectionType=0;this.get_$18().supportsIM=false;this.$20(0);this.$27('SupportsIM');this.$27('SupportsRemoteSignIn');}},$26:function(){this.$11.get_$29().$9(true,this.get_id());},$27:function($p0){if(this.$17!=null){this.$17.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}}}
Microsoft.Live.Messenger.NetworkCollection=function(user){Microsoft.Live.Messenger.NetworkCollection.initializeBase(this);this.$17=user;this.$13={};this.add_collectionChanged(ss.Delegate.create(this,this.$1E));this.$C(Microsoft.Live.Messenger.Network.get_$12());}
Microsoft.Live.Messenger.NetworkCollection.prototype={$13:null,$14:false,$15:false,$16:false,$17:null,$18:function($p0){for(var $0=0;$0<Object.getKeyCount(this.$13);$0++){this.get_item($0).$20(0);}},$19:function($p0){this.$9();if($p0!=null){var $0={};for(var $1=0;$1<$p0.length;$1++){var $2=$p0[$1];$0[$2.id]=$2;var $3=this.get_item($2.id);if($3==null){$2.rank=Microsoft.Live.Messenger.Network.get_$16();$3=new Microsoft.Live.Messenger.Network($2);$3.set_$19(this.$17);this.$C($3);$3.$20(0);}else{$3.$24($2);}}for(var $4=0;$4<this.get_count();$4++){var $5=this.get_item($4);if($5.get_$1A()&&!Object.keyExists($0,$5.get_id())){$5.$25();this.$D($5);}}}this.$1F();this.$A();},$1A:function(){if(!this.$14){this.$C(Microsoft.Live.Messenger.Network.get_$13());this.$14=true;this.$1F();}},$1B:function(){if(!this.$15){this.$C(Microsoft.Live.Messenger.Network.get_$15());this.$15=true;this.$1F();}},$1C:function(){if(!this.$16){this.$C(Microsoft.Live.Messenger.Network.get_$14());this.$16=true;this.$1F();}},$1D:function(){var $enum1=ss.IEnumerator.getEnumerator(this);while($enum1.moveNext()){var $0=$enum1.get_current();if($0.get_$1A()){$0.$22(0);}}},$1E:function($p0,$p1){switch($p1.get_action()){case 0:for(var $0=0;$0<$p1.get_newItems().length;$0++){var $1=$p1.get_newItems()[$0];$1.set_$19(this.$17);this.$13[$1.get_id()]=$1;}break;case 1:for(var $2=0;$2<$p1.get_oldItems().length;$2++){var $3=$p1.get_oldItems()[$2];delete this.$13[$3.get_id()];}break;case 3:Object.clearKeys(this.$13);for(var $4=0;$4<this.get_$5().length;$4++){var $5=this.get_$5()[$4];$5.set_$19(this.$17);this.$13[$5.get_id()]=$5;}break;}},$1F:function(){MSH.ArrayHelper.sortArrayList(this.get_$5(),ss.Delegate.create(this,this.$20));},$20:function($p0,$p1){return ($p0).get_$1F()-($p1).get_$1F();},get_item:function(key){if(key==null){throw Microsoft.Live.Messenger.M$A.$0('key');}if(Type.canCast(key,String)){var $0=key;if(String.isNullOrEmpty($0)){throw Microsoft.Live.Messenger.M$A.$1('id',$0);}return this.$13[MSH.StringHelper.toUpperCase($0)];}else if(Type.canCast(key,Number)){return this.getItem(key);}else{throw Microsoft.Live.Messenger.M$A.$5('key');}}}
Type.registerNamespace('Microsoft.Live.Messenger.Applications');Microsoft.Live.Messenger.Applications.ApplicationStatus=function(){};Microsoft.Live.Messenger.Applications.ApplicationStatus.prototype = {unauthenticated:0,authenticated:1}
Microsoft.Live.Messenger.Applications.ApplicationStatus.registerEnum('Microsoft.Live.Messenger.Applications.ApplicationStatus',false);Microsoft.Live.Messenger.Applications.ApplicationContactResultCode=function(){};Microsoft.Live.Messenger.Applications.ApplicationContactResultCode.prototype = {success:0,failure:1,invalidSignature:2,invalidContactData:3,invalidContactListSize:4,timedOut:5}
Microsoft.Live.Messenger.Applications.ApplicationContactResultCode.registerEnum('Microsoft.Live.Messenger.Applications.ApplicationContactResultCode',false);Microsoft.Live.Messenger.Applications.ApplicationAuthenticationResultCode=function(){};Microsoft.Live.Messenger.Applications.ApplicationAuthenticationResultCode.prototype = {success:0,unauthorized:1,failure:2}
Microsoft.Live.Messenger.Applications.ApplicationAuthenticationResultCode.registerEnum('Microsoft.Live.Messenger.Applications.ApplicationAuthenticationResultCode',false);Microsoft.Live.Messenger.Applications.M$4=function(){};Microsoft.Live.Messenger.Applications.M$4.registerInterface('Microsoft.Live.Messenger.Applications.M$4');Microsoft.Live.Messenger.Applications.M$2=function(){};Microsoft.Live.Messenger.Applications.M$2.prototype = {$0:1,$1:2,$2:4}
Microsoft.Live.Messenger.Applications.M$2.registerEnum('Microsoft.Live.Messenger.Applications.M$2',false);Microsoft.Live.Messenger.Applications.Application=function(appId,appVerifier,channelUrl){this.$4=appId;this.$5=appVerifier;this.$2=new Microsoft.Live.Messenger.Applications.M$13(this);this.$1=Microsoft.Live.Messenger.M$19.$6(this);this.$3=new Microsoft.Live.Messenger.Applications.M$10(this,channelUrl);this.$3.$4();this.$7=this.$3.get_$6();this.$0=new Microsoft.Live.Messenger.Applications.M$11(this,this.$7,this.$1);}
Microsoft.Live.Messenger.Applications.Application.getApplication=function(appVerifier,channelUrl){var $0=Microsoft.Live.Messenger.Applications.M$12.$1(appVerifier);appVerifier=MSH.UriHelper.decode(appVerifier);var $1=null;if(!Object.keyExists(Microsoft.Live.Messenger.Applications.Application.$9,$0)){Microsoft.Live.Messenger.Applications.Application.$9[$0]=new Microsoft.Live.Messenger.Applications.Application($0,appVerifier,channelUrl);}$1=Microsoft.Live.Messenger.Applications.Application.$9[$0];$1.set_$10(appVerifier);return $1;}
Microsoft.Live.Messenger.Applications.Application.$A=function(){Object.clearKeys(Microsoft.Live.Messenger.Applications.Application.$9);}
Microsoft.Live.Messenger.Applications.Application.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:0,$7:null,$8:false,add_authenticationCompleted:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_authenticationCompleted:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_propertyChanged:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_propertyChanged:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,get_$D:function(){return this.$1;},$E:function(){if(!this.$8&&(this.$7!=null)){this.$8=true;this.$7.authenticate(this.$4,this.$5);}},get_$F:function(){return this.$4;},get_$10:function(){return this.$5;},set_$10:function($p0){if(this.$5!==$p0){this.$5=$p0;}return $p0;},get_contacts:function(){return this.$0.get_contacts();},get_status:function(){return this.$6;},set_status:function(value){if(this.$6!==value){this.$11('Status');this.$6=value;}return value;},$11:function($p0){if(this.$C!=null){this.$C.invoke(this,new Microsoft.Live.Messenger.PropertyChangedEventArgs($p0));}},get_$12:function(){return this.$3;},get_$13:function(){return this.$0;},get_$14:function(){return this.$2;},$15:function(){this.$16(new Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs(2));},$16:function($p0){if(this.$B!=null){this.$B.invoke(this,$p0);}}}
Microsoft.Live.Messenger.Applications.M$11=function(application,service,contactMap){this.$1=application;this.$2=service;this.$0=new Microsoft.Live.Messenger.Applications.ApplicationContactCollection(this,contactMap);this.$4=[];this.$5=[];}
Microsoft.Live.Messenger.Applications.M$11.prototype={$0:null,$1:null,$2:null,$3:0,$4:null,$5:null,$6:null,execute:function($p0){this.$1.$E();this.$4.enqueue($p0);this.$5.add($p0);this.$9();},get_contactData:function(){return null;},get_signature:function(){return null;},get_contacts:function(){return this.$0;},get_$7:function(){return this.$3;},get_$8:function(){return this.$5;},$9:function(){if((this.$6!=null)||(this.$4.length===0)){return;}if((this.$1.get_status()!==1)||(this.$2==null)){return;}this.$6=this.$4.dequeue();this.$0.$27(this.$6,false);if(this.$6.contactsDataRetrieved||this.$3===0||(this.$6.ticket==null&&this.$3===1)){this.$A(0);return;}this.$2.getApplicationContactsInfo(this.$6.cids,this.$6.ticket);},$A:function($p0){this.$0.$2D(Microsoft.Live.Messenger.Applications.M$12.$3($p0),this.$6);this.$6.contactsDataRetrieved=true;this.$6=null;this.$9();},$B:function($p0,$p1){if($p0===0){this.$3=$p1;}if(this.$1.get_status()===1){this.$9();}else{while(this.$4.length>0){this.$0.$2D(1,this.$4.dequeue());}}},$C:function($p0,$p1){if($p0===0){this.$0.$2B($p1);}this.$A($p0);}}
Microsoft.Live.Messenger.Applications.ApplicationContactCollection=function(owner,contactMap){Microsoft.Live.Messenger.Applications.ApplicationContactCollection.initializeBase(this,[null,contactMap]);this.$25=owner;this.$26=contactMap;}
Microsoft.Live.Messenger.Applications.ApplicationContactCollection.$2C=function($p0,$p1){if(String.isNullOrEmpty($p0)){throw Microsoft.Live.Messenger.M$A.$1('contactData',$p0);}if(String.isNullOrEmpty($p1)){throw Microsoft.Live.Messenger.M$A.$1('signature',$p1);}}
Microsoft.Live.Messenger.Applications.ApplicationContactCollection.prototype={add_setContactsCompleted:function(value){this.$22=ss.Delegate.combine(this.$22,value);},remove_setContactsCompleted:function(value){this.$22=ss.Delegate.remove(this.$22,value);},$22:null,add_addContactsCompleted:function(value){this.$23=ss.Delegate.combine(this.$23,value);},remove_addContactsCompleted:function(value){this.$23=ss.Delegate.remove(this.$23,value);},$23:null,add_removeContactsCompleted:function(value){this.$24=ss.Delegate.combine(this.$24,value);},remove_removeContactsCompleted:function(value){this.$24=ss.Delegate.remove(this.$24,value);},$24:null,$25:null,$26:null,get_contactData:function(){return this.$25.get_contactData();},get_signature:function(){return this.$25.get_signature();},setContacts:function(contactData,signature,userState){Microsoft.Live.Messenger.Applications.ApplicationContactCollection.$2C(contactData,signature);var $0=MC.$create_AppContactsOperation(2,MC.$create_TicketInfo(contactData,signature),Microsoft.Live.Messenger.Applications.M$12.$2(contactData),userState);this.$25.execute($0);},addContacts:function(contactData,signature,userState){Microsoft.Live.Messenger.Applications.ApplicationContactCollection.$2C(contactData,signature);var $0=MC.$create_AppContactsOperation(0,MC.$create_TicketInfo(contactData,signature),Microsoft.Live.Messenger.Applications.M$12.$2(contactData),userState);this.$25.execute($0);},removeContacts:function(contactData,signature,userState){Microsoft.Live.Messenger.Applications.ApplicationContactCollection.$2C(contactData,signature);var $0=MC.$create_AppContactsOperation(1,MC.$create_TicketInfo(contactData,signature),Microsoft.Live.Messenger.Applications.M$12.$2(contactData),userState);this.$25.execute($0);},addContactsByCid:function(cids,userState){if(cids==null||cids.length===0){throw Microsoft.Live.Messenger.M$A.$2((cids==null)?Microsoft.Live.Messenger.M$D.$9:Microsoft.Live.Messenger.M$D.$7,'cids');}var $0=MC.$create_AppContactsOperation(0,null,cids,userState);this.$25.execute($0);},removeContactsByCid:function(cids,userState){if(cids==null||cids.length===0){throw Microsoft.Live.Messenger.M$A.$2((cids==null)?Microsoft.Live.Messenger.M$D.$9:Microsoft.Live.Messenger.M$D.$7,'cids');}var $0=MC.$create_AppContactsOperation(1,null,cids,userState);this.$25.execute($0);},$27:function($p0,$p1){if(!$p0.collectionUpdated){if($p0.operationCode===2){this.$29($p0);}else{var $enum1=ss.IEnumerator.getEnumerator($p0.cids);while($enum1.moveNext()){var $0=$enum1.get_current();this.$28($p0.operationCode,$0);}}$p0.collectionUpdated=true;}if($p1){this.$2D(0,$p0);}},$28:function($p0,$p1){var $0=MC.$create_IMAddressInfo($p1,11,0);var $1=MC.$create_ContactInfo(null,String.Empty,[$0]);var $2=null;switch($p0){case 0:$2=this.$26.$18([$1]);if(!$2.get_currentAddress().get_$B()){$2.set_isApplicationContact(true);}break;case 1:$2=this.$26.$17($1);if($2!=null){$2.set_isApplicationContact(false);}break;}},$29:function($p0){this.$9();var $0=[];$0.addRange($p0.cids);var $1=[];var $enum1=ss.IEnumerator.getEnumerator(this.get_$5());while($enum1.moveNext()){var $2=$enum1.get_current();if(!$0.contains($2.get_cid())){$1.add($2);}}var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $3=$enum2.get_current();this.$2A($3);}var $enum3=ss.IEnumerator.getEnumerator($1);while($enum3.moveNext()){var $4=$enum3.get_current();$4.set_isApplicationContact(false);}this.$A();},$2A:function($p0){var $0=MC.$create_IMAddressInfo($p0,11,0);var $1=MC.$create_ContactInfo(null,String.Empty,[$0]);var $2=this.$26.$18([$1]);if(!$2.get_currentAddress().get_$B()){$2.set_isApplicationContact(true);}},$2B:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.get_current();var $1=this.$26.$10($0.addressInfo);if($1!=null){var $2=MC.ServiceDataSet.createFromPresenceInfo($0.presenceInfo);$1.$1A($2.toArray());}}},$2D:function($p0,$p1){if($p1.eventRaised){return;}var $0=new Microsoft.Live.Messenger.Applications.ApplicationContactEventArgs($p0,($p1.ticket==null)?null:$p1.ticket.ticket,($p1.ticket==null)?null:$p1.ticket.signature,$p1.userState);$0.set_cids($p1.cids);switch($p1.operationCode){case 2:this.$2E($0);break;case 0:this.$2F($0);break;case 1:this.$30($0);break;}$p1.eventRaised=true;},$2E:function($p0){if(this.$22!=null){this.$22.invoke(this,$p0);}},$2F:function($p0){if(this.$23!=null){this.$23.invoke(this,$p0);}},$30:function($p0){if(this.$24!=null){this.$24.invoke(this,$p0);}}}
Microsoft.Live.Messenger.Applications.M$13=function(application){this.$0=application;}
Microsoft.Live.Messenger.Applications.M$13.prototype={$0:null,onAuthenticationCompleted:function($p0,$p1){var $0=0;switch($p0){case 0:this.$0.set_status(1);$0=0;break;case 4:this.$0.set_status(0);$0=1;break;case 1:this.$0.set_status(0);$0=2;break;}this.$0.$16(new Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs($0));this.$0.get_$13().$B($p0,$p1.contactsSignatureRequired);},onGetApplicationContactsInfoCompleted:function($p0,$p1){this.$0.get_$13().$C($p0,$p1);}}
Microsoft.Live.Messenger.Applications.M$12=function(){}
Microsoft.Live.Messenger.Applications.M$12.$1=function($p0){if(String.isNullOrEmpty($p0)){throw Microsoft.Live.Messenger.M$A.$1('appVerifier',$p0);}if($p0.length<=200){$p0=MSH.UriHelper.decode($p0);var $0=$p0.indexOf('appid=');if($0>=0){var $1=MSH.StringHelper.substringToEnd($p0,$0+'appid='.length);$0=$1.indexOf('&');if($0>=0){$1=$1.substring(0,$0);if(!String.isNullOrEmpty($1)){return MSH.BigInt.parseHexIntToDecRadixBigInt($1).toString();}}}}throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3E,'appVerifier');}
Microsoft.Live.Messenger.Applications.M$12.$2=function($p0){var $0=[];var $1=MSH.XmlHelper.parseXmlDocument($p0);var $2=$1.documentElement;if($2==null){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$40,'contactData');}if(($2.nodeName!=='Ticket')||($2.childNodes==null)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$40,'contactData');}for(var $3=0;$3<$2.childNodes.length;$3++){switch($2.childNodes[$3].nodeName){case 'Contact':var $4=MSH.XmlHelper.getAttribute($2.childNodes[$3],'id');if(!String.isNullOrEmpty($4)&&MSH.BigInt.isDecimalInteger($4)){if(!$0.contains($4)){$0.add($4);}}else{throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$40,'contactData');}break;}}return MSH.CollectionHelper.toArray($0);}
Microsoft.Live.Messenger.Applications.M$12.$3=function($p0){return $p0;}
Microsoft.Live.Messenger.Applications.ApplicationContactEventArgs=function(resultCode,contactData,signature,userState){Microsoft.Live.Messenger.Applications.ApplicationContactEventArgs.initializeBase(this);this.$1_0=resultCode;this.$1_1=contactData;this.$1_2=signature;this.$1_3=userState;}
Microsoft.Live.Messenger.Applications.ApplicationContactEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,$1_3:null,$1_4:null,get_resultCode:function(){return this.$1_0;},get_contactData:function(){return this.$1_1;},get_signature:function(){return this.$1_2;},get_cids:function(){return this.$1_4;},set_cids:function(value){this.$1_4=value;return value;},get_userState:function(){return this.$1_3;}}
Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs=function(resultCode){Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs.initializeBase(this);this.$1_0=resultCode;}
Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs.prototype={$1_0:0,get_resultCode:function(){return this.$1_0;}}
Microsoft.Live.Messenger.Applications.M$10=function(application,channelUrl){this.$0=application;this.$1=channelUrl;}
Microsoft.Live.Messenger.Applications.M$10.prototype={$0:null,$1:null,$2:null,$3:null,$4:function(){this.$3=Microsoft.Live.Messenger.M$1C.$8(this.$1,6);if(this.$3==null){MSH.Scheduler.defer(ss.Delegate.create(this,function(){
this.$0.$15();}));}else{this.$2=new Microsoft.Live.Messenger.Services.ApplicationServiceProxy(this.$3.get_$A(),this.$0.get_$14());}},get_$5:function(){return this.$3.get_$B();},get_$6:function(){return this.$2;}}
Microsoft.Live.Messenger.Applications.M$9=function(service,user,appSettings){this.$3=new Microsoft.Live.Messenger.Applications.ApplicationContactCollection(this,user.get_$29());this.$1=service;this.$2=user;if(appSettings!=null){this.$0=appSettings.contactsSignatureRequired;}this.$7=[];this.$8=[];this.$B=[];this.$4=1;this.$5=1;}
Microsoft.Live.Messenger.Applications.M$9.prototype={$0:0,$1:null,$2:null,$3:null,$4:0,$5:0,$6:false,$7:null,$8:null,$9:null,$A:false,$B:null,$C:null,$D:null,$E:null,$F:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0.get_$13().get_$8());while($enum1.moveNext()){var $0=$enum1.get_current();var $1=MC.$create_AppContactsOperation($0.operationCode,$0.ticket,$0.cids,null);$1.collectionUpdated=$0.collectionUpdated;$1.contactsDataRetrieved=$0.contactsDataRetrieved;$1.eventRaised=true;this.$7.enqueue($0);}this.$10();},execute:function($p0){this.$7.enqueue($p0);this.$10();},get_contacts:function(){return this.$3;},get_contactData:function(){return (this.$D==null)?null:this.$D.ticket;},get_signature:function(){return (this.$D==null)?null:this.$D.signature;},$10:function(){if(this.get_$11()){return;}this.$12();switch(this.$4){case 1:this.$14();break;case 2:this.$15();break;case 4:this.$19();break;}},get_$11:function(){return this.$9!=null;},$12:function(){if(!this.get_$11()&&this.$4!==this.$5&&this.$6){this.$4=this.$5;switch(this.$4){case 2:this.$13(4,false);break;case 4:case 1:break;default:break;}}},$13:function($p0,$p1){if(this.$5!==$p0){this.$5=$p0;this.$6=$p1;}},$14:function(){if(this.$7.length===0){return;}this.$9=this.$7.dequeue();this.$3.$27(this.$9,false);if(this.$0===0||(this.$9.ticket==null&&this.$0===1)){this.$1C(0);return;}if(!this.$9.contactsDataRetrieved){this.$1.getApplicationContactsInfo(this.$9.cids,this.$9.ticket);}else{this.$8.enqueue(this.$9);this.$1C(0);}},$15:function(){if(this.$8.length===0){this.$6=true;this.$10();this.$21();return;}this.$9=this.$8.dequeue();this.$17();},$16:function($p0){if($p0.operationCode===1){this.$3.$27($p0,true);return true;}return false;},$17:function(){if(this.$9.operationCode!==3){this.$3.$27(this.$9,false);if(this.$0===0||(this.$9.ticket==null&&this.$0===1)){this.$1C(0);return;}}var $0=this.$9.operationCode;if(!this.$A){switch(this.$9.operationCode){case 1:this.$1C(0);return;case 0:case 2:$0=2;this.$A=true;break;case 3:this.$A=true;break;}}var $1=MC.$create_AppContactsOperation($0,this.$9.ticket,this.$9.cids,null);$1.allCids=this.$18(this.$9);this.$1.updateApplicationContacts($1,this.$D);},$18:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0.cids);while($enum1.moveNext()){var $1=$enum1.get_current();switch($p0.operationCode){case 2:if(!this.$B.contains($1)){$0.add($1);}break;case 0:if(!this.$B.contains($1)){$0.add($1);this.$B.add($1);}break;case 1:if(this.$B.contains($1)){this.$B.remove($1);}break;}}if($p0.operationCode===2){this.$B.clear();this.$B.addRange($p0.cids);}this.$C=($0.length===0)?null:MSH.CollectionHelper.toArray($0);return MSH.CollectionHelper.toArray(this.$B);},$19:function(){if(this.$7.length===0){return;}this.$9=this.$7.dequeue();this.$17();},$1A:function($p0,$p1){if($p0===0){this.$3.$2B($p1);this.$9.contactsDataRetrieved=true;if(!this.$9.ticketUpdated){this.$8.enqueue(this.$9);}}this.$1C($p0);},$1B:function($p0,$p1,$p2){this.$3.$2D(Microsoft.Live.Messenger.Applications.M$12.$3($p0),this.$9);if($p0===0){this.$D=$p2;this.$9.ticketUpdated=true;if($p1!=null&&$p1.length!==this.$B.length){var $0=[];if(this.$C!=null){$0.addRange(this.$C);}this.$9.allCids=$p1;var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.get_current();if(!this.$B.contains($1)){this.$B.add($1);$0.add($1);}}this.$C=MSH.CollectionHelper.toArray($0);}if(this.$C!=null){this.$20(this.$C,32|1);}if(!this.$9.contactsDataRetrieved){this.$1.getApplicationContactsInfo(this.$9.cids,this.$9.ticket);return;}}this.$1C($p0);},$1C:function($p0){this.$3.$2D(Microsoft.Live.Messenger.Applications.M$12.$3($p0),this.$9);this.$9=null;this.$C=null;this.$10();},$1D:function(){this.$13(2,true);this.$10();},$1E:function(){this.$13(1,true);this.$10();},$1F:function($p0){if(this.$2.get_$2E()){return;}var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.get_current();this.$3.$2A($1.get_cid());$0.add($1.get_cid());}this.$20(MSH.CollectionHelper.toArray($0),1);},$20:function($p0,$p1){if($p0.length>0){if(this.$2.get_status()===2){this.$1.updateAppContactsRoleLists($p0,$p1,null);}}},$21:function(){if(this.$22()&&this.$E==null){this.$E=new MSH.Timer(ss.Delegate.create(this,this.$23),null,50,MSH.Timeout.infinite);}},$22:function(){return this.$4!==1&&!this.$A&&this.$9==null&&(this.$7.length===0)&&(this.$8.length===0);},$23:function($p0){this.$E.dispose();this.$E=null;if(this.$22()){this.execute(MC.$create_AppContactsOperation(3,null,[],null));}}}
Type.registerNamespace('Microsoft.Live.Messenger.Messaging');Microsoft.Live.Messenger.Messaging.ApplicationMessage=function(){Microsoft.Live.Messenger.Messaging.ApplicationMessage.initializeBase(this,[3]);}
Microsoft.Live.Messenger.Messaging.ApplicationMessage.prototype={createTextElement:function(){return null;},$7:function($p0,$p1){if($p1.get_user().get_messageFactory()==null){Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$1);}if(MC.Compatibility.get_enforceApplicationMessageIDRegistration()&&!$p1.supportsApplicationMessageType(this.get_id())){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$4,'message');}this.set_sender($p0);var $0=this.get_sender().get_$C().get_messageFactory().serialize(this);if(String.isNullOrEmpty($0)||($0.length>2000)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$2,'message');}var $1=MC.$create_ApplicationMessageInfo(MSH.StringHelper.toLowerCase(this.get_id()),$0);var $2=MC.$create_MessageInfo(3,$1);$2.sender=this.get_sender().get_$12();$2.timestamp=this.get_timestamp();return $2;}}
Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory=function(user){if(user==null){throw Microsoft.Live.Messenger.M$A.$0('user');}this.$1=[];this.$2=user;}
Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.prototype={$1:null,$2:null,$3:null,get_$4:function(){return this.$2;},get_$5:function(){return MSH.CollectionHelper.toArray(this.$1);},register:function(id){this.$2.$6E();this.$2.$6F([3,0]);if(String.isNullOrEmpty(id)){throw Microsoft.Live.Messenger.M$A.$1('id',id);}if(id.length>64){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$19,'id');}id=MSH.StringHelper.toLowerCase(id);if(MSH.ArrayHelper.contains(Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.$0,id)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$5,'id');}if(this.isRegistered(id)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$0,'id');}this.$6(id);},unregister:function(id){this.$2.$6E();this.$2.$6F([3,0]);if(String.isNullOrEmpty(id)){throw Microsoft.Live.Messenger.M$A.$0('id');}id=MSH.StringHelper.toLowerCase(id);if(!this.isRegistered(id)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3,'id');}if(MSH.ArrayHelper.contains(Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.$0,id)){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$5,'id');}this.$1.remove(id);this.$7();},isRegistered:function(id){return this.$1.contains(MSH.StringHelper.toLowerCase(id));},onMessageRendered:function(callback){this.$3=callback;},createTextElement:function(message){if(this.$3!=null){return this.$3.invoke(message);}return null;},$6:function($p0){this.$1.add($p0);this.$7();},$7:function(){if(this.$2.get_$31()===2){this.$2.get_localEndpoint().$B(MSH.CollectionHelper.toArray(this.$1),null);}}}
Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage=function(value){Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.initializeBase(this);var $0=Microsoft.Live.Messenger.M$F.$1(value);if($0.length>2000){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$6,'value');}this.$B=$0;this.$A=value;}
Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.get_messageId=function(){return 'json';}
Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.prototype={$A:null,$B:null,get_id:function(){return 'json';},get_rawValue:function(){return this.$B;},get_value:function(){return this.$A;},$C:function($p0){this.$B=$p0;}}
Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory=function(user){Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory.initializeBase(this,[user]);this.$6('json');}
Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory.prototype={deserialize:function(sender,id,content){id=MSH.StringHelper.toLowerCase(id);if(id!=='json'){return null;}var $0=new Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage(Microsoft.Live.Messenger.M$F.$0(content));$0.$C(content);return $0;},serialize:function(message){if(String.isNullOrEmpty(message.get_id())||(MSH.StringHelper.toLowerCase(message.get_id())!=='json')){return null;}var $0=message;if(String.isNullOrEmpty($0.get_rawValue())){var $1=Microsoft.Live.Messenger.M$F.$1($0.get_value());if($1.length>2000){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$6,'value');}$0.$C($1);}return $0.get_rawValue();}}
Type.registerNamespace('Microsoft.Live.Messenger.Presence');Microsoft.Live.Messenger.Presence.PresenceExtensionFactory=function(){}
Microsoft.Live.Messenger.Presence.PresenceExtensionFactory.prototype={$0:null,onExtensionRendered:function(callback){this.$0=callback;},createTextElement:function(extension){if(this.$0!=null){return this.$0.invoke(extension);}return null;}}
Microsoft.Live.Messenger.Presence.PresenceExtension=function(name){if(String.isNullOrEmpty(name)){throw Microsoft.Live.Messenger.M$A.$0('name');}if(name.length>6){throw Microsoft.Live.Messenger.M$A.$2('Length > 6','name');}if(!MSH.RegexHelper.isMatch('^[a-z][a-z\\d]*$',name,'i')){throw Microsoft.Live.Messenger.M$A.$2('Should contain only [A..Z][a..z][0..9], and may not start with a digit.','name');}this.$1=name;}
Microsoft.Live.Messenger.Presence.PresenceExtension.prototype={$1:null,get_name:function(){return this.$1;},createTextElement:function(){return null;}}
Microsoft.Live.Messenger.Presence.PresenceExtensionCollection=function(endpoint){Microsoft.Live.Messenger.Presence.PresenceExtensionCollection.initializeBase(this);this.$13=endpoint;var $0=this.$13.get_imAddress().get_$C().get_presenceFactory();if($0!=null){var $1=endpoint.get_$7();if($1!=null){for(var $2=0;$2<$1.length;$2++){this.$C($0.deserialize($1[$2].key,$1[$2].value));}}}}
Microsoft.Live.Messenger.Presence.PresenceExtensionCollection.prototype={$13:null,get_$14:function(){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(this);while($enum1.moveNext()){var $1=$enum1.get_current();$0.add(MC.$create_KeyValuePair($1.get_name(),this.$19($1)));}return MSH.CollectionHelper.toArray($0);},add:function(property){if(property==null){throw Microsoft.Live.Messenger.M$A.$0('property');}if(!this.$13.get_$5()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$F);}var $0=this.$19(property);var $1=[];$1.addRange(this.$13.get_$7());var $2=this.$17(property.get_name());if($2!==-1){$1[$2]=MC.$create_KeyValuePair(property.get_name(),$0);this.$E($2,property);}else{$1.add(MC.$create_KeyValuePair(property.get_name(),$0));this.$C(property);}this.$16($1);},remove:function(property){if(property==null){throw Microsoft.Live.Messenger.M$A.$0('property');}if(!this.$13.get_$5()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$F);}if(this.$13.get_imAddress().get_$C().get_presenceFactory()==null){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$25);}var $0=[];$0.addRange(this.$13.get_$7());var $1=this.$17(property.get_name());if($1!==-1){$0.removeAt($1);this.$10($1);}this.$16($0);},clear:function(){if(!this.$13.get_$5()){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$F);}if(this.$13.get_imAddress().get_$C().get_presenceFactory()==null){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$25);}if(this.get_count()>0){this.$9();this.$16([]);this.$A();}},$15:function($p0){var $0=this.$13.get_imAddress().get_$C().get_presenceFactory();var $1=false;var $2=this.get_count();for(var $3=$2-1;$3>=0;$3--){var $4=this.$18(this.get_item($3).get_name(),$p0);if($4===-1){this.$10($3);$1=true;}}for(var $5=0;$5<$p0.length;$5++){var $6=this.$17($p0[$5].key);if($6===-1){this.$C($0.deserialize($p0[$5].key,$p0[$5].value));$1=true;}else{var $7=$0.serialize(this.get_item($6));if($7!==$p0[$5].value){this.$E($6,$0.deserialize($p0[$5].key,$p0[$5].value));$1=true;}}}return $1;},$16:function($p0){var $0;if($p0==null){$0=this.get_$14();}else{$0=MSH.CollectionHelper.toArray($p0);}var $1=this.$13.get_imAddress().get_$C();if($1.get_$31()===2){this.$13.$B(null,$0);}},$17:function($p0){var $0=this.get_count();for(var $1=0;$1<$0;$1++){var $2=this.get_item($1);if($2.get_name()===$p0){return $1;}}return -1;},$18:function($p0,$p1){for(var $0=0;$0<$p1.length;$0++){if($p1[$0].key===$p0){return $0;}}return -1;},$19:function($p0){var $0=this.$13.get_imAddress().get_$C().get_presenceFactory();if($0==null){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$25);}var $1=$0.serialize($p0);if($1==null){throw Microsoft.Live.Messenger.M$A.$3(Microsoft.Live.Messenger.M$D.$26);}if($1.length>500){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$27,'property');}return $1;},get_item:function(key){if(key==null){throw Microsoft.Live.Messenger.M$A.$0('key');}if(Type.canCast(key,String)){var $0=key;if(String.isNullOrEmpty($0)){throw Microsoft.Live.Messenger.M$A.$1('name',$0);}var $1=this.$17($0);if($1!==-1){return this.getItem($1);}return null;}else if(Type.canCast(key,Number)){return this.getItem(key);}else{throw Microsoft.Live.Messenger.M$A.$5('key');}}}
Microsoft.Live.Messenger.Presence.SimplePresenceExtension=function(name,value){Microsoft.Live.Messenger.Presence.SimplePresenceExtension.initializeBase(this,[name]);var $0=Microsoft.Live.Messenger.M$F.$1(value);if($0.length>500){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$29,'value');}this.$3=$0;this.$2=value;}
Microsoft.Live.Messenger.Presence.SimplePresenceExtension.prototype={$2:null,$3:null,get_rawValue:function(){return this.$3;},get_value:function(){return this.$2;},$4:function($p0){this.$3=$p0;}}
Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory=function(){Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory.initializeBase(this);}
Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory.prototype={deserialize:function(name,content){if(String.isNullOrEmpty(name)){throw Microsoft.Live.Messenger.M$A.$1('name',name);}if(String.isNullOrEmpty(content)){throw Microsoft.Live.Messenger.M$A.$1('content',content);}var $0=new Microsoft.Live.Messenger.Presence.SimplePresenceExtension(name,Microsoft.Live.Messenger.M$F.$0(content));$0.$4(content);return $0;},serialize:function(property){if(property==null){throw Microsoft.Live.Messenger.M$A.$0('property');}var $0=Type.safeCast(property,Microsoft.Live.Messenger.Presence.SimplePresenceExtension);if($0==null){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$28,'property');}if(String.isNullOrEmpty($0.get_rawValue())){$0.$4(Microsoft.Live.Messenger.M$F.$1($0.get_value()));}return $0.get_rawValue();}}
Type.registerNamespace('Microsoft.Live.Messenger.UI');Microsoft.Live.Messenger.UI.DelegatedAuthControl=function(control,privacyStatementUrl,channelUrl,market,appVerifierToken){this.$7=String.Empty;this.$8=String.Empty;if(typeof(control)==='string'){var $0=control;if(String.isNullOrEmpty($0)){throw Microsoft.Live.Messenger.M$A.$1('controlId',$0);}this.$2=document.getElementById($0);if(this.$2==null){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$33,$0);}}else{this.$2=control;if(this.$2==null){throw Microsoft.Live.Messenger.M$A.$0('controlElement');}}if(String.isNullOrEmpty(privacyStatementUrl)){throw Microsoft.Live.Messenger.M$A.$1('privacyStatementUrl',privacyStatementUrl);}if(String.isNullOrEmpty(market)){market=Microsoft.Live.Core.Loader.get_settings().market;}if(String.isNullOrEmpty(appVerifierToken)){throw Microsoft.Live.Messenger.M$A.$1('appVerifierToken',appVerifierToken);}this.$2.attachEvent('onclick',ss.Delegate.create(this,this.$11));this.$3=privacyStatementUrl;this.$4=channelUrl;this.$5=market;this.$6=decodeURIComponent(appVerifierToken);this.$9=this.$16();this.$B=new Microsoft.Live.Messenger.UI.DelegatedAuthControlLinks(this,market);}
Microsoft.Live.Messenger.UI.DelegatedAuthControl.prototype={$2:null,$3:null,$4:null,$5:null,$6:null,$9:null,$A:false,$B:null,add_consentCompleted:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_consentCompleted:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,get_$E:function(){return this.$6;},get_$F:function(){return this.$4;},get_$10:function(){return Microsoft.Live.Messenger.M$E.$5(this.$3,this.$6,this.$5,this.$7,this.$8);},$11:function(){if(!this.$A){this.$16().$27(this);this.$13(2);this.$12();}},$12:function(){MSH.DomHelper.openPopup(this.get_$10(),'wAuth',500,400);},$13:function($p0){var $0=MSH.ReportFactory.createReport(1,$p0);$0.report();},$14:function($p0,$p1){if($p0===0&&$p1.isConsented){this.$15(new Microsoft.Live.Messenger.ConsentCompletedEventArgs($p1.consentToken));this.$13(3);}},$15:function($p0){if(this.$D!=null){this.$D.invoke(this,$p0);}},get_links:function(){return this.$B;},get_applicationName:function(){return this.$7;},set_applicationName:function(value){if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(value.length>129){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3C,'value');}this.$7=value;return value;},get_applicationLogoUrl:function(){return this.$8;},set_applicationLogoUrl:function(value){if(value==null){throw Microsoft.Live.Messenger.M$A.$0('value');}if(value.length>300){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$3B,'value');}this.$8=value;return value;},$16:function(){if(Microsoft.Live.Messenger.UI.DelegatedAuthControl.$C==null){Microsoft.Live.Messenger.UI.DelegatedAuthControl.$C={};}var $0=new ss.StringBuilder();$0.append(this.$5);$0.append(this.$6);if(this.$4!=null){$0.append(this.$4);}var $1=$0.toString();$0.clear();var $2=Microsoft.Live.Messenger.UI.DelegatedAuthControl.$C[$1];if($2==null){$2=new Microsoft.Live.Messenger.M$24(this);Microsoft.Live.Messenger.UI.DelegatedAuthControl.$C[$1]=$2;}return $2;},dispose:function(){if(!this.$A){this.$2.detachEvent('onclick',ss.Delegate.create(this,this.$11));this.$A=true;}}}
Microsoft.Live.Messenger.UI.DelegatedAuthControlLinks=function(delAuthCtrl,market){this.$0=delAuthCtrl;this.$1=this.$2(market);}
Microsoft.Live.Messenger.UI.DelegatedAuthControlLinks.prototype={$0:null,$1:null,get_signUpUrl:function(){return String.format('https://signup.live.com/signup.aspx?mkt={0}',encodeURIComponent(this.$1));},get_changeAccountUrl:function(){return String.format('http://login.live.com/logout.srf?id=253951&ru={0}',encodeURIComponent(this.$0.get_$10()));},get_settingsUrl:function(){return String.format('http://consent.live.com/manageconsent.aspx?mkt={0}',encodeURIComponent(this.$1));},get_privacyUrl:function(){return String.format('http://g.msn.com/2privacy/{0}',encodeURIComponent(this.$1));},get_termsOfUseUrl:function(){return String.format('http://help.live.com/help.aspx?project=tou&mkt={0}',encodeURIComponent(this.$1));},get_reportAbuseUrl:function(){return String.format('http://support.live.com/default.aspx?productKey=wlmessengerabuse&mkt={0}',encodeURIComponent(this.$1));},get_aboutMessengerUrl:function(){return String.format('http://download.live.com/?sku=messenger&mkt={0}',encodeURIComponent(this.$1));},get_sendFeedbackUrl:function(){if(Microsoft.Live.Messenger.M$E.get_$4()){return String.format('http://feedback.live.com/default.aspx?productkey=wlmessenger&mkt={0}',encodeURIComponent(this.$1));}else{return String.format('http://feedback.live-int.com/default.aspx?productkey=wlmessenger&mkt={0}',encodeURIComponent(this.$1));}},$2:function($p0){$p0=$p0.toLowerCase();switch($p0){case 'sr-cyrl':case 'sr-cyrl-cs':return 'sr-cyrl-cs';case 'sr-latn':case 'sr-sp':return 'sr-latn-cs';}return $p0;}}
Microsoft.Live.Messenger.UI.SignInControl=function(controlId,privacyStatementUrl,channelUrl,market){if(String.isNullOrEmpty(controlId)){throw Microsoft.Live.Messenger.M$A.$0('controlId');}this.$0=document.getElementById(controlId);if(this.$0==null){throw Microsoft.Live.Messenger.M$A.$2(Microsoft.Live.Messenger.M$D.$33,'controlId');}if(String.isNullOrEmpty(privacyStatementUrl)){throw Microsoft.Live.Messenger.M$A.$0('privacyStatementUrl');}this.$2=channelUrl;this.$A=market||Microsoft.Live.Core.Loader.get_settings().market;this.$7=true;this.$1=privacyStatementUrl;this.$3=new Microsoft.Live.Messenger.M$8(this.$2,3);this.$3.get_$4().add_messageReceived(ss.Delegate.create(this,this.$D));this.$B();var $0=String.format('http://{0}/Applications/SignInControl.aspx?privacyUrl={1}&domain={2}&scriptPath={3}&version={4}&mkt={5}',Microsoft.Live.Core.Loader.get_settings().messenger.applicationHostName,encodeURIComponent(this.$1),encodeURIComponent(this.get_$E()),encodeURIComponent(Microsoft.Live.Core.Loader.get_settings().messenger.getResourceUrl()),Microsoft.Live.Messenger.M$E.$3(),encodeURIComponent(this.$A));var $1=document.createElement('iframe');$1.frameBorder='0';$1.style.width='100%';$1.style.height='100%';$1.src=$0;this.$0.appendChild($1);MSH.DeprecationHelper.warnDeprecatedType(Type.getInstanceType(this),'The type Microsoft.Live.Messenger.UI.SignInControl has been deprecated and will '+'be removed in a future version. Please use Microsoft.Live.Messenger.UI.DelegatedAuthControl instead.');}
Microsoft.Live.Messenger.UI.SignInControl.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:false,$8:null,$9:false,$A:null,$B:function(){this.$4=new Microsoft.Live.Messenger.M$23(this.$3);this.$4.add_authenticationCompleted(ss.Delegate.create(this,this.$11));this.$4.add_$22(ss.Delegate.create(this,this.$C));},$C:function($p0,$p1){this.$4.remove_authenticationCompleted(ss.Delegate.create(this,this.$11));this.$4.remove_$22(ss.Delegate.create(this,this.$C));this.$B();},$D:function($p0,$p1){switch($p1.get_command()){case '$SetSignInConfig':this.$6=new Microsoft.Live.Messenger.UI.SignInControlLinks($p1.get_parameters()[0]);break;}},get_privacyStatementUrl:function(){return this.$1;},get_style:function(){if(this.$5==null){this.$5=new Microsoft.Live.Messenger.UI.SignInControlStyle();this.$5.add_$2(ss.Delegate.create(this,this.$10));}return this.$5;},get_links:function(){return this.$6;},get_$E:function(){return window.location.hostname;},add_authenticationCompleted:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_authenticationCompleted:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,hide:function(){if(this.$7){this.$8=this.getControlStyle();this.$12(new MC.HtmlElementStyle('none'));this.$7=false;}},show:function(){if(!this.$7){this.$12(new MC.HtmlElementStyle(this.$8.get_display()));this.$7=true;}},$10:function($p0,$p1){var $0=this.$5.get_$4();this.$0.style.borderColor=$0.borderColor;this.$3.get_$4().sendMessage('$ChangeStyle',[$0]);},$11:function($p0,$p1){if(this.$F!=null){this.$F.invoke(this,$p1);}},$12:function($p0){this.$0.style.display=$p0.get_display();},getControlStyle:function(){return new MC.HtmlElementStyle(this.$0.style.display);},dispose:function(){if(!this.$9){MSH.DomHelper.removeIframeFromContainer(this.$0);this.$4.dispose();this.$3.dispose();this.$9=true;}}}
Microsoft.Live.Messenger.UI.SignInControlLinks=function(configInfo){this.$0=configInfo;}
Microsoft.Live.Messenger.UI.SignInControlLinks.prototype={$0:null,get_signUpUrl:function(){return this.$0.signUpUrl;},get_changeAccountUrl:function(){return this.$0.changeAccountUrl;},get_settingsUrl:function(){return this.$0.settingsUrl;},get_privacyUrl:function(){return this.$0.privacyUrl;},get_termsOfUseUrl:function(){return this.$0.termsOfUseUrl;},get_reportAbuseUrl:function(){return this.$0.reportAbuseUrl;},get_aboutMessengerUrl:function(){return this.$0.aboutMessengerUrl;}}
Microsoft.Live.Messenger.UI.SignInControlStyle=function(){this.$0=MC.$create_SignInControlStyleInfo('#333333','#ffffff','#9d9d9e','#0066a7','#333333','#e8f5fd','#707070');}
Microsoft.Live.Messenger.UI.SignInControlStyle.prototype={$0:null,$1:null,add_$2:function($p0){this.$3=ss.Delegate.combine(this.$3,$p0);},remove_$2:function($p0){this.$3=ss.Delegate.remove(this.$3,$p0);},$3:null,get_$4:function(){return this.$0;},get_backColor:function(){return this.$0.backColor;},set_backColor:function(value){this.$0.backColor=this.$5(value);this.$6();return value;},get_foreColor:function(){return this.$0.foreColor;},set_foreColor:function(value){this.$0.foreColor=this.$5(value);this.$6();return value;},get_borderColor:function(){return this.$0.borderColor;},set_borderColor:function(value){this.$0.borderColor=this.$5(value);this.$6();return value;},get_linkColor:function(){return this.$0.linkColor;},set_linkColor:function(value){this.$0.linkColor=this.$5(value);this.$6();return value;},get_buttonForeColor:function(){return this.$0.buttonForeColor;},set_buttonForeColor:function(value){this.$0.buttonForeColor=this.$5(value);this.$6();return value;},get_buttonBackColor:function(){return this.$0.buttonBackColor;},set_buttonBackColor:function(value){this.$0.buttonBackColor=this.$5(value);this.$6();return value;},get_buttonBorderColor:function(){return this.$0.buttonBorderColor;},set_buttonBorderColor:function(value){this.$0.buttonBorderColor=this.$5(value);this.$6();return value;},$5:function($p0){if(String.isNullOrEmpty($p0)){throw Microsoft.Live.Messenger.M$A.$1('color',$p0);}var $0=new RegExp('^#[0-9a-f]{6,6}$','i');if(!$0.test($p0)){throw Microsoft.Live.Messenger.M$A.$5('color');}return MSH.StringHelper.toLowerCase($p0);},$6:function(){if(this.$1==null){this.$1=new MSH.Timer(ss.Delegate.create(this,this.$7),null,1,MSH.Timeout.infinite);}},$7:function($p0){this.$1.dispose();this.$1=null;if(this.$3!=null){this.$3.invoke(this,ss.EventArgs.Empty);}}}
Microsoft.Live.Messenger.Services.ApplicationServiceProxy.registerClass('Microsoft.Live.Messenger.Services.ApplicationServiceProxy',null,MC.IApplicationService);Microsoft.Live.Messenger.Services.M$1F.registerClass('Microsoft.Live.Messenger.Services.M$1F');Microsoft.Live.Messenger.Services.UserServiceProxy.registerClass('Microsoft.Live.Messenger.Services.UserServiceProxy',null,MC.IUserService,ss.IDisposable);Microsoft.Live.Messenger.Services.M$20.registerClass('Microsoft.Live.Messenger.Services.M$20');Microsoft.Live.Messenger.Alert.registerClass('Microsoft.Live.Messenger.Alert');Microsoft.Live.Messenger.Collection.registerClass('Microsoft.Live.Messenger.Collection',null,ss.IEnumerable,Microsoft.Live.Messenger.INotifyCollectionChanged,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.AlertCollection.registerClass('Microsoft.Live.Messenger.AlertCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.AuthenticationCompletedEventArgs.registerClass('Microsoft.Live.Messenger.AuthenticationCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.Guid.registerClass('Microsoft.Live.Messenger.Guid');Microsoft.Live.Messenger.Identity.registerClass('Microsoft.Live.Messenger.Identity',null,Microsoft.Live.Messenger.INotifyPropertyChanged,ss.IDisposable);Microsoft.Live.Messenger.Uri.registerClass('Microsoft.Live.Messenger.Uri');Microsoft.Live.Messenger.Version.registerClass('Microsoft.Live.Messenger.Version');Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs.registerClass('Microsoft.Live.Messenger.NotifyCollectionChangedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.PropertyChangedEventArgs.registerClass('Microsoft.Live.Messenger.PropertyChangedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.Capabilities.registerClass('Microsoft.Live.Messenger.Capabilities',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Contact.registerClass('Microsoft.Live.Messenger.Contact',null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$7);Microsoft.Live.Messenger.ContactPresence.registerClass('Microsoft.Live.Messenger.ContactPresence',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.M$18.registerClass('Microsoft.Live.Messenger.M$18',null,Microsoft.Live.Messenger.M$3);Microsoft.Live.Messenger.ContactCollection.registerClass('Microsoft.Live.Messenger.ContactCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.M$19.registerClass('Microsoft.Live.Messenger.M$19',null,MSH.IStatusCollector);Microsoft.Live.Messenger.Conversation.registerClass('Microsoft.Live.Messenger.Conversation',null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$7,ss.IDisposable);Microsoft.Live.Messenger.ConversationCollection.registerClass('Microsoft.Live.Messenger.ConversationCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.EmailOnlyContactCollection.registerClass('Microsoft.Live.Messenger.EmailOnlyContactCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Endpoint.registerClass('Microsoft.Live.Messenger.Endpoint',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.M$26.registerClass('Microsoft.Live.Messenger.M$26',Microsoft.Live.Messenger.Capabilities);Microsoft.Live.Messenger.EndpointCollection.registerClass('Microsoft.Live.Messenger.EndpointCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.EndpointId.registerClass('Microsoft.Live.Messenger.EndpointId');Microsoft.Live.Messenger.EndpointPresence.registerClass('Microsoft.Live.Messenger.EndpointPresence',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Group.registerClass('Microsoft.Live.Messenger.Group',null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$3);Microsoft.Live.Messenger.GroupCollection.registerClass('Microsoft.Live.Messenger.GroupCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.M$14.registerClass('Microsoft.Live.Messenger.M$14');Microsoft.Live.Messenger.IMAddress.registerClass('Microsoft.Live.Messenger.IMAddress',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.M$25.registerClass('Microsoft.Live.Messenger.M$25',Microsoft.Live.Messenger.Capabilities);Microsoft.Live.Messenger.IMAddressCollection.registerClass('Microsoft.Live.Messenger.IMAddressCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.IMAddressPresence.registerClass('Microsoft.Live.Messenger.IMAddressPresence',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Instance.registerClass('Microsoft.Live.Messenger.Instance',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.InstanceCollection.registerClass('Microsoft.Live.Messenger.InstanceCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.MessageCollection.registerClass('Microsoft.Live.Messenger.MessageCollection',Microsoft.Live.Messenger.Collection,ss.IEnumerable);Microsoft.Live.Messenger.MessengerUtility.registerClass('Microsoft.Live.Messenger.MessengerUtility');Microsoft.Live.Messenger.M$1A.registerClass('Microsoft.Live.Messenger.M$1A');Microsoft.Live.Messenger.PendingContact.registerClass('Microsoft.Live.Messenger.PendingContact');Microsoft.Live.Messenger.PendingContactCollection.registerClass('Microsoft.Live.Messenger.PendingContactCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.PremiumFeature.registerClass('Microsoft.Live.Messenger.PremiumFeature',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.PresenceProperty.registerClass('Microsoft.Live.Messenger.PresenceProperty');Microsoft.Live.Messenger.PresencePropertyCollection.registerClass('Microsoft.Live.Messenger.PresencePropertyCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Settings.registerClass('Microsoft.Live.Messenger.Settings',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.SignedInEventArgs.registerClass('Microsoft.Live.Messenger.SignedInEventArgs',ss.EventArgs);Microsoft.Live.Messenger.M$16.registerClass('Microsoft.Live.Messenger.M$16');Microsoft.Live.Messenger.M$17.registerClass('Microsoft.Live.Messenger.M$17');Microsoft.Live.Messenger.M$15.registerClass('Microsoft.Live.Messenger.M$15');Microsoft.Live.Messenger.SortedCollection.registerClass('Microsoft.Live.Messenger.SortedCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.SortedContactCollection.registerClass('Microsoft.Live.Messenger.SortedContactCollection',Microsoft.Live.Messenger.SortedCollection);Microsoft.Live.Messenger.M$21.registerClass('Microsoft.Live.Messenger.M$21');Microsoft.Live.Messenger.TypingIMAddressCollection.registerClass('Microsoft.Live.Messenger.TypingIMAddressCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.User.registerClass('Microsoft.Live.Messenger.User',null,Microsoft.Live.Messenger.INotifyPropertyChanged,ss.IDisposable);Microsoft.Live.Messenger.M$1D.registerClass('Microsoft.Live.Messenger.M$1D',null,ss.IDisposable);Microsoft.Live.Messenger.M$1E.registerClass('Microsoft.Live.Messenger.M$1E',null,MC.IUserServiceEvents);Microsoft.Live.Messenger.M$1B.registerClass('Microsoft.Live.Messenger.M$1B');Microsoft.Live.Messenger.M$1C.registerClass('Microsoft.Live.Messenger.M$1C',null,ss.IDisposable);Microsoft.Live.Messenger.AddContactCompletedEventArgs.registerClass('Microsoft.Live.Messenger.AddContactCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.AddressChangingEventArgs.registerClass('Microsoft.Live.Messenger.AddressChangingEventArgs',ss.EventArgs);Microsoft.Live.Messenger.AlertReceivedEventArgs.registerClass('Microsoft.Live.Messenger.AlertReceivedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.InviteAddressCompletedEventArgs.registerClass('Microsoft.Live.Messenger.InviteAddressCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.InviteContactCompletedEventArgs.registerClass('Microsoft.Live.Messenger.InviteContactCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.MessageReceivedEventArgs.registerClass('Microsoft.Live.Messenger.MessageReceivedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.SendMessageFailedEventArgs.registerClass('Microsoft.Live.Messenger.SendMessageFailedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.SignedOutEventArgs.registerClass('Microsoft.Live.Messenger.SignedOutEventArgs',ss.EventArgs);Microsoft.Live.Messenger.SignedOutRemotelyEventArgs.registerClass('Microsoft.Live.Messenger.SignedOutRemotelyEventArgs',ss.EventArgs);Microsoft.Live.Messenger.SignInCompletedEventArgs.registerClass('Microsoft.Live.Messenger.SignInCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.SignOutCompletedEventArgs.registerClass('Microsoft.Live.Messenger.SignOutCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.M$A.registerClass('Microsoft.Live.Messenger.M$A');Microsoft.Live.Messenger.ReportingHelper.registerClass('Microsoft.Live.Messenger.ReportingHelper');Microsoft.Live.Messenger.M$8.registerClass('Microsoft.Live.Messenger.M$8',null,ss.IDisposable);Microsoft.Live.Messenger.RpsAuthIdentity.registerClass('Microsoft.Live.Messenger.RpsAuthIdentity',Microsoft.Live.Messenger.Identity);Microsoft.Live.Messenger.WindowsLiveAuthIdentity.registerClass('Microsoft.Live.Messenger.WindowsLiveAuthIdentity',Microsoft.Live.Messenger.RpsAuthIdentity);Microsoft.Live.Messenger.DelegatedAuthIdentity.registerClass('Microsoft.Live.Messenger.DelegatedAuthIdentity',Microsoft.Live.Messenger.Identity);Microsoft.Live.Messenger.M$23.registerClass('Microsoft.Live.Messenger.M$23',Microsoft.Live.Messenger.Identity);Microsoft.Live.Messenger.TokenExpiredEventArgs.registerClass('Microsoft.Live.Messenger.TokenExpiredEventArgs',ss.EventArgs);Microsoft.Live.Messenger.EmailReceivedEventArgs.registerClass('Microsoft.Live.Messenger.EmailReceivedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.Mailbox.registerClass('Microsoft.Live.Messenger.Mailbox',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Message.registerClass('Microsoft.Live.Messenger.Message');Microsoft.Live.Messenger.NudgeMessage.registerClass('Microsoft.Live.Messenger.NudgeMessage',Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.TextMessage.registerClass('Microsoft.Live.Messenger.TextMessage',Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.TextMessageColor.registerClass('Microsoft.Live.Messenger.TextMessageColor');Microsoft.Live.Messenger.TextMessageFormat.registerClass('Microsoft.Live.Messenger.TextMessageFormat');Microsoft.Live.Messenger.PubSubChannelEndpoint.registerClass('Microsoft.Live.Messenger.PubSubChannelEndpoint');Microsoft.Live.Messenger.M$E.registerClass('Microsoft.Live.Messenger.M$E');Microsoft.Live.Messenger.M$F.registerClass('Microsoft.Live.Messenger.M$F');Microsoft.Live.Messenger.M$24.registerClass('Microsoft.Live.Messenger.M$24',Microsoft.Live.Messenger.Identity);Microsoft.Live.Messenger.ConsentCompletedEventArgs.registerClass('Microsoft.Live.Messenger.ConsentCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.LinkedContact.registerClass('Microsoft.Live.Messenger.LinkedContact',null,Microsoft.Live.Messenger.INotifyPropertyChanged,Microsoft.Live.Messenger.M$7);Microsoft.Live.Messenger.LinkedContactCollection.registerClass('Microsoft.Live.Messenger.LinkedContactCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Media.registerClass('Microsoft.Live.Messenger.Media');Microsoft.Live.Messenger.Game.registerClass('Microsoft.Live.Messenger.Game',Microsoft.Live.Messenger.Media);Microsoft.Live.Messenger.Music.registerClass('Microsoft.Live.Messenger.Music',Microsoft.Live.Messenger.Media);Microsoft.Live.Messenger.Video.registerClass('Microsoft.Live.Messenger.Video',Microsoft.Live.Messenger.Media);Microsoft.Live.Messenger.Network.registerClass('Microsoft.Live.Messenger.Network',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.NetworkCollection.registerClass('Microsoft.Live.Messenger.NetworkCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Applications.Application.registerClass('Microsoft.Live.Messenger.Applications.Application',null,Microsoft.Live.Messenger.INotifyPropertyChanged);Microsoft.Live.Messenger.Applications.M$11.registerClass('Microsoft.Live.Messenger.Applications.M$11',null,Microsoft.Live.Messenger.Applications.M$4);Microsoft.Live.Messenger.Applications.ApplicationContactCollection.registerClass('Microsoft.Live.Messenger.Applications.ApplicationContactCollection',Microsoft.Live.Messenger.SortedContactCollection);Microsoft.Live.Messenger.Applications.M$13.registerClass('Microsoft.Live.Messenger.Applications.M$13',null,MC.IApplicationServiceEvents);Microsoft.Live.Messenger.Applications.M$12.registerClass('Microsoft.Live.Messenger.Applications.M$12');Microsoft.Live.Messenger.Applications.ApplicationContactEventArgs.registerClass('Microsoft.Live.Messenger.Applications.ApplicationContactEventArgs',ss.EventArgs);Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs.registerClass('Microsoft.Live.Messenger.Applications.ApplicationAuthenticationCompletedEventArgs',ss.EventArgs);Microsoft.Live.Messenger.Applications.M$10.registerClass('Microsoft.Live.Messenger.Applications.M$10');Microsoft.Live.Messenger.Applications.M$9.registerClass('Microsoft.Live.Messenger.Applications.M$9',null,Microsoft.Live.Messenger.Applications.M$4);Microsoft.Live.Messenger.Messaging.ApplicationMessage.registerClass('Microsoft.Live.Messenger.Messaging.ApplicationMessage',Microsoft.Live.Messenger.Message);Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.registerClass('Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory');Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage.registerClass('Microsoft.Live.Messenger.Messaging.SimpleApplicationMessage',Microsoft.Live.Messenger.Messaging.ApplicationMessage);Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory.registerClass('Microsoft.Live.Messenger.Messaging.SimpleApplicationMessageFactory',Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory);Microsoft.Live.Messenger.Presence.PresenceExtensionFactory.registerClass('Microsoft.Live.Messenger.Presence.PresenceExtensionFactory');Microsoft.Live.Messenger.Presence.PresenceExtension.registerClass('Microsoft.Live.Messenger.Presence.PresenceExtension');Microsoft.Live.Messenger.Presence.PresenceExtensionCollection.registerClass('Microsoft.Live.Messenger.Presence.PresenceExtensionCollection',Microsoft.Live.Messenger.Collection);Microsoft.Live.Messenger.Presence.SimplePresenceExtension.registerClass('Microsoft.Live.Messenger.Presence.SimplePresenceExtension',Microsoft.Live.Messenger.Presence.PresenceExtension);Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory.registerClass('Microsoft.Live.Messenger.Presence.SimplePresenceExtensionFactory',Microsoft.Live.Messenger.Presence.PresenceExtensionFactory);Microsoft.Live.Messenger.UI.DelegatedAuthControl.registerClass('Microsoft.Live.Messenger.UI.DelegatedAuthControl',null,ss.IDisposable);Microsoft.Live.Messenger.UI.DelegatedAuthControlLinks.registerClass('Microsoft.Live.Messenger.UI.DelegatedAuthControlLinks');Microsoft.Live.Messenger.UI.SignInControl.registerClass('Microsoft.Live.Messenger.UI.SignInControl',null,ss.IDisposable);Microsoft.Live.Messenger.UI.SignInControlLinks.registerClass('Microsoft.Live.Messenger.UI.SignInControlLinks');Microsoft.Live.Messenger.UI.SignInControlStyle.registerClass('Microsoft.Live.Messenger.UI.SignInControlStyle');Microsoft.Live.Messenger.Services.M$20.$0=null;Microsoft.Live.Messenger.Guid.empty=new Microsoft.Live.Messenger.Guid('{00000000-0000-0000-0000-000000000000}');Microsoft.Live.Messenger.M$19.$5={};Microsoft.Live.Messenger.M$14.$0=null;Microsoft.Live.Messenger.M$14.$2=null;Microsoft.Live.Messenger.M$14.$3=null;Microsoft.Live.Messenger.M$14.$4=null;Microsoft.Live.Messenger.MessengerUtility.$6=new RegExp('(:\\-?\\)|:\\-?\\}|:\\-?\\]|:\\-\\\\|;\\-?\\\\|:\\-?[Ss]|:\\-?\\||:\'\\-?\\||:\\-?[\\(<]|:\\-?[Dd>]|<:o\\)|<[oO]\\)|:\\-?[oO]|:\\-?[pP]|:\\-?\\[|:\'\\(|:\\-?@|;\\-?@|:\\-?\\$|:\\-#|:\\-\\*|:\\^\\)|;\\-?\\)|8o\\||8\\-\\)|8\\-\\||\\^o\\)|\\*\\-\\)|\\*\\-?\\\\|\\*\\-?\\||'+'\\+o\\(|\\|\\-\\)|\\([a-jA-Jk-pK-PrtuvR-VwWx-zX-Z]\\)|\\(ap\\)|\\(au\\)|\\(bah\\)|\\(brb\\)|\\(co\\)|\\(jk\\)|\\(ff\\)|\\(fm\\)|\\(h5\\)|\\(ip\\)|\\(li\\)|\\(mo\\)|\\(mp\\)|'+'\\(pi\\)|\\(pl\\)|\\(pu\\)|\\(sn\\)|\\(so\\)|\\(st\\)|\\(tu\\)|\\(um\\)|\\(xo\\)|\\(xx\\)|\\(yn\\)|\\(wm\\)|\\(wo\\)|\\([~\\\\*068@#&\\^\\{\\}]\\)|\\(nah\\)|\\(nnh\\)|\\(\\|\\|\\)|\\(\'\\.\'\\)|\\(bus\\)|\\(BOO\\)|\\(lol\\)|\\(rot?fl\\)|\\*p\\*|\\*s\\*|<3|:8\\)|'+'\\r\\n|\\r|\\n|'+'((http|https):\\/\\/|\\/www|www\\.)[^\\s]*[^\\s?.!(;:\'>\\[\\],])');Microsoft.Live.Messenger.MessengerUtility.$7=null;Microsoft.Live.Messenger.MessengerUtility.$8=null;Microsoft.Live.Messenger.MessengerUtility.$9=['none','simple_text','link','link_to_video','photo','photos','video','document','location'];(function(){var $0={};$0[':)']=$0[':-)']='001';$0[':d']=$0[':-d']=$0[':>']=$0[':->']='002';$0[';)']=$0[';-)']='003';$0[':o']=$0[':-o']='004';$0['(h)']='006';$0[':@']=$0[':-@']='007';$0[':$']=$0[':-$']='008';$0[':s']=$0[':-s']='009';$0[':(']=$0[':-(']=$0[':<']=$0[':-<']='010';$0[':\'(']='011';$0[':|']=$0[':-|']='012';$0['(6)']='013';$0['(a)']='014';$0['(l)']=$0['<3']='015';$0['(u)']='016';$0['(m)']='017';$0['(@)']='018';$0['(&)']='019';$0['(s)']='020';$0['(*)']='021';$0['(~)']='022';$0['(8)']='023';$0['(e)']='024';$0['(f)']='025';$0['(w)']='026';$0['(o)']=$0['(0)']='027';$0['(k)']='028';$0['(g)']='029';$0['(^)']='030';$0['(p)']='031';$0['(i)']='032';$0['(c)']='033';$0['(t)']='034';$0['({)']='035';$0['(})']='036';$0['(b)']='037';$0['(d)']='038';$0['(z)']='039';$0['(x)']='040';$0['(y)']='041';$0['(n)']='042';$0[':[']=$0[':-[']='043';$0['(nah)']=$0['(nnh)']='044';$0['(bus)']='045';$0['(#)']='046';$0['(r)']='047';$0[':-#']='048';$0['8o|']='049';$0['8-|']='050';$0['^o)']='051';$0[':-*']='052';$0['+o(']='053';$0['(sn)']='054';$0['(tu)']='055';$0['(pl)']='056';$0['(||)']='057';$0['(pi)']='058';$0['(so)']='059';$0['(au)']='060';$0['(ap)']='061';$0['(um)']='062';$0['(ip)']='063';$0['(co)']='064';$0['(mp)']='065';$0['(brb)']='066';$0['(st)']='067';$0['(yn)']='068';$0['(h5)']='069';$0['(mo)']='070';$0['(bah)']='071';$0[':^)']='072';$0['*-)']='073';$0['(li)']='074';$0['<:o)']=$0['<o)']='075';$0['8-)']='076';$0['(wo)']='077';$0['|-)']='078';$0['*p*']='079';$0['(\'.\')']='080';$0[';\\']=$0[';-\\']='082';$0[':-\\']='083';$0['(jk)']='084';$0['*s*']='085';$0['(j)']='086';$0['(v)']='087';$0[':8)']='088';$0['(lol)']='089';$0['(rofl)']=$0['(rotfl)']='090';$0['(ff)']='091';$0['(fm)']='092';$0[':\'|']=$0[':\'-|']='093';$0[':]']=$0[':-]']='094';$0[':}']=$0[':-}']='095';$0['(boo)']='096';$0['*|']=$0['*-|']='097';$0['*\\']=$0['*-\\']='098';$0[';@']=$0[';-@']='099';$0['(wm)']='100';$0['(xo)']='101';$0['(pu)']='102';$0['(xx)']='103';$0[':p']=$0[':-p']='104';Microsoft.Live.Messenger.MessengerUtility.$7=$0;var $1=['003','011','026','027','030','043','066','069','072','073','074','075','076','078','089','090','091','092','093','094','097','099','101'];Microsoft.Live.Messenger.MessengerUtility.$8={};for(var $2=0;$2<$1.length;$2++){Microsoft.Live.Messenger.MessengerUtility.$8[$1[$2]]=$1[$2];}})();
Microsoft.Live.Messenger.User.$0=-1;Microsoft.Live.Messenger.M$1C.$0=null;Microsoft.Live.Messenger.M$1C.$5=null;Microsoft.Live.Messenger.M$1C.$6=null;Microsoft.Live.Messenger.M$1C.$7=null;(function(){if(!MSH.TestingHelper.get_isUnitTest()){Microsoft.Live.Core.Loader.onDocumentReady(function(){
if(MLC.Channel.getChannelType()===3&&Microsoft.Live.Messenger.M$1C.$6==null){Microsoft.Live.Messenger.M$1C.$5=new Microsoft.Live.Messenger.M$1C('/Channel.htm',0);}});}})();
(function(){Microsoft.Live.Core.Loader.onReady(function(){
Microsoft.Live.Messenger.ReportingHelper.$0();});})();
Microsoft.Live.Messenger.TextMessageFormat.$0=new Microsoft.Live.Messenger.TextMessageFormat(Microsoft.Live.Messenger.TextMessageColor.fromRgb(0,0,0),Microsoft.Live.Messenger.M$B.$0,0,0);Microsoft.Live.Messenger.Media.$1=new RegExp('\\{(\\d)\\}','g');Microsoft.Live.Messenger.Media.$2=null;(function(){var $0={};$0['wmp']='Windows Media Player';$0['xboxmsgr']='Xbox 360';$0['zune']='Zune';Microsoft.Live.Messenger.Media.$2=$0;})();
Microsoft.Live.Messenger.Network.$B=10;Microsoft.Live.Messenger.Network.$C=null;Microsoft.Live.Messenger.Network.$D=null;Microsoft.Live.Messenger.Network.$E=null;Microsoft.Live.Messenger.Network.$F=null;Microsoft.Live.Messenger.Applications.Application.$9={};Microsoft.Live.Messenger.Messaging.ApplicationMessageFactory.$0=['json','xml'];Microsoft.Live.Messenger.UI.DelegatedAuthControl.$C=null;
// ---- Do not remove this footer ----
// This script was generated using Script# v0.6.0.0 (http://projects.nikhilk.net/ScriptSharp)
// -----------------------------------
(function(){function map(types,source,dest){for(var i=0;i<types.length;i++){var type=types[i];if(!dest[type]){dest[type]=source[type];}}} var coreInterfaces=[[Microsoft.Live.Messenger.INotifyPropertyChanged,Sys.INotifyPropertyChanged]];function mapInterfaces(instType){if(Type.isClass(instType)){var interfaces=instType.__interfaces;if(interfaces){var cache=instType.__interfaceCache;for(var i=0;i<coreInterfaces.length;i++){var interfaceTypes=coreInterfaces[i];if(Array.indexOf(interfaces,interfaceTypes[0])!==-1){instType.__interfaces.push(interfaceTypes[1]);if(cache){delete cache[interfaceTypes[1].getName()];}}}}}} function mapExistingInterfaces(){for(var typeName in Sys.__upperCaseTypes){mapInterfaces(Sys.__upperCaseTypes[typeName]);}} var coreTypes=["AuthenticationCompletedEventArgs","AuthenticationStatus","INotifyCollectionChanged","INotifyPropertyChanged","NotifyCollectionChangedAction","NotifyCollectionChangedEventArgs","PropertyChangedEventArgs","ConsentCompletedEventArgs","Guid","Uri","Version"];var sysTypes=["Delegate","Enum","IEnumerable","IEnumerator","isNull","isNullOrUndefined","isUndefined","XmlDocumentParser"];var arrayMethods=["getEnumerator"];map(coreTypes,Microsoft.Live.Messenger,Microsoft.Live.Core);map(sysTypes,Sys,window);map(arrayMethods,Sys.IEnumerator,Array);mapExistingInterfaces();})();});